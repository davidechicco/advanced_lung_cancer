TOP_FEATURES_NUMBER = 6
NUM_ITERATIONS = 10
TRAIN_SET_OVERSAMPLING_SYNTHETIC == FALSE
Read data from file ../data/pone0210951_s006_dataset_EDITED_IMPUTED.csv
adenoca
large_cell_NEC
mixed
neuroendocrine_tumor
nonsmall_cell
others
poorly_differentiated
sarcomatoid
small_cell
squamous


The target feature is Sepsis
application of dplyr::select()
TRAINING_SET_RATIO = 0.9
Number of classification executions = 10	Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  1
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.602519e-02           1
AKI                             1.573171e-02           2
WBC                             9.231783e-03           4
neutropenia                     1.282998e-02           3
PT_percent                      5.605389e-03           8
CRRT                            8.646310e-03           5
PLT                             4.294957e-03          10
bacteremia                      8.169275e-03           6
BUN                             2.756229e-03          16
SOFA_D1                         4.160072e-03          11
CRP                             2.384664e-03          18
hospital_LOS                    1.862645e-03          19
APACH_II                        2.677080e-03          17
Death_Cause                     5.296519e-03           9
Vasoactiveagent                 5.866638e-03           7
Cause_Ca_problem                3.130338e-03          14
Albumin                         1.259332e-03          21
prev_wbrt                       3.681832e-03          13
Pneumonia                       3.874085e-03          12
timefromdx                      5.881739e-04          29
SAPS_II                         1.032123e-03          26
post_dc_days                    1.270588e-03          20
thrombocytopenia                3.119784e-03          15
MV_days                         1.039205e-03          25
PaO2FiO2                        4.199787e-04          31
age                             4.090941e-04          32
post_icu_survival               1.147510e-03          23
ICU_cause_intensivist           1.169118e-03          22
ICU_mortal30                    1.095668e-03          24
aPTT                            1.299544e-04          52
Hb                              2.003464e-04          47
StageNum                        3.961625e-04          34
histologyNum                    3.028152e-04          42
Distatntmets                    4.002110e-04          33
underlying_pulmo                3.640251e-04          40
ICUCPR                          4.734879e-04          30
cardiovasc                      7.959362e-04          27
Underlying_DM                   3.731033e-04          38
prev_ccrt                       3.829261e-04          36
HD                              3.814709e-04          37
Hospital_death                  6.646228e-04          28
pulmocomorbid                   2.499242e-04          43
NewlyDx                         2.435642e-04          45
HFNC                            1.354643e-04          51
ICU_Death                       3.860775e-04          35
Intensivist                     1.838404e-04          48
ICU_LOS                        -1.663879e-05          70
DischargefromICU                2.183694e-04          46
procalcitonin                  -1.342735e-06          68
post2011                        3.642428e-04          39
Refractory                      8.901361e-05          56
performance_hospital_DC         6.507555e-06          65
preICUDNR                       1.481249e-04          49
sex                             1.189737e-04          53
hypoalbuminemia                 9.337620e-05          55
anemia                          6.798160e-05          59
MV                              2.442209e-04          44
respfailure                     3.368054e-04          41
Pre_PS                         -1.407696e-04          86
PoorPS                          6.237547e-05          60
performance_ICU_DC             -2.547966e-04          87
prev_rtx                       -2.901798e-04          88
DNR                            -2.354131e-05          72
Surgery                         5.871560e-06          66
BIPAP                           4.020840e-05          61
prev_ctx                        7.959323e-05          57
CTxinICU                        2.158737e-05          64
PCC                             1.467566e-04          50
postICUCtx                      1.121533e-04          54
prevCPR                         3.032133e-05          62
ILD                             6.849060e-05          58
smk_hx                         -4.997494e-05          78
DNR_at_ICU                     -4.479559e-05          75
RRT                             2.209528e-05          63
ICUreadmission                 -4.988746e-05          77
PDT                            -9.171027e-05          82
postICUCPR                     -4.621081e-05          76
Underlying_CV                  -6.014791e-05          79
Tracheostomy                   -3.497388e-05          74
postICURT                       4.521073e-06          67
ECMO                           -2.352941e-06          69
PrevICUadm                     -1.818875e-05          71
dx_after_adm                   -9.750201e-05          83
neurology                      -2.593604e-05          73
other_malignancy               -1.144026e-04          85
WBRT                           -7.923593e-05          80
Underlying_stroke              -8.997767e-05          81
prev_gks                       -1.136825e-04          84
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC      6.414820843            1
AKI                                         AKI      4.258653773            3
WBC                                         WBC      5.359546275            2
neutropenia                         neutropenia      3.979955338            4
PT_percent                           PT_percent      3.293335913            5
CRRT                                       CRRT      2.974849180            9
PLT                                         PLT      3.136438477            6
bacteremia                           bacteremia      2.264532373           14
BUN                                         BUN      3.132450381            7
SOFA_D1                                 SOFA_D1      2.479035812           12
CRP                                         CRP      3.094249666            8
hospital_LOS                       hospital_LOS      2.612067765           10
APACH_II                               APACH_II      2.438281055           13
Death_Cause                         Death_Cause      1.744362450           21
Vasoactiveagent                 Vasoactiveagent      1.452953940           23
Cause_Ca_problem               Cause_Ca_problem      1.748594898           20
Albumin                                 Albumin      1.889198141           16
prev_wbrt                             prev_wbrt      1.280990402           26
Pneumonia                             Pneumonia      1.125361253           28
timefromdx                           timefromdx      2.580741015           11
SAPS_II                                 SAPS_II      1.905945307           15
post_dc_days                       post_dc_days      1.349855015           25
thrombocytopenia               thrombocytopenia      1.048974104           30
MV_days                                 MV_days      1.355666000           24
PaO2FiO2                               PaO2FiO2      1.827750692           18
age                                         age      1.782191463           19
post_icu_survival             post_icu_survival      1.051382556           29
ICU_cause_intensivist     ICU_cause_intensivist      0.689784436           34
ICU_mortal30                       ICU_mortal30      0.519168245           39
aPTT                                       aPTT      1.841087656           17
Hb                                           Hb      1.483229500           22
StageNum                               StageNum      0.624301158           35
histologyNum                       histologyNum      0.887847596           32
Distatntmets                       Distatntmets      0.399843804           43
underlying_pulmo               underlying_pulmo      0.580980108           36
ICUCPR                                   ICUCPR      0.368480944           47
cardiovasc                           cardiovasc      0.325216604           51
Underlying_DM                     Underlying_DM      0.497811733           40
prev_ccrt                             prev_ccrt      0.387154978           44
HD                                           HD      0.341980537           50
Hospital_death                   Hospital_death      0.306272690           59
pulmocomorbid                     pulmocomorbid      0.384524962           45
NewlyDx                                 NewlyDx      0.379583641           46
HFNC                                       HFNC      0.450612530           41
ICU_Death                             ICU_Death      0.294911599           61
Intensivist                         Intensivist      0.363944298           48
ICU_LOS                                 ICU_LOS      1.205356973           27
DischargefromICU               DischargefromICU      0.324450727           52
procalcitonin                     procalcitonin      0.969207615           31
post2011                               post2011      0.283334371           63
Refractory                           Refractory      0.346933417           49
performance_hospital_DC performance_hospital_DC      0.443460328           42
preICUDNR                             preICUDNR      0.307413256           58
sex                                         sex      0.310655056           56
hypoalbuminemia                 hypoalbuminemia      0.317690867           55
anemia                                   anemia      0.320190537           53
MV                                           MV      0.209041328           68
respfailure                         respfailure      0.170916045           72
Pre_PS                                   Pre_PS      0.691279909           33
PoorPS                                   PoorPS      0.279574738           64
performance_ICU_DC           performance_ICU_DC      0.538072481           38
prev_rtx                               prev_rtx      0.580586241           37
DNR                                         DNR      0.319076070           54
Surgery                                 Surgery      0.305937218           60
BIPAP                                     BIPAP      0.226259080           66
prev_ctx                               prev_ctx      0.187327699           70
CTxinICU                               CTxinICU      0.217448547           67
PCC                                         PCC      0.110903084           81
postICUCtx                           postICUCtx      0.132962069           78
prevCPR                                 prevCPR      0.174656898           71
ILD                                         ILD      0.143663472           76
smk_hx                                   smk_hx      0.308700326           57
DNR_at_ICU                           DNR_at_ICU      0.294032679           62
RRT                                         RRT      0.117219715           80
ICUreadmission                   ICUreadmission      0.189133267           69
PDT                                         PDT      0.232629807           65
postICUCPR                           postICUCPR      0.147109942           75
Underlying_CV                     Underlying_CV      0.154282976           73
Tracheostomy                       Tracheostomy      0.118236674           79
postICURT                             postICURT      0.007702831           88
ECMO                                       ECMO      0.024810335           87
PrevICUadm                           PrevICUadm      0.083995704           85
dx_after_adm                       dx_after_adm      0.153307487           74
neurology                             neurology      0.077613199           86
other_malignancy               other_malignancy      0.138009213           77
WBRT                                       WBRT      0.104800999           82
Underlying_stroke             Underlying_stroke      0.095270210           83
prev_gks                               prev_gks      0.094632583           84
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          2        1                            1
AKI                          5        2                            2
WBC                          6        3                            4
neutropenia                  7        4                            3
PT_percent                  13        5                            8
CRRT                        14        6                            5
PLT                         16        7                           10
bacteremia                  20        8                            6
BUN                         23        9                           16
SOFA_D1                     23       10                           11
CRP                         26       11                           18
hospital_LOS                29       12                           19
APACH_II                    30       13                           17
Death_Cause                 30       14                            9
Vasoactiveagent             30       15                            7
Cause_Ca_problem            34       16                           14
Albumin                     37       17                           21
prev_wbrt                   39       18                           13
Pneumonia                   40       19                           12
timefromdx                  40       20                           29
SAPS_II                     41       21                           26
post_dc_days                45       22                           20
thrombocytopenia            45       23                           15
MV_days                     49       24                           25
PaO2FiO2                    49       25                           31
age                         51       26                           32
post_icu_survival           52       27                           23
ICU_cause_intensivist       56       28                           22
ICU_mortal30                63       29                           24
aPTT                        69       30                           52
Hb                          69       31                           47
StageNum                    69       32                           34
histologyNum                74       33                           42
Distatntmets                76       34                           33
underlying_pulmo            76       35                           40
ICUCPR                      77       36                           30
cardiovasc                  78       37                           27
Underlying_DM               78       38                           38
prev_ccrt                   80       39                           36
HD                          87       40                           37
Hospital_death              87       41                           28
pulmocomorbid               88       42                           43
NewlyDx                     91       43                           45
HFNC                        92       44                           51
ICU_Death                   96       45                           35
Intensivist                 96       46                           48
ICU_LOS                     97       47                           70
DischargefromICU            98       48                           46
procalcitonin               99       49                           68
post2011                   102       50                           39
Refractory                 105       51                           56
performance_hospital_DC    107       52                           65
preICUDNR                  107       53                           49
sex                        109       54                           53
hypoalbuminemia            110       55                           55
anemia                     112       56                           59
MV                         112       57                           44
respfailure                113       58                           41
Pre_PS                     119       59                           86
PoorPS                     124       60                           60
performance_ICU_DC         125       61                           87
prev_rtx                   125       62                           88
DNR                        126       63                           72
Surgery                    126       64                           66
BIPAP                      127       65                           61
prev_ctx                   127       66                           57
CTxinICU                   131       67                           64
PCC                        131       68                           50
postICUCtx                 132       69                           54
prevCPR                    133       70                           62
ILD                        134       71                           58
smk_hx                     135       72                           78
DNR_at_ICU                 137       73                           75
RRT                        143       74                           63
ICUreadmission             146       75                           77
PDT                        147       76                           82
postICUCPR                 151       77                           76
Underlying_CV              152       78                           79
Tracheostomy               153       79                           74
postICURT                  155       80                           67
ECMO                       156       81                           69
PrevICUadm                 156       82                           71
dx_after_adm               157       83                           83
neurology                  159       84                           73
other_malignancy           162       85                           85
WBRT                       162       86                           80
Underlying_stroke          164       87                           81
prev_gks                   168       88                           84
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  2
AKI                                            3                  5
WBC                                            2                  6
neutropenia                                    4                  7
PT_percent                                     5                 13
CRRT                                           9                 14
PLT                                            6                 16
bacteremia                                    14                 20
BUN                                            7                 23
SOFA_D1                                       12                 23
CRP                                            8                 26
hospital_LOS                                  10                 29
APACH_II                                      13                 30
Death_Cause                                   21                 30
Vasoactiveagent                               23                 30
Cause_Ca_problem                              20                 34
Albumin                                       16                 37
prev_wbrt                                     26                 39
Pneumonia                                     28                 40
timefromdx                                    11                 40
SAPS_II                                       15                 41
post_dc_days                                  25                 45
thrombocytopenia                              30                 45
MV_days                                       24                 49
PaO2FiO2                                      18                 49
age                                           19                 51
post_icu_survival                             29                 52
ICU_cause_intensivist                         34                 56
ICU_mortal30                                  39                 63
aPTT                                          17                 69
Hb                                            22                 69
StageNum                                      35                 69
histologyNum                                  32                 74
Distatntmets                                  43                 76
underlying_pulmo                              36                 76
ICUCPR                                        47                 77
cardiovasc                                    51                 78
Underlying_DM                                 40                 78
prev_ccrt                                     44                 80
HD                                            50                 87
Hospital_death                                59                 87
pulmocomorbid                                 45                 88
NewlyDx                                       46                 91
HFNC                                          41                 92
ICU_Death                                     61                 96
Intensivist                                   48                 96
ICU_LOS                                       27                 97
DischargefromICU                              52                 98
procalcitonin                                 31                 99
post2011                                      63                102
Refractory                                    49                105
performance_hospital_DC                       42                107
preICUDNR                                     58                107
sex                                           56                109
hypoalbuminemia                               55                110
anemia                                        53                112
MV                                            68                112
respfailure                                   72                113
Pre_PS                                        33                119
PoorPS                                        64                124
performance_ICU_DC                            38                125
prev_rtx                                      37                125
DNR                                           54                126
Surgery                                       60                126
BIPAP                                         66                127
prev_ctx                                      70                127
CTxinICU                                      67                131
PCC                                           81                131
postICUCtx                                    78                132
prevCPR                                       71                133
ILD                                           76                134
smk_hx                                        57                135
DNR_at_ICU                                    62                137
RRT                                           80                143
ICUreadmission                                69                146
PDT                                           65                147
postICUCPR                                    75                151
Underlying_CV                                 73                152
Tracheostomy                                  79                153
postICURT                                     88                155
ECMO                                          87                156
PrevICUadm                                    85                156
dx_after_adm                                  74                157
neurology                                     86                159
other_malignancy                              77                162
WBRT                                          82                162
Underlying_stroke                             83                164
prev_gks                                      84                168
number of selected top features: 6
selected top features: 
[1] "ANC"         "AKI"         "WBC"         "neutropenia" "PT_percent" 
[6] "CRRT"       

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.6815097
ROC AUC 		0.9166667

Brier score =  0.170  (best value: 0; worst value: 1)

TOTAL:

 FN =  6  /  8 	 (truth == 1) & (prediction < threshold)
 TP =  2  /  8 	 (truth == 1) & (prediction >= threshold)

 FP =  1  /  18 	 (truth == 0) & (prediction >= threshold)
 TN =  17  /  18 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.281 	 0.364 	 	0.731 	 	0.250 	 	0.944		0.667	 	0.739	 	0.682	0.917

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  2
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.726852e-02           1
WBC                             9.642328e-03           3
neutropenia                     1.223062e-02           2
PLT                             7.076069e-03           6
AKI                             9.400227e-03           4
PT_percent                      5.737636e-03           7
bacteremia                      8.826218e-03           5
CRP                             4.636273e-03          12
BUN                             4.148722e-03          13
CRRT                            5.282308e-03           8
thrombocytopenia                4.980252e-03           9
SOFA_D1                         3.975603e-03          15
APACH_II                        2.723923e-03          16
Pneumonia                       4.975481e-03          10
Death_Cause                     4.125783e-03          14
Albumin                         1.335336e-03          20
Cause_Ca_problem                2.713120e-03          17
timefromdx                      7.797060e-04          26
Vasoactiveagent                 4.760478e-03          11
hospital_LOS                    7.262111e-04          28
age                             9.590978e-04          23
MV_days                         9.794280e-04          22
post_dc_days                    1.387908e-03          19
SAPS_II                         4.164755e-04          30
prev_wbrt                       1.810594e-03          18
ICU_cause_intensivist           1.127370e-03          21
post_icu_survival               8.390930e-04          25
HFNC                            7.651664e-04          27
ICU_mortal30                    8.643617e-04          24
PaO2FiO2                        1.568634e-04          49
ICUCPR                          5.062856e-04          29
Intensivist                     4.019049e-04          31
procalcitonin                   1.614820e-04          47
StageNum                        1.724262e-04          46
pulmocomorbid                   3.567896e-04          33
prev_ccrt                       2.909930e-04          37
ICU_LOS                         4.574610e-05          58
post2011                        3.646232e-04          32
histologyNum                    6.509959e-05          55
HD                              2.588191e-04          38
BIPAP                           1.783845e-04          43
DischargefromICU                1.958922e-04          41
aPTT                           -1.054532e-04          79
Distatntmets                    1.176480e-04          52
ICU_Death                       3.175052e-04          36
NewlyDx                         1.745122e-04          45
underlying_pulmo                8.706720e-06          62
cardiovasc                      3.306524e-04          34
hypoalbuminemia                 2.891330e-05          60
Hospital_death                  2.161187e-04          40
PDT                             1.801560e-04          42
anemia                          1.587124e-04          48
respfailure                     3.197352e-04          35
sex                             1.771014e-04          44
MV                              2.451912e-04          39
performance_ICU_DC             -7.129306e-05          74
preICUDNR                       9.207994e-05          53
DNR                             4.758448e-06          64
Hb                             -3.264757e-04          87
performance_hospital_DC        -1.414525e-04          82
Surgery                         7.460866e-05          54
Underlying_DM                  -2.512260e-05          69
prev_ctx                        1.188486e-04          51
Pre_PS                         -2.261118e-04          86
Refractory                     -4.278092e-05          70
ICUreadmission                  3.925596e-05          59
postICUCtx                      1.539190e-04          50
prev_rtx                       -3.704039e-04          88
DNR_at_ICU                     -1.421805e-04          83
ILD                             2.137983e-05          61
smk_hx                         -1.480449e-04          84
ECMO                            4.872836e-05          56
PCC                             4.834854e-05          57
prevCPR                        -4.867559e-05          71
PoorPS                         -1.085619e-04          80
Tracheostomy                   -2.420753e-05          68
postICUCPR                     -7.832630e-05          75
CTxinICU                        5.069403e-06          63
WBRT                           -4.999468e-05          72
neurology                      -1.836005e-05          67
dx_after_adm                   -8.618701e-05          76
PrevICUadm                     -1.610510e-05          66
Underlying_CV                  -1.009478e-04          77
postICURT                       2.083333e-06          65
RRT                            -5.688913e-05          73
prev_gks                       -1.053716e-04          78
other_malignancy               -1.606423e-04          85
Underlying_stroke              -1.232610e-04          81
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC       6.51763901            1
WBC                                         WBC       5.27146256            2
neutropenia                         neutropenia       3.95580868            4
PLT                                         PLT       3.99095502            3
AKI                                         AKI       2.79442715            8
PT_percent                           PT_percent       3.49192801            6
bacteremia                           bacteremia       2.73815941            9
CRP                                         CRP       3.82051809            5
BUN                                         BUN       3.36636260            7
CRRT                                       CRRT       2.09547137           14
thrombocytopenia               thrombocytopenia       1.85093576           16
SOFA_D1                                 SOFA_D1       2.45114591           11
APACH_II                               APACH_II       2.36459339           12
Pneumonia                             Pneumonia       1.43702727           23
Death_Cause                         Death_Cause       1.62765961           20
Albumin                                 Albumin       2.01808925           15
Cause_Ca_problem               Cause_Ca_problem       1.77036935           19
timefromdx                           timefromdx       2.65241046           10
Vasoactiveagent                 Vasoactiveagent       1.37635085           26
hospital_LOS                       hospital_LOS       2.19083701           13
age                                         age       1.62398199           21
MV_days                                 MV_days       1.40132302           24
post_dc_days                       post_dc_days       1.37483471           27
SAPS_II                                 SAPS_II       1.80103578           18
prev_wbrt                             prev_wbrt       0.90743752           31
ICU_cause_intensivist     ICU_cause_intensivist       0.64145948           34
post_icu_survival             post_icu_survival       0.99706203           30
HFNC                                       HFNC       0.50766378           38
ICU_mortal30                       ICU_mortal30       0.41344414           43
PaO2FiO2                               PaO2FiO2       1.60951470           22
ICUCPR                                   ICUCPR       0.41324004           44
Intensivist                         Intensivist       0.42981597           42
procalcitonin                     procalcitonin       1.01558267           29
StageNum                               StageNum       0.65320831           33
pulmocomorbid                     pulmocomorbid       0.35598728           48
prev_ccrt                             prev_ccrt       0.37966532           46
ICU_LOS                                 ICU_LOS       1.15859147           28
post2011                               post2011       0.30280791           54
histologyNum                       histologyNum       0.80703164           32
HD                                           HD       0.33433888           50
BIPAP                                     BIPAP       0.34104198           49
DischargefromICU               DischargefromICU       0.31834762           52
aPTT                                       aPTT       1.81509377           17
Distatntmets                       Distatntmets       0.41251770           45
ICU_Death                             ICU_Death       0.26205053           62
NewlyDx                                 NewlyDx       0.30499594           53
underlying_pulmo               underlying_pulmo       0.51526005           37
cardiovasc                           cardiovasc       0.24078325           66
hypoalbuminemia                 hypoalbuminemia       0.45446332           40
Hospital_death                   Hospital_death       0.26113533           63
PDT                                         PDT       0.28482143           61
anemia                                   anemia       0.30037744           56
respfailure                         respfailure       0.20610442           69
sex                                         sex       0.28697784           60
MV                                           MV       0.23393525           67
performance_ICU_DC           performance_ICU_DC       0.59461094           35
preICUDNR                             preICUDNR       0.29883251           57
DNR                                         DNR       0.36618804           47
Hb                                           Hb       1.38302321           25
performance_hospital_DC performance_hospital_DC       0.53151480           36
Surgery                                 Surgery       0.25822140           64
Underlying_DM                     Underlying_DM       0.32652073           51
prev_ctx                               prev_ctx       0.18638520           70
Pre_PS                                   Pre_PS       0.50173276           39
Refractory                           Refractory       0.30254496           55
ICUreadmission                   ICUreadmission       0.21822582           68
postICUCtx                           postICUCtx       0.11812186           78
prev_rtx                               prev_rtx       0.44657500           41
DNR_at_ICU                           DNR_at_ICU       0.28771367           59
ILD                                         ILD       0.08861248           81
smk_hx                                   smk_hx       0.28919377           58
ECMO                                       ECMO       0.05242167           87
PCC                                         PCC       0.07225479           86
prevCPR                                 prevCPR       0.17219258           72
PoorPS                                   PoorPS       0.24215830           65
Tracheostomy                       Tracheostomy       0.11968403           77
postICUCPR                           postICUCPR       0.17630585           71
CTxinICU                               CTxinICU       0.07331983           85
WBRT                                       WBRT       0.12122995           76
neurology                             neurology       0.08101154           82
dx_after_adm                       dx_after_adm       0.13105447           74
PrevICUadm                           PrevICUadm       0.07782633           84
Underlying_CV                     Underlying_CV       0.12638122           75
postICURT                             postICURT       0.00563350           88
RRT                                         RRT       0.10260691           80
prev_gks                               prev_gks       0.10704712           79
other_malignancy               other_malignancy       0.15438395           73
Underlying_stroke             Underlying_stroke       0.07894139           83
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          2        1                            1
WBC                          5        2                            3
neutropenia                  6        3                            2
PLT                          9        4                            6
AKI                         12        5                            4
PT_percent                  13        6                            7
bacteremia                  14        7                            5
CRP                         17        8                           12
BUN                         20        9                           13
CRRT                        22       10                            8
thrombocytopenia            25       11                            9
SOFA_D1                     26       12                           15
APACH_II                    28       13                           16
Pneumonia                   33       14                           10
Death_Cause                 34       15                           14
Albumin                     35       16                           20
Cause_Ca_problem            36       17                           17
timefromdx                  36       18                           26
Vasoactiveagent             37       19                           11
hospital_LOS                41       20                           28
age                         44       21                           23
MV_days                     46       22                           22
post_dc_days                46       23                           19
SAPS_II                     48       24                           30
prev_wbrt                   49       25                           18
ICU_cause_intensivist       55       26                           21
post_icu_survival           55       27                           25
HFNC                        65       28                           27
ICU_mortal30                67       29                           24
PaO2FiO2                    71       30                           49
ICUCPR                      73       31                           29
Intensivist                 73       32                           31
procalcitonin               76       33                           47
StageNum                    79       34                           46
pulmocomorbid               81       35                           33
prev_ccrt                   83       36                           37
ICU_LOS                     86       37                           58
post2011                    86       38                           32
histologyNum                87       39                           55
HD                          88       40                           38
BIPAP                       92       41                           43
DischargefromICU            93       42                           41
aPTT                        96       43                           79
Distatntmets                97       44                           52
ICU_Death                   98       45                           36
NewlyDx                     98       46                           45
underlying_pulmo            99       47                           62
cardiovasc                 100       48                           34
hypoalbuminemia            100       49                           60
Hospital_death             103       50                           40
PDT                        103       51                           42
anemia                     104       52                           48
respfailure                104       53                           35
sex                        104       54                           44
MV                         106       55                           39
performance_ICU_DC         109       56                           74
preICUDNR                  110       57                           53
DNR                        111       58                           64
Hb                         112       59                           87
performance_hospital_DC    118       60                           82
Surgery                    118       61                           54
Underlying_DM              120       62                           69
prev_ctx                   121       63                           51
Pre_PS                     125       64                           86
Refractory                 125       65                           70
ICUreadmission             127       66                           59
postICUCtx                 128       67                           50
prev_rtx                   129       68                           88
DNR_at_ICU                 142       69                           83
ILD                        142       70                           61
smk_hx                     142       71                           84
ECMO                       143       72                           56
PCC                        143       73                           57
prevCPR                    143       74                           71
PoorPS                     145       75                           80
Tracheostomy               145       76                           68
postICUCPR                 146       77                           75
CTxinICU                   148       78                           63
WBRT                       148       79                           72
neurology                  149       80                           67
dx_after_adm               150       81                           76
PrevICUadm                 150       82                           66
Underlying_CV              152       83                           77
postICURT                  153       84                           65
RRT                        153       85                           73
prev_gks                   157       86                           78
other_malignancy           158       87                           85
Underlying_stroke          164       88                           81
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  2
WBC                                            2                  5
neutropenia                                    4                  6
PLT                                            3                  9
AKI                                            8                 12
PT_percent                                     6                 13
bacteremia                                     9                 14
CRP                                            5                 17
BUN                                            7                 20
CRRT                                          14                 22
thrombocytopenia                              16                 25
SOFA_D1                                       11                 26
APACH_II                                      12                 28
Pneumonia                                     23                 33
Death_Cause                                   20                 34
Albumin                                       15                 35
Cause_Ca_problem                              19                 36
timefromdx                                    10                 36
Vasoactiveagent                               26                 37
hospital_LOS                                  13                 41
age                                           21                 44
MV_days                                       24                 46
post_dc_days                                  27                 46
SAPS_II                                       18                 48
prev_wbrt                                     31                 49
ICU_cause_intensivist                         34                 55
post_icu_survival                             30                 55
HFNC                                          38                 65
ICU_mortal30                                  43                 67
PaO2FiO2                                      22                 71
ICUCPR                                        44                 73
Intensivist                                   42                 73
procalcitonin                                 29                 76
StageNum                                      33                 79
pulmocomorbid                                 48                 81
prev_ccrt                                     46                 83
ICU_LOS                                       28                 86
post2011                                      54                 86
histologyNum                                  32                 87
HD                                            50                 88
BIPAP                                         49                 92
DischargefromICU                              52                 93
aPTT                                          17                 96
Distatntmets                                  45                 97
ICU_Death                                     62                 98
NewlyDx                                       53                 98
underlying_pulmo                              37                 99
cardiovasc                                    66                100
hypoalbuminemia                               40                100
Hospital_death                                63                103
PDT                                           61                103
anemia                                        56                104
respfailure                                   69                104
sex                                           60                104
MV                                            67                106
performance_ICU_DC                            35                109
preICUDNR                                     57                110
DNR                                           47                111
Hb                                            25                112
performance_hospital_DC                       36                118
Surgery                                       64                118
Underlying_DM                                 51                120
prev_ctx                                      70                121
Pre_PS                                        39                125
Refractory                                    55                125
ICUreadmission                                68                127
postICUCtx                                    78                128
prev_rtx                                      41                129
DNR_at_ICU                                    59                142
ILD                                           81                142
smk_hx                                        58                142
ECMO                                          87                143
PCC                                           86                143
prevCPR                                       72                143
PoorPS                                        65                145
Tracheostomy                                  77                145
postICUCPR                                    71                146
CTxinICU                                      85                148
WBRT                                          76                148
neurology                                     82                149
dx_after_adm                                  74                150
PrevICUadm                                    84                150
Underlying_CV                                 75                152
postICURT                                     88                153
RRT                                           80                153
prev_gks                                      79                157
other_malignancy                              73                158
Underlying_stroke                             83                164
number of selected top features: 6
selected top features: 
[1] "ANC"         "WBC"         "neutropenia" "PLT"         "AKI"        
[6] "PT_percent" 

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.7763249
ROC AUC 		0.7712418

Brier score =  0.170  (best value: 0; worst value: 1)

TOTAL:

 FN =  6  /  9 	 (truth == 1) & (prediction < threshold)
 TP =  3  /  9 	 (truth == 1) & (prediction >= threshold)

 FP =  1  /  17 	 (truth == 0) & (prediction >= threshold)
 TN =  16  /  17 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.362 	 0.462 	 	0.731 	 	0.333 	 	0.941		0.750	 	0.727	 	0.776	0.771

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  3
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.616673e-02           1
WBC                             9.206408e-03           4
AKI                             1.336040e-02           2
BUN                             6.342718e-03           5
PT_percent                      5.938988e-03           6
neutropenia                     9.804668e-03           3
PLT                             5.146363e-03           8
SOFA_D1                         4.190567e-03          13
CRRT                            4.365360e-03          11
APACH_II                        2.775251e-03          15
CRP                             2.049851e-03          18
bacteremia                      5.005956e-03           9
timefromdx                      1.579293e-03          20
Vasoactiveagent                 5.495909e-03           7
hospital_LOS                    1.597908e-03          19
Death_Cause                     4.247550e-03          12
Albumin                         1.414912e-03          21
Pneumonia                       4.818868e-03          10
thrombocytopenia                4.173928e-03          14
SAPS_II                         1.067552e-03          24
Cause_Ca_problem                2.179003e-03          17
age                             9.569398e-04          25
prev_wbrt                       2.471654e-03          16
post_dc_days                    1.206706e-03          23
MV_days                         5.954389e-04          28
post_icu_survival               7.170957e-04          26
ICU_cause_intensivist           1.409381e-03          22
StageNum                        5.837180e-04          30
HFNC                            5.942218e-04          29
prev_ccrt                       6.753629e-04          27
Hb                              1.736658e-04          46
underlying_pulmo                3.680419e-04          34
histologyNum                    2.535476e-04          41
ICU_mortal30                    4.566820e-04          31
pulmocomorbid                   3.754045e-04          33
Underlying_DM                   3.071022e-04          35
Intensivist                     2.583722e-04          40
procalcitonin                   7.258341e-05          56
ICUCPR                          2.947628e-04          37
performance_hospital_DC         1.292927e-04          49
post2011                        2.655944e-04          39
sex                             2.681102e-04          38
HD                              2.464927e-04          42
cardiovasc                      4.160088e-04          32
NewlyDx                         1.773140e-04          44
Hospital_death                  2.960665e-04          36
ICU_LOS                        -9.720384e-06          70
PaO2FiO2                       -9.740158e-05          81
aPTT                           -1.231486e-04          83
hypoalbuminemia                 8.660358e-05          54
anemia                          6.251729e-05          58
preICUDNR                       1.251660e-04          50
prev_ctx                        1.801603e-04          43
ICU_Death                       1.377998e-04          48
smk_hx                          6.667578e-06          66
ICUreadmission                  8.681329e-05          52
MV                              1.763117e-04          45
respfailure                     1.552392e-04          47
BIPAP                           1.053747e-04          51
CTxinICU                        4.792293e-05          60
performance_ICU_DC             -1.136425e-04          82
Distatntmets                   -8.597349e-05          78
Pre_PS                         -1.724900e-04          87
DischargefromICU                1.213882e-05          65
prev_rtx                       -2.874541e-04          88
Surgery                        -1.236285e-05          71
DNR                            -8.147438e-05          77
DNR_at_ICU                     -8.408845e-06          68
ILD                             8.666988e-05          53
postICUCtx                      6.970094e-05          57
RRT                             7.399139e-05          55
PDT                             1.919430e-05          63
PoorPS                         -4.455366e-05          75
Refractory                     -1.560955e-04          86
Tracheostomy                    2.201409e-05          62
PCC                             5.222132e-05          59
prevCPR                        -3.507166e-05          73
Underlying_CV                  -8.868833e-06          69
ECMO                            3.799889e-05          61
postICUCPR                     -9.361386e-05          80
PrevICUadm                      1.542013e-05          64
dx_after_adm                   -5.272964e-05          76
WBRT                           -3.025597e-05          72
postICURT                      -2.173913e-06          67
other_malignancy               -1.261579e-04          84
neurology                      -3.537353e-05          74
prev_gks                       -9.275664e-05          79
Underlying_stroke              -1.449982e-04          85
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC      6.325788798            1
WBC                                         WBC      5.112654588            2
AKI                                         AKI      3.703613715            5
BUN                                         BUN      3.720220529            4
PT_percent                           PT_percent      3.759202960            3
neutropenia                         neutropenia      3.112426478            7
PLT                                         PLT      3.548451000            6
SOFA_D1                                 SOFA_D1      2.496283104           10
CRRT                                       CRRT      1.919098779           14
APACH_II                               APACH_II      2.478428392           11
CRP                                         CRP      2.703367240            9
bacteremia                           bacteremia      1.694993004           19
timefromdx                           timefromdx      3.021622011            8
Vasoactiveagent                 Vasoactiveagent      1.482512583           23
hospital_LOS                       hospital_LOS      2.429641675           12
Death_Cause                         Death_Cause      1.558875692           20
Albumin                                 Albumin      2.260820438           13
Pneumonia                             Pneumonia      1.476949700           24
thrombocytopenia               thrombocytopenia      1.518011199           22
SAPS_II                                 SAPS_II      1.860681410           15
Cause_Ca_problem               Cause_Ca_problem      1.454496553           25
age                                         age      1.698636611           18
prev_wbrt                             prev_wbrt      1.007766071           29
post_dc_days                       post_dc_days      1.450267152           26
MV_days                                 MV_days      1.389273312           27
post_icu_survival             post_icu_survival      0.970187271           30
ICU_cause_intensivist     ICU_cause_intensivist      0.665263489           35
StageNum                               StageNum      0.791299274           33
HFNC                                       HFNC      0.580844934           36
prev_ccrt                             prev_ccrt      0.509845162           39
Hb                                           Hb      1.536183455           21
underlying_pulmo               underlying_pulmo      0.579103640           37
histologyNum                       histologyNum      0.874747929           32
ICU_mortal30                       ICU_mortal30      0.371959979           46
pulmocomorbid                     pulmocomorbid      0.396924324           44
Underlying_DM                     Underlying_DM      0.427539613           42
Intensivist                         Intensivist      0.383078417           45
procalcitonin                     procalcitonin      0.929884707           31
ICUCPR                                   ICUCPR      0.339319238           52
performance_hospital_DC performance_hospital_DC      0.478023925           40
post2011                               post2011      0.340578400           51
sex                                         sex      0.294422773           56
HD                                           HD      0.300513109           54
cardiovasc                           cardiovasc      0.249224217           65
NewlyDx                                 NewlyDx      0.318601523           53
Hospital_death                   Hospital_death      0.262187029           62
ICU_LOS                                 ICU_LOS      1.262933461           28
PaO2FiO2                               PaO2FiO2      1.770772090           17
aPTT                                       aPTT      1.859991746           16
hypoalbuminemia                 hypoalbuminemia      0.351204125           49
anemia                                   anemia      0.361045663           47
preICUDNR                             preICUDNR      0.286618956           58
prev_ctx                               prev_ctx      0.215260391           68
ICU_Death                             ICU_Death      0.237621917           66
smk_hx                                   smk_hx      0.358833417           48
ICUreadmission                   ICUreadmission      0.257156282           63
MV                                           MV      0.188265685           71
respfailure                         respfailure      0.198688507           69
BIPAP                                     BIPAP      0.215450040           67
CTxinICU                               CTxinICU      0.277185900           59
performance_ICU_DC           performance_ICU_DC      0.527091003           38
Distatntmets                       Distatntmets      0.403709684           43
Pre_PS                                   Pre_PS      0.693435485           34
DischargefromICU               DischargefromICU      0.287003069           57
prev_rtx                               prev_rtx      0.457089112           41
Surgery                                 Surgery      0.273527765           60
DNR                                         DNR      0.299779692           55
DNR_at_ICU                           DNR_at_ICU      0.252799156           64
ILD                                         ILD      0.098551926           80
postICUCtx                           postICUCtx      0.127496666           77
RRT                                         RRT      0.114394500           79
PDT                                         PDT      0.161211636           73
PoorPS                                   PoorPS      0.273414699           61
Refractory                           Refractory      0.340738659           50
Tracheostomy                       Tracheostomy      0.132229751           76
PCC                                         PCC      0.079574600           84
prevCPR                                 prevCPR      0.177429670           72
Underlying_CV                     Underlying_CV      0.121433702           78
ECMO                                       ECMO      0.040294131           87
postICUCPR                           postICUCPR      0.189964655           70
PrevICUadm                           PrevICUadm      0.044584782           86
dx_after_adm                       dx_after_adm      0.154052604           75
WBRT                                       WBRT      0.086004251           82
postICURT                             postICURT      0.005990013           88
other_malignancy               other_malignancy      0.154526557           74
neurology                             neurology      0.066509981           85
prev_gks                               prev_gks      0.092448650           81
Underlying_stroke             Underlying_stroke      0.082534107           83
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          2        1                            1
WBC                          6        2                            4
AKI                          7        3                            2
BUN                          9        4                            5
PT_percent                   9        5                            6
neutropenia                 10        6                            3
PLT                         14        7                            8
SOFA_D1                     23        8                           13
CRRT                        25        9                           11
APACH_II                    26       10                           15
CRP                         27       11                           18
bacteremia                  28       12                            9
timefromdx                  28       13                           20
Vasoactiveagent             30       14                            7
hospital_LOS                31       15                           19
Death_Cause                 32       16                           12
Albumin                     34       17                           21
Pneumonia                   34       18                           10
thrombocytopenia            36       19                           14
SAPS_II                     39       20                           24
Cause_Ca_problem            42       21                           17
age                         43       22                           25
prev_wbrt                   45       23                           16
post_dc_days                49       24                           23
MV_days                     55       25                           28
post_icu_survival           56       26                           26
ICU_cause_intensivist       57       27                           22
StageNum                    63       28                           30
HFNC                        65       29                           29
prev_ccrt                   66       30                           27
Hb                          67       31                           46
underlying_pulmo            71       32                           34
histologyNum                73       33                           41
ICU_mortal30                77       34                           31
pulmocomorbid               77       35                           33
Underlying_DM               77       36                           35
Intensivist                 85       37                           40
procalcitonin               87       38                           56
ICUCPR                      89       39                           37
performance_hospital_DC     89       40                           49
post2011                    90       41                           39
sex                         94       42                           38
HD                          96       43                           42
cardiovasc                  97       44                           32
NewlyDx                     97       45                           44
Hospital_death              98       46                           36
ICU_LOS                     98       47                           70
PaO2FiO2                    98       48                           81
aPTT                        99       49                           83
hypoalbuminemia            103       50                           54
anemia                     105       51                           58
preICUDNR                  108       52                           50
prev_ctx                   111       53                           43
ICU_Death                  114       54                           48
smk_hx                     114       55                           66
ICUreadmission             115       56                           52
MV                         116       57                           45
respfailure                116       58                           47
BIPAP                      118       59                           51
CTxinICU                   119       60                           60
performance_ICU_DC         120       61                           82
Distatntmets               121       62                           78
Pre_PS                     121       63                           87
DischargefromICU           122       64                           65
prev_rtx                   129       65                           88
Surgery                    131       66                           71
DNR                        132       67                           77
DNR_at_ICU                 132       68                           68
ILD                        133       69                           53
postICUCtx                 134       70                           57
RRT                        134       71                           55
PDT                        136       72                           63
PoorPS                     136       73                           75
Refractory                 136       74                           86
Tracheostomy               138       75                           62
PCC                        143       76                           59
prevCPR                    145       77                           73
Underlying_CV              147       78                           69
ECMO                       148       79                           61
postICUCPR                 150       80                           80
PrevICUadm                 150       81                           64
dx_after_adm               151       82                           76
WBRT                       154       83                           72
postICURT                  155       84                           67
other_malignancy           158       85                           84
neurology                  159       86                           74
prev_gks                   160       87                           79
Underlying_stroke          168       88                           85
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  2
WBC                                            2                  6
AKI                                            5                  7
BUN                                            4                  9
PT_percent                                     3                  9
neutropenia                                    7                 10
PLT                                            6                 14
SOFA_D1                                       10                 23
CRRT                                          14                 25
APACH_II                                      11                 26
CRP                                            9                 27
bacteremia                                    19                 28
timefromdx                                     8                 28
Vasoactiveagent                               23                 30
hospital_LOS                                  12                 31
Death_Cause                                   20                 32
Albumin                                       13                 34
Pneumonia                                     24                 34
thrombocytopenia                              22                 36
SAPS_II                                       15                 39
Cause_Ca_problem                              25                 42
age                                           18                 43
prev_wbrt                                     29                 45
post_dc_days                                  26                 49
MV_days                                       27                 55
post_icu_survival                             30                 56
ICU_cause_intensivist                         35                 57
StageNum                                      33                 63
HFNC                                          36                 65
prev_ccrt                                     39                 66
Hb                                            21                 67
underlying_pulmo                              37                 71
histologyNum                                  32                 73
ICU_mortal30                                  46                 77
pulmocomorbid                                 44                 77
Underlying_DM                                 42                 77
Intensivist                                   45                 85
procalcitonin                                 31                 87
ICUCPR                                        52                 89
performance_hospital_DC                       40                 89
post2011                                      51                 90
sex                                           56                 94
HD                                            54                 96
cardiovasc                                    65                 97
NewlyDx                                       53                 97
Hospital_death                                62                 98
ICU_LOS                                       28                 98
PaO2FiO2                                      17                 98
aPTT                                          16                 99
hypoalbuminemia                               49                103
anemia                                        47                105
preICUDNR                                     58                108
prev_ctx                                      68                111
ICU_Death                                     66                114
smk_hx                                        48                114
ICUreadmission                                63                115
MV                                            71                116
respfailure                                   69                116
BIPAP                                         67                118
CTxinICU                                      59                119
performance_ICU_DC                            38                120
Distatntmets                                  43                121
Pre_PS                                        34                121
DischargefromICU                              57                122
prev_rtx                                      41                129
Surgery                                       60                131
DNR                                           55                132
DNR_at_ICU                                    64                132
ILD                                           80                133
postICUCtx                                    77                134
RRT                                           79                134
PDT                                           73                136
PoorPS                                        61                136
Refractory                                    50                136
Tracheostomy                                  76                138
PCC                                           84                143
prevCPR                                       72                145
Underlying_CV                                 78                147
ECMO                                          87                148
postICUCPR                                    70                150
PrevICUadm                                    86                150
dx_after_adm                                  75                151
WBRT                                          82                154
postICURT                                     88                155
other_malignancy                              74                158
neurology                                     85                159
prev_gks                                      81                160
Underlying_stroke                             83                168
number of selected top features: 6
selected top features: 
[1] "ANC"         "WBC"         "AKI"         "BUN"         "PT_percent" 
[6] "neutropenia"

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.8067423
ROC AUC 		0.846875

Brier score =  0.173  (best value: 0; worst value: 1)

TOTAL:

 FN =  5  /  10 	 (truth == 1) & (prediction < threshold)
 TP =  5  /  10 	 (truth == 1) & (prediction >= threshold)

 FP =  1  /  16 	 (truth == 0) & (prediction >= threshold)
 TN =  15  /  16 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.505 	 0.625 	 	0.769 	 	0.500 	 	0.938		0.833	 	0.750	 	0.807	0.847

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  4
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.531173e-02           1
AKI                             1.494394e-02           2
WBC                             1.008585e-02           4
neutropenia                     1.183748e-02           3
PT_percent                      7.749901e-03           6
BUN                             5.220577e-03           8
bacteremia                      8.196659e-03           5
PLT                             4.743008e-03          11
SOFA_D1                         5.041362e-03           9
APACH_II                        4.413726e-03          13
CRP                             3.242366e-03          16
Vasoactiveagent                 7.205534e-03           7
CRRT                            4.785529e-03          10
Death_Cause                     4.304936e-03          14
timefromdx                      1.452483e-03          21
hospital_LOS                    1.353836e-03          22
Pneumonia                       4.489916e-03          12
Cause_Ca_problem                2.831220e-03          17
prev_wbrt                       3.740590e-03          15
SAPS_II                         7.526391e-04          25
Albumin                         5.593331e-04          28
aPTT                            4.965901e-04          29
post_dc_days                    1.591350e-03          20
thrombocytopenia                2.809727e-03          18
age                             4.754827e-04          30
ICU_cause_intensivist           1.619335e-03          19
MV_days                         4.659924e-04          31
post_icu_survival               5.879960e-04          27
HFNC                            9.465004e-04          23
prev_ccrt                       8.511757e-04          24
ICU_mortal30                    7.093246e-04          26
histologyNum                    2.901584e-04          38
Underlying_DM                   4.514000e-04          32
StageNum                        1.939198e-04          43
prev_rtx                        1.507199e-04          46
underlying_pulmo                2.574679e-04          40
ICUCPR                          3.324800e-04          35
Intensivist                     2.769114e-04          39
pulmocomorbid                   2.041242e-04          42
sex                             2.948466e-04          37
DischargefromICU                3.203864e-04          36
Hospital_death                  4.142360e-04          33
Distatntmets                    1.319334e-04          49
NewlyDx                         1.764917e-04          44
post2011                        2.413904e-04          41
cardiovasc                      3.915407e-04          34
preICUDNR                       1.514862e-04          45
DNR                             6.919555e-05          54
hypoalbuminemia                 6.602254e-05          56
ICU_Death                       1.391229e-04          48
smk_hx                          2.238378e-05          60
Hb                             -1.507425e-04          83
procalcitonin                  -8.954481e-05          77
anemia                          1.398685e-04          47
PaO2FiO2                       -4.722644e-04          88
CTxinICU                        9.751581e-05          51
ICU_LOS                        -1.841924e-04          86
respfailure                     1.186215e-04          50
Surgery                         6.464961e-05          57
Pre_PS                         -1.562833e-04          85
MV                              6.824339e-05          55
performance_hospital_DC        -1.303711e-04          81
performance_ICU_DC             -3.492105e-04          87
Refractory                     -4.784892e-06          66
ILD                             7.708606e-05          53
prev_ctx                       -2.264553e-06          65
ICUreadmission                 -3.409090e-05          70
HD                             -1.086999e-05          67
PCC                             9.084451e-05          52
PoorPS                         -1.377488e-04          82
postICUCtx                      2.679944e-05          58
Tracheostomy                    2.210612e-05          61
DNR_at_ICU                     -1.557788e-04          84
WBRT                           -1.183574e-06          63
dx_after_adm                   -2.382580e-05          68
BIPAP                          -5.580384e-05          73
ECMO                            2.337333e-05          59
prevCPR                        -5.529882e-05          72
PrevICUadm                      1.142584e-05          62
PDT                            -1.014686e-04          79
postICUCPR                     -9.258157e-05          78
RRT                            -5.707945e-05          74
postICURT                      -2.247191e-06          64
other_malignancy               -1.236416e-04          80
Underlying_stroke              -4.601775e-05          71
neurology                      -2.570899e-05          69
Underlying_CV                  -7.309752e-05          75
prev_gks                       -7.797277e-05          76
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC      6.296860674            1
AKI                                         AKI      4.069510979            4
WBC                                         WBC      5.290787072            2
neutropenia                         neutropenia      3.735355868            5
PT_percent                           PT_percent      4.201668635            3
BUN                                         BUN      3.633916435            6
bacteremia                           bacteremia      2.406191451           13
PLT                                         PLT      3.550553299            7
SOFA_D1                                 SOFA_D1      2.716762955            9
APACH_II                               APACH_II      2.657103179           10
CRP                                         CRP      3.058346522            8
Vasoactiveagent                 Vasoactiveagent      1.837822762           19
CRRT                                       CRRT      1.800790768           20
Death_Cause                         Death_Cause      1.851738167           16
timefromdx                           timefromdx      2.556605999           11
hospital_LOS                       hospital_LOS      2.515686594           12
Pneumonia                             Pneumonia      1.353689066           26
Cause_Ca_problem               Cause_Ca_problem      1.674240625           22
prev_wbrt                             prev_wbrt      1.351557238           27
SAPS_II                                 SAPS_II      1.847456944           17
Albumin                                 Albumin      1.983816580           15
aPTT                                       aPTT      2.082769943           14
post_dc_days                       post_dc_days      1.515044114           23
thrombocytopenia               thrombocytopenia      1.161381555           29
age                                         age      1.841497181           18
ICU_cause_intensivist     ICU_cause_intensivist      0.792803244           33
MV_days                                 MV_days      1.359807737           25
post_icu_survival             post_icu_survival      0.906888068           31
HFNC                                       HFNC      0.629266494           36
prev_ccrt                             prev_ccrt      0.592021677           38
ICU_mortal30                       ICU_mortal30      0.415008339           43
histologyNum                       histologyNum      0.864712727           32
Underlying_DM                     Underlying_DM      0.533615969           40
StageNum                               StageNum      0.613839964           37
prev_rtx                               prev_rtx      0.673925464           35
underlying_pulmo               underlying_pulmo      0.499892405           41
ICUCPR                                   ICUCPR      0.345995689           48
Intensivist                         Intensivist      0.375754820           45
pulmocomorbid                     pulmocomorbid      0.382846090           44
sex                                         sex      0.336125865           50
DischargefromICU               DischargefromICU      0.293598925           54
Hospital_death                   Hospital_death      0.256592846           59
Distatntmets                       Distatntmets      0.355961571           47
NewlyDx                                 NewlyDx      0.301117590           52
post2011                               post2011      0.284997454           55
cardiovasc                           cardiovasc      0.217475247           64
preICUDNR                             preICUDNR      0.296774731           53
DNR                                         DNR      0.305573776           51
hypoalbuminemia                 hypoalbuminemia      0.341737683           49
ICU_Death                             ICU_Death      0.267057039           58
smk_hx                                   smk_hx      0.363181165           46
Hb                                           Hb      1.430657752           24
procalcitonin                     procalcitonin      0.937536472           30
anemia                                   anemia      0.245878553           62
PaO2FiO2                               PaO2FiO2      1.701053473           21
CTxinICU                               CTxinICU      0.246305031           61
ICU_LOS                                 ICU_LOS      1.219635167           28
respfailure                         respfailure      0.212715034           66
Surgery                                 Surgery      0.251081428           60
Pre_PS                                   Pre_PS      0.693082469           34
MV                                           MV      0.194442507           68
performance_hospital_DC performance_hospital_DC      0.485809264           42
performance_ICU_DC           performance_ICU_DC      0.570681292           39
Refractory                           Refractory      0.242695390           63
ILD                                         ILD      0.124750121           77
prev_ctx                               prev_ctx      0.203063224           67
ICUreadmission                   ICUreadmission      0.214435186           65
HD                                           HD      0.179795886           70
PCC                                         PCC      0.072332012           85
PoorPS                                   PoorPS      0.270031574           57
postICUCtx                           postICUCtx      0.105532152           81
Tracheostomy                       Tracheostomy      0.122351468           78
DNR_at_ICU                           DNR_at_ICU      0.275593325           56
WBRT                                       WBRT      0.115790241           79
dx_after_adm                       dx_after_adm      0.132872298           75
BIPAP                                     BIPAP      0.170308198           72
ECMO                                       ECMO      0.032075757           87
prevCPR                                 prevCPR      0.151318878           74
PrevICUadm                           PrevICUadm      0.075626017           84
PDT                                         PDT      0.192910702           69
postICUCPR                           postICUCPR      0.176217885           71
RRT                                         RRT      0.131469797           76
postICURT                             postICURT      0.004547394           88
other_malignancy               other_malignancy      0.164774206           73
Underlying_stroke             Underlying_stroke      0.087219941           83
neurology                             neurology      0.057200031           86
Underlying_CV                     Underlying_CV      0.109791586           80
prev_gks                               prev_gks      0.095615924           82
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          2        1                            1
AKI                          6        2                            2
WBC                          6        3                            4
neutropenia                  8        4                            3
PT_percent                   9        5                            6
BUN                         14        6                            8
bacteremia                  18        7                            5
PLT                         18        8                           11
SOFA_D1                     18        9                            9
APACH_II                    23       10                           13
CRP                         24       11                           16
Vasoactiveagent             26       12                            7
CRRT                        30       13                           10
Death_Cause                 30       14                           14
timefromdx                  32       15                           21
hospital_LOS                34       16                           22
Pneumonia                   38       17                           12
Cause_Ca_problem            39       18                           17
prev_wbrt                   42       19                           15
SAPS_II                     42       20                           25
Albumin                     43       21                           28
aPTT                        43       22                           29
post_dc_days                43       23                           20
thrombocytopenia            47       24                           18
age                         48       25                           30
ICU_cause_intensivist       52       26                           19
MV_days                     56       27                           31
post_icu_survival           58       28                           27
HFNC                        59       29                           23
prev_ccrt                   62       30                           24
ICU_mortal30                69       31                           26
histologyNum                70       32                           38
Underlying_DM               72       33                           32
StageNum                    80       34                           43
prev_rtx                    81       35                           46
underlying_pulmo            81       36                           40
ICUCPR                      83       37                           35
Intensivist                 84       38                           39
pulmocomorbid               86       39                           42
sex                         87       40                           37
DischargefromICU            90       41                           36
Hospital_death              92       42                           33
Distatntmets                96       43                           49
NewlyDx                     96       44                           44
post2011                    96       45                           41
cardiovasc                  98       46                           34
preICUDNR                   98       47                           45
DNR                        105       48                           54
hypoalbuminemia            105       49                           56
ICU_Death                  106       50                           48
smk_hx                     106       51                           60
Hb                         107       52                           83
procalcitonin              107       53                           77
anemia                     109       54                           47
PaO2FiO2                   109       55                           88
CTxinICU                   112       56                           51
ICU_LOS                    114       57                           86
respfailure                116       58                           50
Surgery                    117       59                           57
Pre_PS                     119       60                           85
MV                         123       61                           55
performance_hospital_DC    123       62                           81
performance_ICU_DC         126       63                           87
Refractory                 129       64                           66
ILD                        130       65                           53
prev_ctx                   132       66                           65
ICUreadmission             135       67                           70
HD                         137       68                           67
PCC                        137       69                           52
PoorPS                     139       70                           82
postICUCtx                 139       71                           58
Tracheostomy               139       72                           61
DNR_at_ICU                 140       73                           84
WBRT                       142       74                           63
dx_after_adm               143       75                           68
BIPAP                      145       76                           73
ECMO                       146       77                           59
prevCPR                    146       78                           72
PrevICUadm                 146       79                           62
PDT                        148       80                           79
postICUCPR                 149       81                           78
RRT                        150       82                           74
postICURT                  152       83                           64
other_malignancy           153       84                           80
Underlying_stroke          154       85                           71
neurology                  155       86                           69
Underlying_CV              155       87                           75
prev_gks                   158       88                           76
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  2
AKI                                            4                  6
WBC                                            2                  6
neutropenia                                    5                  8
PT_percent                                     3                  9
BUN                                            6                 14
bacteremia                                    13                 18
PLT                                            7                 18
SOFA_D1                                        9                 18
APACH_II                                      10                 23
CRP                                            8                 24
Vasoactiveagent                               19                 26
CRRT                                          20                 30
Death_Cause                                   16                 30
timefromdx                                    11                 32
hospital_LOS                                  12                 34
Pneumonia                                     26                 38
Cause_Ca_problem                              22                 39
prev_wbrt                                     27                 42
SAPS_II                                       17                 42
Albumin                                       15                 43
aPTT                                          14                 43
post_dc_days                                  23                 43
thrombocytopenia                              29                 47
age                                           18                 48
ICU_cause_intensivist                         33                 52
MV_days                                       25                 56
post_icu_survival                             31                 58
HFNC                                          36                 59
prev_ccrt                                     38                 62
ICU_mortal30                                  43                 69
histologyNum                                  32                 70
Underlying_DM                                 40                 72
StageNum                                      37                 80
prev_rtx                                      35                 81
underlying_pulmo                              41                 81
ICUCPR                                        48                 83
Intensivist                                   45                 84
pulmocomorbid                                 44                 86
sex                                           50                 87
DischargefromICU                              54                 90
Hospital_death                                59                 92
Distatntmets                                  47                 96
NewlyDx                                       52                 96
post2011                                      55                 96
cardiovasc                                    64                 98
preICUDNR                                     53                 98
DNR                                           51                105
hypoalbuminemia                               49                105
ICU_Death                                     58                106
smk_hx                                        46                106
Hb                                            24                107
procalcitonin                                 30                107
anemia                                        62                109
PaO2FiO2                                      21                109
CTxinICU                                      61                112
ICU_LOS                                       28                114
respfailure                                   66                116
Surgery                                       60                117
Pre_PS                                        34                119
MV                                            68                123
performance_hospital_DC                       42                123
performance_ICU_DC                            39                126
Refractory                                    63                129
ILD                                           77                130
prev_ctx                                      67                132
ICUreadmission                                65                135
HD                                            70                137
PCC                                           85                137
PoorPS                                        57                139
postICUCtx                                    81                139
Tracheostomy                                  78                139
DNR_at_ICU                                    56                140
WBRT                                          79                142
dx_after_adm                                  75                143
BIPAP                                         72                145
ECMO                                          87                146
prevCPR                                       74                146
PrevICUadm                                    84                146
PDT                                           69                148
postICUCPR                                    71                149
RRT                                           76                150
postICURT                                     88                152
other_malignancy                              73                153
Underlying_stroke                             83                154
neurology                                     86                155
Underlying_CV                                 80                155
prev_gks                                      82                158
number of selected top features: 6
selected top features: 
[1] "ANC"         "AKI"         "WBC"         "neutropenia" "PT_percent" 
[6] "BUN"        

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.6275834
ROC AUC 		0.7518797

Brier score =  0.170  (best value: 0; worst value: 1)

TOTAL:

 FN =  5  /  7 	 (truth == 1) & (prediction < threshold)
 TP =  2  /  7 	 (truth == 1) & (prediction >= threshold)

 FP =  1  /  19 	 (truth == 0) & (prediction >= threshold)
 TN =  18  /  19 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.324 	 0.400 	 	0.769 	 	0.286 	 	0.947		0.667	 	0.783	 	0.628	0.752

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  5
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
AKI                             1.622154e-02           1
ANC                             1.371408e-02           2
WBC                             8.072147e-03           4
neutropenia                     9.611973e-03           3
BUN                             5.352216e-03           9
SOFA_D1                         6.755189e-03           5
PT_percent                      5.681979e-03           8
PLT                             4.841704e-03          11
CRP                             4.671580e-03          13
Death_Cause                     6.353412e-03           6
APACH_II                        3.523389e-03          14
bacteremia                      5.923132e-03           7
CRRT                            4.690103e-03          12
Albumin                         1.781013e-03          19
hospital_LOS                    1.350997e-03          21
Vasoactiveagent                 5.164224e-03          10
SAPS_II                         1.697786e-03          20
Cause_Ca_problem                3.292125e-03          15
timefromdx                      6.327549e-04          26
age                             1.045967e-03          23
Pneumonia                       3.202301e-03          16
post_dc_days                    1.279151e-03          22
prev_wbrt                       2.555536e-03          18
thrombocytopenia                2.632085e-03          17
PaO2FiO2                        5.008567e-04          30
MV_days                         5.895120e-04          27
post_icu_survival               1.030547e-03          24
ICU_cause_intensivist           7.453134e-04          25
HFNC                            4.593096e-04          31
NewlyDx                         5.678160e-04          29
StageNum                        2.592541e-04          38
ICU_mortal30                    5.855462e-04          28
underlying_pulmo                3.114754e-04          36
aPTT                            2.707626e-05          60
Underlying_DM                   3.123906e-04          35
pulmocomorbid                   2.813471e-04          37
post2011                        3.421488e-04          33
ICU_LOS                         6.647733e-05          57
performance_ICU_DC              9.894245e-05          51
prev_ccrt                       2.450768e-04          39
Intensivist                     2.072732e-04          42
Distatntmets                    1.710364e-04          45
ICU_Death                       3.282493e-04          34
cardiovasc                      4.339577e-04          32
ICUCPR                          1.909405e-04          43
DischargefromICU                1.307573e-04          48
DNR                             8.150568e-05          54
Hospital_death                  2.102096e-04          41
performance_hospital_DC        -1.263426e-05          65
anemia                          9.966055e-05          50
CTxinICU                        1.146727e-04          49
Hb                             -2.627576e-04          86
preICUDNR                       9.354315e-05          52
procalcitonin                  -1.122314e-04          80
RRT                             2.131727e-04          40
MV                              1.309632e-04          46
respfailure                     1.721673e-04          44
hypoalbuminemia                 1.414735e-05          62
smk_hx                          2.190635e-05          61
histologyNum                   -2.462975e-04          85
sex                             7.045997e-05          56
Pre_PS                         -2.707895e-04          88
ILD                             1.308452e-04          47
prev_rtx                       -2.646182e-04          87
Refractory                     -4.496956e-05          74
prev_ctx                        7.156511e-05          55
postICUCtx                      8.911209e-05          53
HD                             -1.322564e-05          66
DNR_at_ICU                     -2.124333e-04          84
PoorPS                         -1.221888e-04          81
Surgery                        -5.132767e-05          75
ICUreadmission                 -1.657209e-05          68
PCC                             4.671537e-05          58
prevCPR                        -1.488825e-05          67
PrevICUadm                      1.358468e-05          63
ECMO                            2.934480e-05          59
BIPAP                          -8.626041e-05          79
PDT                            -1.500145e-04          82
dx_after_adm                   -4.022780e-05          73
postICUCPR                     -6.193920e-05          77
postICURT                       0.000000e+00          64
WBRT                           -3.755050e-05          72
Underlying_stroke              -2.579030e-05          70
prev_gks                       -2.256355e-05          69
neurology                      -3.182013e-05          71
Underlying_CV                  -6.240932e-05          78
Tracheostomy                   -5.366909e-05          76
other_malignancy               -1.880569e-04          83
                                       features MeanDecreaseGini secondColPos
AKI                                         AKI      4.761834181            2
ANC                                         ANC      5.955842028            1
WBC                                         WBC      4.718771171            3
neutropenia                         neutropenia      3.240180445            8
BUN                                         BUN      3.789382090            4
SOFA_D1                                 SOFA_D1      3.006556737            9
PT_percent                           PT_percent      3.265304096            7
PLT                                         PLT      3.316909539            6
CRP                                         CRP      3.720806001            5
Death_Cause                         Death_Cause      2.219334428           14
APACH_II                               APACH_II      2.805200537           10
bacteremia                           bacteremia      1.834664918           18
CRRT                                       CRRT      1.892639692           17
Albumin                                 Albumin      2.354349436           13
hospital_LOS                       hospital_LOS      2.458179391           11
Vasoactiveagent                 Vasoactiveagent      1.399914130           22
SAPS_II                                 SAPS_II      2.101830289           15
Cause_Ca_problem               Cause_Ca_problem      1.642830785           21
timefromdx                           timefromdx      2.432437632           12
age                                         age      1.785125903           19
Pneumonia                             Pneumonia      1.061406603           27
post_dc_days                       post_dc_days      1.396054816           23
prev_wbrt                             prev_wbrt      1.044563294           29
thrombocytopenia               thrombocytopenia      1.031926110           30
PaO2FiO2                               PaO2FiO2      1.756654463           20
MV_days                                 MV_days      1.381794041           25
post_icu_survival             post_icu_survival      1.046552594           28
ICU_cause_intensivist     ICU_cause_intensivist      0.595624966           36
HFNC                                       HFNC      0.530601992           39
NewlyDx                                 NewlyDx      0.422500071           43
StageNum                               StageNum      0.638047393           34
ICU_mortal30                       ICU_mortal30      0.382986348           46
underlying_pulmo               underlying_pulmo      0.539772102           38
aPTT                                       aPTT      1.921339947           16
Underlying_DM                     Underlying_DM      0.447867122           41
pulmocomorbid                     pulmocomorbid      0.434751886           42
post2011                               post2011      0.322218631           48
ICU_LOS                                 ICU_LOS      1.249931447           26
performance_ICU_DC           performance_ICU_DC      0.632884162           35
prev_ccrt                             prev_ccrt      0.381255486           47
Intensivist                         Intensivist      0.384460884           45
Distatntmets                       Distatntmets      0.404202724           44
ICU_Death                             ICU_Death      0.284364014           57
cardiovasc                           cardiovasc      0.239545550           64
ICUCPR                                   ICUCPR      0.298609431           54
DischargefromICU               DischargefromICU      0.314450160           50
DNR                                         DNR      0.314504424           49
Hospital_death                   Hospital_death      0.249520290           63
performance_hospital_DC performance_hospital_DC      0.520613009           40
anemia                                   anemia      0.277906357           59
CTxinICU                               CTxinICU      0.277148906           60
Hb                                           Hb      1.382675991           24
preICUDNR                             preICUDNR      0.281770042           58
procalcitonin                     procalcitonin      0.918026253           31
RRT                                         RRT      0.182482924           71
MV                                           MV      0.214122643           66
respfailure                         respfailure      0.189321042           69
hypoalbuminemia                 hypoalbuminemia      0.299178675           53
smk_hx                                   smk_hx      0.293733778           55
histologyNum                       histologyNum      0.791804582           32
sex                                         sex      0.267408303           61
Pre_PS                                   Pre_PS      0.769157201           33
ILD                                         ILD      0.146364234           76
prev_rtx                               prev_rtx      0.592832083           37
Refractory                           Refractory      0.299833422           52
prev_ctx                               prev_ctx      0.178964951           72
postICUCtx                           postICUCtx      0.138650196           77
HD                                           HD      0.209152663           67
DNR_at_ICU                           DNR_at_ICU      0.312525477           51
PoorPS                                   PoorPS      0.293393084           56
Surgery                                 Surgery      0.259975194           62
ICUreadmission                   ICUreadmission      0.189101141           70
PCC                                         PCC      0.075511078           83
prevCPR                                 prevCPR      0.163777835           74
PrevICUadm                           PrevICUadm      0.075902717           82
ECMO                                       ECMO      0.036736286           87
BIPAP                                     BIPAP      0.197241233           68
PDT                                         PDT      0.233124132           65
dx_after_adm                       dx_after_adm      0.158558246           75
postICUCPR                           postICUCPR      0.165869612           73
postICURT                             postICURT      0.008462052           88
WBRT                                       WBRT      0.105010887           80
Underlying_stroke             Underlying_stroke      0.068736730           84
prev_gks                               prev_gks      0.048466104           86
neurology                             neurology      0.051795820           85
Underlying_CV                     Underlying_CV      0.129759088           78
Tracheostomy                       Tracheostomy      0.082839666           81
other_malignancy               other_malignancy      0.127873357           79
                        posSum finalPos meanDecreaseAccuracyPosition
AKI                          3        1                            1
ANC                          3        2                            2
WBC                          7        3                            4
neutropenia                 11        4                            3
BUN                         13        5                            9
SOFA_D1                     14        6                            5
PT_percent                  15        7                            8
PLT                         17        8                           11
CRP                         18        9                           13
Death_Cause                 20       10                            6
APACH_II                    24       11                           14
bacteremia                  25       12                            7
CRRT                        29       13                           12
Albumin                     32       14                           19
hospital_LOS                32       15                           21
Vasoactiveagent             32       16                           10
SAPS_II                     35       17                           20
Cause_Ca_problem            36       18                           15
timefromdx                  38       19                           26
age                         42       20                           23
Pneumonia                   43       21                           16
post_dc_days                45       22                           22
prev_wbrt                   47       23                           18
thrombocytopenia            47       24                           17
PaO2FiO2                    50       25                           30
MV_days                     52       26                           27
post_icu_survival           52       27                           24
ICU_cause_intensivist       61       28                           25
HFNC                        70       29                           31
NewlyDx                     72       30                           29
StageNum                    72       31                           38
ICU_mortal30                74       32                           28
underlying_pulmo            74       33                           36
aPTT                        76       34                           60
Underlying_DM               76       35                           35
pulmocomorbid               79       36                           37
post2011                    81       37                           33
ICU_LOS                     83       38                           57
performance_ICU_DC          86       39                           51
prev_ccrt                   86       40                           39
Intensivist                 87       41                           42
Distatntmets                89       42                           45
ICU_Death                   91       43                           34
cardiovasc                  96       44                           32
ICUCPR                      97       45                           43
DischargefromICU            98       46                           48
DNR                        103       47                           54
Hospital_death             104       48                           41
performance_hospital_DC    105       49                           65
anemia                     109       50                           50
CTxinICU                   109       51                           49
Hb                         110       52                           86
preICUDNR                  110       53                           52
procalcitonin              111       54                           80
RRT                        111       55                           40
MV                         112       56                           46
respfailure                113       57                           44
hypoalbuminemia            115       58                           62
smk_hx                     116       59                           61
histologyNum               117       60                           85
sex                        117       61                           56
Pre_PS                     121       62                           88
ILD                        123       63                           47
prev_rtx                   124       64                           87
Refractory                 126       65                           74
prev_ctx                   127       66                           55
postICUCtx                 130       67                           53
HD                         133       68                           66
DNR_at_ICU                 135       69                           84
PoorPS                     137       70                           81
Surgery                    137       71                           75
ICUreadmission             138       72                           68
PCC                        141       73                           58
prevCPR                    141       74                           67
PrevICUadm                 145       75                           63
ECMO                       146       76                           59
BIPAP                      147       77                           79
PDT                        147       78                           82
dx_after_adm               148       79                           73
postICUCPR                 150       80                           77
postICURT                  152       81                           64
WBRT                       152       82                           72
Underlying_stroke          154       83                           70
prev_gks                   155       84                           69
neurology                  156       85                           71
Underlying_CV              156       86                           78
Tracheostomy               157       87                           76
other_malignancy           162       88                           83
                        meanDecreaseGiniPosition aggregatedPosition
AKI                                            2                  3
ANC                                            1                  3
WBC                                            3                  7
neutropenia                                    8                 11
BUN                                            4                 13
SOFA_D1                                        9                 14
PT_percent                                     7                 15
PLT                                            6                 17
CRP                                            5                 18
Death_Cause                                   14                 20
APACH_II                                      10                 24
bacteremia                                    18                 25
CRRT                                          17                 29
Albumin                                       13                 32
hospital_LOS                                  11                 32
Vasoactiveagent                               22                 32
SAPS_II                                       15                 35
Cause_Ca_problem                              21                 36
timefromdx                                    12                 38
age                                           19                 42
Pneumonia                                     27                 43
post_dc_days                                  23                 45
prev_wbrt                                     29                 47
thrombocytopenia                              30                 47
PaO2FiO2                                      20                 50
MV_days                                       25                 52
post_icu_survival                             28                 52
ICU_cause_intensivist                         36                 61
HFNC                                          39                 70
NewlyDx                                       43                 72
StageNum                                      34                 72
ICU_mortal30                                  46                 74
underlying_pulmo                              38                 74
aPTT                                          16                 76
Underlying_DM                                 41                 76
pulmocomorbid                                 42                 79
post2011                                      48                 81
ICU_LOS                                       26                 83
performance_ICU_DC                            35                 86
prev_ccrt                                     47                 86
Intensivist                                   45                 87
Distatntmets                                  44                 89
ICU_Death                                     57                 91
cardiovasc                                    64                 96
ICUCPR                                        54                 97
DischargefromICU                              50                 98
DNR                                           49                103
Hospital_death                                63                104
performance_hospital_DC                       40                105
anemia                                        59                109
CTxinICU                                      60                109
Hb                                            24                110
preICUDNR                                     58                110
procalcitonin                                 31                111
RRT                                           71                111
MV                                            66                112
respfailure                                   69                113
hypoalbuminemia                               53                115
smk_hx                                        55                116
histologyNum                                  32                117
sex                                           61                117
Pre_PS                                        33                121
ILD                                           76                123
prev_rtx                                      37                124
Refractory                                    52                126
prev_ctx                                      72                127
postICUCtx                                    77                130
HD                                            67                133
DNR_at_ICU                                    51                135
PoorPS                                        56                137
Surgery                                       62                137
ICUreadmission                                70                138
PCC                                           83                141
prevCPR                                       74                141
PrevICUadm                                    82                145
ECMO                                          87                146
BIPAP                                         68                147
PDT                                           65                147
dx_after_adm                                  75                148
postICUCPR                                    73                150
postICURT                                     88                152
WBRT                                          80                152
Underlying_stroke                             84                154
prev_gks                                      86                155
neurology                                     85                156
Underlying_CV                                 78                156
Tracheostomy                                  81                157
other_malignancy                              79                162
number of selected top features: 6
selected top features: 
[1] "AKI"         "ANC"         "WBC"         "neutropenia" "BUN"        
[6] "SOFA_D1"    

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.6523022
ROC AUC 		0.7254902

Brier score =  0.179  (best value: 0; worst value: 1)

TOTAL:

 FN =  4  /  9 	 (truth == 1) & (prediction < threshold)
 TP =  5  /  9 	 (truth == 1) & (prediction >= threshold)

 FP =  2  /  17 	 (truth == 0) & (prediction >= threshold)
 TN =  15  /  17 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.470 	 0.625 	 	0.769 	 	0.556 	 	0.882		0.714	 	0.789	 	0.652	0.725

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  6
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.197083e-02           2
AKI                             1.474599e-02           1
WBC                             8.112147e-03           4
neutropenia                     9.264563e-03           3
CRP                             5.685162e-03          10
PLT                             5.742682e-03           9
SOFA_D1                         7.170693e-03           7
CRRT                            7.518686e-03           6
bacteremia                      7.686654e-03           5
PT_percent                      5.415650e-03          12
BUN                             4.896542e-03          15
APACH_II                        4.189386e-03          16
timefromdx                      2.169295e-03          19
Vasoactiveagent                 5.885740e-03           8
Pneumonia                       5.639349e-03          11
Death_Cause                     5.149505e-03          13
hospital_LOS                    1.346093e-03          21
Cause_Ca_problem                3.446866e-03          17
SAPS_II                         1.321497e-03          22
thrombocytopenia                5.120749e-03          14
Albumin                         1.095653e-03          24
MV_days                         1.537287e-03          20
PaO2FiO2                        6.201186e-04          29
prev_wbrt                       2.477612e-03          18
post_icu_survival               1.214231e-03          23
post_dc_days                    1.070616e-03          25
age                             4.634880e-04          35
ICU_cause_intensivist           1.051241e-03          26
ICU_LOS                         4.797156e-04          34
underlying_pulmo                4.923065e-04          33
prev_ccrt                       7.273450e-04          28
ICU_mortal30                    1.020816e-03          27
HFNC                            5.798708e-04          31
pulmocomorbid                   3.878086e-04          38
HD                              4.600635e-04          36
Hospital_death                  5.295636e-04          32
NewlyDx                         3.425920e-04          42
cardiovasc                      6.026961e-04          30
histologyNum                    3.342538e-05          58
Refractory                      3.169631e-04          43
Underlying_DM                   1.666830e-04          47
ICU_Death                       4.401367e-04          37
post2011                        3.648650e-04          41
hypoalbuminemia                 2.447764e-04          45
DischargefromICU                2.479608e-04          44
DNR                             1.611433e-04          48
StageNum                        3.555429e-06          61
aPTT                           -2.205679e-04          85
prev_rtx                       -1.001328e-05          65
sex                             2.398036e-04          46
Intensivist                     1.274219e-04          51
MV                              3.700130e-04          40
respfailure                     3.728375e-04          39
Hb                             -1.646987e-04          83
ICUCPR                          1.489910e-04          50
procalcitonin                  -9.729300e-05          79
Distatntmets                   -3.594029e-05          69
performance_ICU_DC             -1.271039e-04          80
preICUDNR                       8.274855e-05          54
CTxinICU                        8.316928e-05          53
anemia                          3.701388e-05          57
prevCPR                         1.516852e-04          49
Pre_PS                         -2.824862e-04          88
Surgery                         3.740603e-07          62
performance_hospital_DC        -2.319763e-04          86
prev_ctx                        3.266210e-05          59
ILD                             9.883394e-05          52
smk_hx                         -1.545787e-04          82
RRT                             1.595616e-05          60
PCC                             6.353427e-05          55
PDT                            -3.763992e-05          70
dx_after_adm                   -4.518305e-05          71
ECMO                            4.694638e-05          56
Underlying_CV                  -2.601507e-05          67
BIPAP                          -6.927941e-05          73
ICUreadmission                 -9.271241e-05          78
Tracheostomy                   -6.107373e-06          64
DNR_at_ICU                     -2.340386e-04          87
PoorPS                         -1.975091e-04          84
neurology                      -2.320110e-05          66
other_malignancy               -7.588567e-05          75
postICUCtx                     -6.565885e-05          72
postICURT                      -2.272727e-06          63
postICUCPR                     -9.095901e-05          77
PrevICUadm                     -3.370924e-05          68
Underlying_stroke              -6.979452e-05          74
WBRT                           -7.623892e-05          76
prev_gks                       -1.465682e-04          81
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC      5.584444217            1
AKI                                         AKI      4.025249778            3
WBC                                         WBC      4.944400753            2
neutropenia                         neutropenia      3.046057503           10
CRP                                         CRP      3.960088964            4
PLT                                         PLT      3.515837951            5
SOFA_D1                                 SOFA_D1      3.180371257            8
CRRT                                       CRRT      2.647856099           12
bacteremia                           bacteremia      2.362327662           14
PT_percent                           PT_percent      3.429161205            7
BUN                                         BUN      3.486743143            6
APACH_II                               APACH_II      2.701041473           11
timefromdx                           timefromdx      3.132569120            9
Vasoactiveagent                 Vasoactiveagent      1.684230209           23
Pneumonia                             Pneumonia      1.736543260           22
Death_Cause                         Death_Cause      1.779741593           21
hospital_LOS                       hospital_LOS      2.627027272           13
Cause_Ca_problem               Cause_Ca_problem      1.889553806           18
SAPS_II                                 SAPS_II      2.099398243           16
thrombocytopenia               thrombocytopenia      1.573734327           24
Albumin                                 Albumin      2.123343244           15
MV_days                                 MV_days      1.530436871           25
PaO2FiO2                               PaO2FiO2      1.867972175           19
prev_wbrt                             prev_wbrt      1.014984733           30
post_icu_survival             post_icu_survival      1.026108107           29
post_dc_days                       post_dc_days      1.300155955           28
age                                         age      1.834145652           20
ICU_cause_intensivist     ICU_cause_intensivist      0.735429193           34
ICU_LOS                                 ICU_LOS      1.303671546           27
underlying_pulmo               underlying_pulmo      0.649143300           35
prev_ccrt                             prev_ccrt      0.479218062           41
ICU_mortal30                       ICU_mortal30      0.461795670           43
HFNC                                       HFNC      0.487064267           40
pulmocomorbid                     pulmocomorbid      0.469738021           42
HD                                           HD      0.374712856           48
Hospital_death                   Hospital_death      0.307396111           55
NewlyDx                                 NewlyDx      0.419081819           45
cardiovasc                           cardiovasc      0.292900410           58
histologyNum                       histologyNum      0.809199415           32
Refractory                           Refractory      0.391369023           47
Underlying_DM                     Underlying_DM      0.425643727           44
ICU_Death                             ICU_Death      0.297338678           56
post2011                               post2011      0.326059246           52
hypoalbuminemia                 hypoalbuminemia      0.359750373           49
DischargefromICU               DischargefromICU      0.309389616           54
DNR                                         DNR      0.327755890           51
StageNum                               StageNum      0.570088849           38
aPTT                                       aPTT      1.996164147           17
prev_rtx                               prev_rtx      0.602057364           37
sex                                         sex      0.296949723           57
Intensivist                         Intensivist      0.320829058           53
MV                                           MV      0.251514067           65
respfailure                         respfailure      0.248760487           67
Hb                                           Hb      1.443598773           26
ICUCPR                                   ICUCPR      0.290475871           59
procalcitonin                     procalcitonin      0.892719527           31
Distatntmets                       Distatntmets      0.395528021           46
performance_ICU_DC           performance_ICU_DC      0.605518939           36
preICUDNR                             preICUDNR      0.275826424           62
CTxinICU                               CTxinICU      0.265377502           64
anemia                                   anemia      0.278876230           61
prevCPR                                 prevCPR      0.231466623           69
Pre_PS                                   Pre_PS      0.736264752           33
Surgery                                 Surgery      0.282400459           60
performance_hospital_DC performance_hospital_DC      0.491784755           39
prev_ctx                               prev_ctx      0.201015886           70
ILD                                         ILD      0.124888124           78
smk_hx                                   smk_hx      0.339879429           50
RRT                                         RRT      0.150367292           74
PCC                                         PCC      0.084293688           84
PDT                                         PDT      0.189968670           71
dx_after_adm                       dx_after_adm      0.181228735           72
ECMO                                       ECMO      0.045817530           87
Underlying_CV                     Underlying_CV      0.129153153           77
BIPAP                                     BIPAP      0.155012077           73
ICUreadmission                   ICUreadmission      0.233621329           68
Tracheostomy                       Tracheostomy      0.095523055           83
DNR_at_ICU                           DNR_at_ICU      0.275683844           63
PoorPS                                   PoorPS      0.251402566           66
neurology                             neurology      0.076451948           85
other_malignancy               other_malignancy      0.147427077           76
postICUCtx                           postICUCtx      0.116869757           79
postICURT                             postICURT      0.006405884           88
postICUCPR                           postICUCPR      0.149872001           75
PrevICUadm                           PrevICUadm      0.073473100           86
Underlying_stroke             Underlying_stroke      0.105084787           81
WBRT                                       WBRT      0.114718628           80
prev_gks                               prev_gks      0.099256533           82
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          3        1                            2
AKI                          4        2                            1
WBC                          6        3                            4
neutropenia                 13        4                            3
CRP                         14        5                           10
PLT                         14        6                            9
SOFA_D1                     15        7                            7
CRRT                        18        8                            6
bacteremia                  19        9                            5
PT_percent                  19       10                           12
BUN                         21       11                           15
APACH_II                    27       12                           16
timefromdx                  28       13                           19
Vasoactiveagent             31       14                            8
Pneumonia                   33       15                           11
Death_Cause                 34       16                           13
hospital_LOS                34       17                           21
Cause_Ca_problem            35       18                           17
SAPS_II                     38       19                           22
thrombocytopenia            38       20                           14
Albumin                     39       21                           24
MV_days                     45       22                           20
PaO2FiO2                    48       23                           29
prev_wbrt                   48       24                           18
post_icu_survival           52       25                           23
post_dc_days                53       26                           25
age                         55       27                           35
ICU_cause_intensivist       60       28                           26
ICU_LOS                     61       29                           34
underlying_pulmo            68       30                           33
prev_ccrt                   69       31                           28
ICU_mortal30                70       32                           27
HFNC                        71       33                           31
pulmocomorbid               80       34                           38
HD                          84       35                           36
Hospital_death              87       36                           32
NewlyDx                     87       37                           42
cardiovasc                  88       38                           30
histologyNum                90       39                           58
Refractory                  90       40                           43
Underlying_DM               91       41                           47
ICU_Death                   93       42                           37
post2011                    93       43                           41
hypoalbuminemia             94       44                           45
DischargefromICU            98       45                           44
DNR                         99       46                           48
StageNum                    99       47                           61
aPTT                       102       48                           85
prev_rtx                   102       49                           65
sex                        103       50                           46
Intensivist                104       51                           51
MV                         105       52                           40
respfailure                106       53                           39
Hb                         109       54                           83
ICUCPR                     109       55                           50
procalcitonin              110       56                           79
Distatntmets               115       57                           69
performance_ICU_DC         116       58                           80
preICUDNR                  116       59                           54
CTxinICU                   117       60                           53
anemia                     118       61                           57
prevCPR                    118       62                           49
Pre_PS                     121       63                           88
Surgery                    122       64                           62
performance_hospital_DC    125       65                           86
prev_ctx                   129       66                           59
ILD                        130       67                           52
smk_hx                     132       68                           82
RRT                        134       69                           60
PCC                        139       70                           55
PDT                        141       71                           70
dx_after_adm               143       72                           71
ECMO                       143       73                           56
Underlying_CV              144       74                           67
BIPAP                      146       75                           73
ICUreadmission             146       76                           78
Tracheostomy               147       77                           64
DNR_at_ICU                 150       78                           87
PoorPS                     150       79                           84
neurology                  151       80                           66
other_malignancy           151       81                           75
postICUCtx                 151       82                           72
postICURT                  151       83                           63
postICUCPR                 152       84                           77
PrevICUadm                 154       85                           68
Underlying_stroke          155       86                           74
WBRT                       156       87                           76
prev_gks                   163       88                           81
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  3
AKI                                            3                  4
WBC                                            2                  6
neutropenia                                   10                 13
CRP                                            4                 14
PLT                                            5                 14
SOFA_D1                                        8                 15
CRRT                                          12                 18
bacteremia                                    14                 19
PT_percent                                     7                 19
BUN                                            6                 21
APACH_II                                      11                 27
timefromdx                                     9                 28
Vasoactiveagent                               23                 31
Pneumonia                                     22                 33
Death_Cause                                   21                 34
hospital_LOS                                  13                 34
Cause_Ca_problem                              18                 35
SAPS_II                                       16                 38
thrombocytopenia                              24                 38
Albumin                                       15                 39
MV_days                                       25                 45
PaO2FiO2                                      19                 48
prev_wbrt                                     30                 48
post_icu_survival                             29                 52
post_dc_days                                  28                 53
age                                           20                 55
ICU_cause_intensivist                         34                 60
ICU_LOS                                       27                 61
underlying_pulmo                              35                 68
prev_ccrt                                     41                 69
ICU_mortal30                                  43                 70
HFNC                                          40                 71
pulmocomorbid                                 42                 80
HD                                            48                 84
Hospital_death                                55                 87
NewlyDx                                       45                 87
cardiovasc                                    58                 88
histologyNum                                  32                 90
Refractory                                    47                 90
Underlying_DM                                 44                 91
ICU_Death                                     56                 93
post2011                                      52                 93
hypoalbuminemia                               49                 94
DischargefromICU                              54                 98
DNR                                           51                 99
StageNum                                      38                 99
aPTT                                          17                102
prev_rtx                                      37                102
sex                                           57                103
Intensivist                                   53                104
MV                                            65                105
respfailure                                   67                106
Hb                                            26                109
ICUCPR                                        59                109
procalcitonin                                 31                110
Distatntmets                                  46                115
performance_ICU_DC                            36                116
preICUDNR                                     62                116
CTxinICU                                      64                117
anemia                                        61                118
prevCPR                                       69                118
Pre_PS                                        33                121
Surgery                                       60                122
performance_hospital_DC                       39                125
prev_ctx                                      70                129
ILD                                           78                130
smk_hx                                        50                132
RRT                                           74                134
PCC                                           84                139
PDT                                           71                141
dx_after_adm                                  72                143
ECMO                                          87                143
Underlying_CV                                 77                144
BIPAP                                         73                146
ICUreadmission                                68                146
Tracheostomy                                  83                147
DNR_at_ICU                                    63                150
PoorPS                                        66                150
neurology                                     85                151
other_malignancy                              76                151
postICUCtx                                    79                151
postICURT                                     88                151
postICUCPR                                    75                152
PrevICUadm                                    86                154
Underlying_stroke                             81                155
WBRT                                          80                156
prev_gks                                      82                163
number of selected top features: 6
selected top features: 
[1] "ANC"         "AKI"         "WBC"         "neutropenia" "CRP"        
[6] "PLT"        

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.7760189
ROC AUC 		0.9142857

Brier score =  0.099  (best value: 0; worst value: 1)

TOTAL:

 FN =  3  /  5 	 (truth == 1) & (prediction < threshold)
 TP =  2  /  5 	 (truth == 1) & (prediction >= threshold)

 FP =  0  /  21 	 (truth == 0) & (prediction >= threshold)
 TN =  21  /  21 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.592 	 0.571 	 	0.885 	 	0.400 	 	1.000		1.000	 	0.875	 	0.776	0.914

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  7
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.437488e-02           2
AKI                             1.601968e-02           1
WBC                             9.547141e-03           4
neutropenia                     1.017353e-02           3
SOFA_D1                         8.712281e-03           5
PT_percent                      6.945679e-03           8
BUN                             4.674764e-03          10
bacteremia                      8.339300e-03           6
PLT                             4.298063e-03          12
Vasoactiveagent                 8.177086e-03           7
APACH_II                        3.547011e-03          13
CRP                             3.131839e-03          15
CRRT                            5.158598e-03           9
timefromdx                      2.002679e-03          20
hospital_LOS                    1.870927e-03          22
SAPS_II                         2.012677e-03          19
Death_Cause                     3.376382e-03          14
Albumin                         1.472423e-03          23
Pneumonia                       4.390726e-03          11
Cause_Ca_problem                2.545988e-03          18
post_dc_days                    1.908151e-03          21
age                             8.094626e-04          27
prev_wbrt                       3.118853e-03          16
thrombocytopenia                2.731476e-03          17
MV_days                         1.366609e-03          24
ICU_cause_intensivist           1.265171e-03          25
post_icu_survival               5.653594e-04          30
PaO2FiO2                        2.641292e-04          42
prev_ccrt                       8.273282e-04          26
histologyNum                    4.037215e-04          34
ICU_LOS                         2.779697e-04          39
ICU_mortal30                    6.184717e-04          29
HFNC                            4.325131e-04          33
NewlyDx                         4.963291e-04          31
StageNum                        2.647184e-04          40
cardiovasc                      6.612815e-04          28
prev_rtx                        1.693138e-04          47
Intensivist                     3.043236e-04          37
pulmocomorbid                   2.834524e-04          38
HD                              3.142393e-04          36
underlying_pulmo                1.555854e-04          48
hypoalbuminemia                 2.275314e-04          45
ICU_Death                       2.642388e-04          41
ICUCPR                          3.588170e-04          35
DischargefromICU                2.223046e-04          46
MV                              4.428334e-04          32
post2011                        2.287375e-04          44
performance_ICU_DC              1.389998e-06          61
Underlying_DM                   8.455619e-05          54
aPTT                           -2.623975e-04          86
procalcitonin                  -6.696628e-05          72
preICUDNR                       1.286475e-04          51
respfailure                     2.448803e-04          43
Hb                             -6.715519e-04          88
Hospital_death                  1.539280e-04          49
PoorPS                          1.302111e-04          50
CTxinICU                        1.236218e-04          53
anemia                          4.140058e-05          57
Refractory                     -1.453253e-05          64
Pre_PS                         -3.772514e-04          87
prev_ctx                        6.198481e-05          55
sex                            -1.615208e-05          67
performance_hospital_DC        -2.431055e-04          85
Distatntmets                   -7.541118e-05          73
DNR                            -1.071397e-04          77
smk_hx                         -2.391113e-05          68
postICUCtx                      5.844902e-05          56
PCC                             1.257948e-04          52
RRT                             2.247514e-05          60
DNR_at_ICU                     -1.129118e-04          79
PDT                            -2.708402e-05          69
ILD                             4.022967e-05          58
BIPAP                          -3.619970e-05          70
Surgery                        -1.198085e-04          80
Tracheostomy                   -1.455851e-05          65
ECMO                            3.821075e-05          59
other_malignancy               -8.918446e-05          76
PrevICUadm                     -5.936945e-06          63
postICURT                      -2.399195e-06          62
WBRT                           -5.723522e-05          71
neurology                      -1.598128e-05          66
prevCPR                        -1.426994e-04          82
prev_gks                       -7.803172e-05          75
dx_after_adm                   -1.524759e-04          83
postICUCPR                     -1.596780e-04          84
Underlying_CV                  -1.216099e-04          81
ICUreadmission                 -7.625068e-05          74
Underlying_stroke              -1.084544e-04          78
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC       5.93542588            1
AKI                                         AKI       4.31272414            3
WBC                                         WBC       5.28082926            2
neutropenia                         neutropenia       3.22227211            8
SOFA_D1                                 SOFA_D1       3.48605002            6
PT_percent                           PT_percent       3.80885069            4
BUN                                         BUN       3.55380471            5
bacteremia                           bacteremia       2.39945321           13
PLT                                         PLT       3.25888413            7
Vasoactiveagent                 Vasoactiveagent       2.18168607           15
APACH_II                               APACH_II       2.78250755           11
CRP                                         CRP       3.10520666            9
CRRT                                       CRRT       1.86027724           19
timefromdx                           timefromdx       3.01998618           10
hospital_LOS                       hospital_LOS       2.71333935           12
SAPS_II                                 SAPS_II       2.09910286           16
Death_Cause                         Death_Cause       1.59185158           22
Albumin                                 Albumin       2.26121377           14
Pneumonia                             Pneumonia       1.31337931           26
Cause_Ca_problem               Cause_Ca_problem       1.51496718           23
post_dc_days                       post_dc_days       1.64615227           21
age                                         age       1.93781015           17
prev_wbrt                             prev_wbrt       1.18966615           28
thrombocytopenia               thrombocytopenia       1.11073161           29
MV_days                                 MV_days       1.47899471           24
ICU_cause_intensivist     ICU_cause_intensivist       0.78476075           33
post_icu_survival             post_icu_survival       1.00515213           30
PaO2FiO2                               PaO2FiO2       1.69561104           20
prev_ccrt                             prev_ccrt       0.50702607           38
histologyNum                       histologyNum       0.90951413           31
ICU_LOS                                 ICU_LOS       1.21854990           27
ICU_mortal30                       ICU_mortal30       0.46099383           41
HFNC                                       HFNC       0.50454281           39
NewlyDx                                 NewlyDx       0.43725875           43
StageNum                               StageNum       0.47701039           40
cardiovasc                           cardiovasc       0.32428308           53
prev_rtx                               prev_rtx       0.65856462           35
Intensivist                         Intensivist       0.37588473           46
pulmocomorbid                     pulmocomorbid       0.37785878           45
HD                                           HD       0.35084442           49
underlying_pulmo               underlying_pulmo       0.53027210           37
hypoalbuminemia                 hypoalbuminemia       0.39021205           44
ICU_Death                             ICU_Death       0.33025151           50
ICUCPR                                   ICUCPR       0.29708387           56
DischargefromICU               DischargefromICU       0.36314886           47
MV                                           MV       0.26690340           62
post2011                               post2011       0.32444012           52
performance_ICU_DC           performance_ICU_DC       0.60460182           36
Underlying_DM                     Underlying_DM       0.36261933           48
aPTT                                       aPTT       1.91477421           18
procalcitonin                     procalcitonin       0.90228770           32
preICUDNR                             preICUDNR       0.27758545           59
respfailure                         respfailure       0.21334066           68
Hb                                           Hb       1.40349417           25
Hospital_death                   Hospital_death       0.23318842           66
PoorPS                                   PoorPS       0.25096559           65
CTxinICU                               CTxinICU       0.25534840           64
anemia                                   anemia       0.26994678           61
Refractory                           Refractory       0.32102916           54
Pre_PS                                   Pre_PS       0.69782687           34
prev_ctx                               prev_ctx       0.21905209           67
sex                                         sex       0.29635751           57
performance_hospital_DC performance_hospital_DC       0.44610246           42
Distatntmets                       Distatntmets       0.31265924           55
DNR                                         DNR       0.32552081           51
smk_hx                                   smk_hx       0.27530980           60
postICUCtx                           postICUCtx       0.11590640           77
PCC                                         PCC       0.08732074           83
RRT                                         RRT       0.14267807           75
DNR_at_ICU                           DNR_at_ICU       0.29081974           58
PDT                                         PDT       0.20756918           69
ILD                                         ILD       0.10052567           81
BIPAP                                     BIPAP       0.19036896           72
Surgery                                 Surgery       0.26404610           63
Tracheostomy                       Tracheostomy       0.10860420           78
ECMO                                       ECMO       0.04749782           87
other_malignancy               other_malignancy       0.19285002           71
PrevICUadm                           PrevICUadm       0.08657266           84
postICURT                             postICURT       0.00961514           88
WBRT                                       WBRT       0.10124042           79
neurology                             neurology       0.07441743           85
prevCPR                                 prevCPR       0.19859360           70
prev_gks                               prev_gks       0.10122621           80
dx_after_adm                       dx_after_adm       0.15007645           74
postICUCPR                           postICUCPR       0.16687376           73
Underlying_CV                     Underlying_CV       0.12707882           76
ICUreadmission                   ICUreadmission       0.06361378           86
Underlying_stroke             Underlying_stroke       0.09057159           82
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          3        1                            2
AKI                          4        2                            1
WBC                          6        3                            4
neutropenia                 11        4                            3
SOFA_D1                     11        5                            5
PT_percent                  12        6                            8
BUN                         15        7                           10
bacteremia                  19        8                            6
PLT                         19        9                           12
Vasoactiveagent             22       10                            7
APACH_II                    24       11                           13
CRP                         24       12                           15
CRRT                        28       13                            9
timefromdx                  30       14                           20
hospital_LOS                34       15                           22
SAPS_II                     35       16                           19
Death_Cause                 36       17                           14
Albumin                     37       18                           23
Pneumonia                   37       19                           11
Cause_Ca_problem            41       20                           18
post_dc_days                42       21                           21
age                         44       22                           27
prev_wbrt                   44       23                           16
thrombocytopenia            46       24                           17
MV_days                     48       25                           24
ICU_cause_intensivist       58       26                           25
post_icu_survival           60       27                           30
PaO2FiO2                    62       28                           42
prev_ccrt                   64       29                           26
histologyNum                65       30                           34
ICU_LOS                     66       31                           39
ICU_mortal30                70       32                           29
HFNC                        72       33                           33
NewlyDx                     74       34                           31
StageNum                    80       35                           40
cardiovasc                  81       36                           28
prev_rtx                    82       37                           47
Intensivist                 83       38                           37
pulmocomorbid               83       39                           38
HD                          85       40                           36
underlying_pulmo            85       41                           48
hypoalbuminemia             89       42                           45
ICU_Death                   91       43                           41
ICUCPR                      91       44                           35
DischargefromICU            93       45                           46
MV                          94       46                           32
post2011                    96       47                           44
performance_ICU_DC          97       48                           61
Underlying_DM              102       49                           54
aPTT                       104       50                           86
procalcitonin              104       51                           72
preICUDNR                  110       52                           51
respfailure                111       53                           43
Hb                         113       54                           88
Hospital_death             115       55                           49
PoorPS                     115       56                           50
CTxinICU                   117       57                           53
anemia                     118       58                           57
Refractory                 118       59                           64
Pre_PS                     121       60                           87
prev_ctx                   122       61                           55
sex                        124       62                           67
performance_hospital_DC    127       63                           85
Distatntmets               128       64                           73
DNR                        128       65                           77
smk_hx                     128       66                           68
postICUCtx                 133       67                           56
PCC                        135       68                           52
RRT                        135       69                           60
DNR_at_ICU                 137       70                           79
PDT                        138       71                           69
ILD                        139       72                           58
BIPAP                      142       73                           70
Surgery                    143       74                           80
Tracheostomy               143       75                           65
ECMO                       146       76                           59
other_malignancy           147       77                           76
PrevICUadm                 147       78                           63
postICURT                  150       79                           62
WBRT                       150       80                           71
neurology                  151       81                           66
prevCPR                    152       82                           82
prev_gks                   155       83                           75
dx_after_adm               157       84                           83
postICUCPR                 157       85                           84
Underlying_CV              157       86                           81
ICUreadmission             160       87                           74
Underlying_stroke          160       88                           78
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  3
AKI                                            3                  4
WBC                                            2                  6
neutropenia                                    8                 11
SOFA_D1                                        6                 11
PT_percent                                     4                 12
BUN                                            5                 15
bacteremia                                    13                 19
PLT                                            7                 19
Vasoactiveagent                               15                 22
APACH_II                                      11                 24
CRP                                            9                 24
CRRT                                          19                 28
timefromdx                                    10                 30
hospital_LOS                                  12                 34
SAPS_II                                       16                 35
Death_Cause                                   22                 36
Albumin                                       14                 37
Pneumonia                                     26                 37
Cause_Ca_problem                              23                 41
post_dc_days                                  21                 42
age                                           17                 44
prev_wbrt                                     28                 44
thrombocytopenia                              29                 46
MV_days                                       24                 48
ICU_cause_intensivist                         33                 58
post_icu_survival                             30                 60
PaO2FiO2                                      20                 62
prev_ccrt                                     38                 64
histologyNum                                  31                 65
ICU_LOS                                       27                 66
ICU_mortal30                                  41                 70
HFNC                                          39                 72
NewlyDx                                       43                 74
StageNum                                      40                 80
cardiovasc                                    53                 81
prev_rtx                                      35                 82
Intensivist                                   46                 83
pulmocomorbid                                 45                 83
HD                                            49                 85
underlying_pulmo                              37                 85
hypoalbuminemia                               44                 89
ICU_Death                                     50                 91
ICUCPR                                        56                 91
DischargefromICU                              47                 93
MV                                            62                 94
post2011                                      52                 96
performance_ICU_DC                            36                 97
Underlying_DM                                 48                102
aPTT                                          18                104
procalcitonin                                 32                104
preICUDNR                                     59                110
respfailure                                   68                111
Hb                                            25                113
Hospital_death                                66                115
PoorPS                                        65                115
CTxinICU                                      64                117
anemia                                        61                118
Refractory                                    54                118
Pre_PS                                        34                121
prev_ctx                                      67                122
sex                                           57                124
performance_hospital_DC                       42                127
Distatntmets                                  55                128
DNR                                           51                128
smk_hx                                        60                128
postICUCtx                                    77                133
PCC                                           83                135
RRT                                           75                135
DNR_at_ICU                                    58                137
PDT                                           69                138
ILD                                           81                139
BIPAP                                         72                142
Surgery                                       63                143
Tracheostomy                                  78                143
ECMO                                          87                146
other_malignancy                              71                147
PrevICUadm                                    84                147
postICURT                                     88                150
WBRT                                          79                150
neurology                                     85                151
prevCPR                                       70                152
prev_gks                                      80                155
dx_after_adm                                  74                157
postICUCPR                                    73                157
Underlying_CV                                 76                157
ICUreadmission                                86                160
Underlying_stroke                             82                160
number of selected top features: 6
selected top features: 
[1] "ANC"         "AKI"         "WBC"         "neutropenia" "SOFA_D1"    
[6] "PT_percent" 

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.7025043
ROC AUC 		0.6958333

Brier score =  0.119  (best value: 0; worst value: 1)

TOTAL:

 FN =  2  /  6 	 (truth == 1) & (prediction < threshold)
 TP =  4  /  6 	 (truth == 1) & (prediction >= threshold)

 FP =  1  /  20 	 (truth == 0) & (prediction >= threshold)
 TN =  19  /  20 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.659 	 0.727 	 	0.885 	 	0.667 	 	0.950		0.800	 	0.905	 	0.703	0.696

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  8
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.508336e-02           1
WBC                             1.073354e-02           4
neutropenia                     1.083849e-02           3
AKI                             1.126120e-02           2
PT_percent                      8.482040e-03           6
bacteremia                      1.032551e-02           5
PLT                             4.477566e-03           8
BUN                             3.948341e-03          12
CRP                             3.612448e-03          15
SOFA_D1                         3.806312e-03          13
APACH_II                        3.746093e-03          14
Death_Cause                     4.305435e-03          10
Vasoactiveagent                 5.010621e-03           7
hospital_LOS                    1.903594e-03          19
prev_wbrt                       4.223932e-03          11
CRRT                            3.448617e-03          16
timefromdx                      9.074168e-04          25
Pneumonia                       4.415887e-03           9
Albumin                         1.212592e-03          23
SAPS_II                         1.417849e-03          21
Cause_Ca_problem                2.386701e-03          18
MV_days                         1.576874e-03          20
thrombocytopenia                2.863357e-03          17
post_dc_days                    9.317889e-04          24
ICU_cause_intensivist           1.392670e-03          22
PaO2FiO2                        2.671214e-04          38
post_icu_survival               7.437008e-04          27
age                             2.377564e-04          40
Underlying_DM                   5.354400e-04          28
ICU_LOS                         2.370844e-04          41
ICU_mortal30                    7.973261e-04          26
underlying_pulmo                3.211957e-04          34
prev_ccrt                       3.727330e-04          32
Intensivist                     3.950276e-04          31
Hb                              5.647575e-05          56
hypoalbuminemia                 3.037066e-04          35
HFNC                            2.223145e-04          43
procalcitonin                   4.479910e-05          57
post2011                        2.774660e-04          37
pulmocomorbid                   1.837351e-04          46
ICU_Death                       4.059485e-04          30
anemia                          2.950348e-04          36
aPTT                           -8.689401e-05          77
cardiovasc                      4.112515e-04          29
Distatntmets                    1.427681e-04          48
HD                              2.348294e-04          42
ICUCPR                          2.220619e-04          44
DNR                             1.174873e-04          49
Hospital_death                  3.490907e-04          33
NewlyDx                         1.608773e-04          47
PDT                             8.634631e-05          53
DischargefromICU                7.426879e-05          55
MV                              2.661410e-04          39
histologyNum                   -8.908644e-05          78
respfailure                     2.166191e-04          45
StageNum                       -6.395859e-05          74
BIPAP                           1.115098e-04          50
prev_rtx                       -1.251873e-04          81
Pre_PS                         -1.510204e-04          83
DNR_at_ICU                     -2.558912e-05          65
CTxinICU                        6.616516e-06          59
performance_hospital_DC        -1.989908e-04          87
performance_ICU_DC             -2.674261e-04          88
prev_ctx                        5.271594e-06          60
postICUCtx                      1.052999e-04          51
ILD                             8.661230e-05          52
Surgery                        -6.297437e-05          73
smk_hx                         -1.605128e-04          84
dx_after_adm                   -4.215321e-05          67
sex                            -4.642050e-05          68
RRT                            -1.516899e-06          64
ECMO                            7.620142e-05          54
PCC                             2.464323e-05          58
Refractory                     -1.435742e-04          82
ICUreadmission                 -1.242525e-04          80
PoorPS                         -1.681798e-04          86
PrevICUadm                      1.488432e-06          62
WBRT                           -3.483132e-05          66
prevCPR                        -8.565116e-05          76
Underlying_CV                  -4.982455e-05          71
postICURT                       2.247191e-06          61
preICUDNR                       0.000000e+00          63
prev_gks                       -4.798664e-05          70
Tracheostomy                   -6.544778e-05          75
Underlying_stroke              -4.678014e-05          69
postICUCPR                     -1.118231e-04          79
neurology                      -5.900887e-05          72
other_malignancy               -1.621141e-04          85
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC      6.230646702            1
WBC                                         WBC      5.496388228            2
neutropenia                         neutropenia      3.648871117            4
AKI                                         AKI      3.239923750            6
PT_percent                           PT_percent      4.454277957            3
bacteremia                           bacteremia      2.963419095            9
PLT                                         PLT      3.109961135            7
BUN                                         BUN      3.431063620            5
CRP                                         CRP      3.078698919            8
SOFA_D1                                 SOFA_D1      2.561705896           11
APACH_II                               APACH_II      2.551738351           12
Death_Cause                         Death_Cause      1.727090569           17
Vasoactiveagent                 Vasoactiveagent      1.538719127           21
hospital_LOS                       hospital_LOS      2.519196952           13
prev_wbrt                             prev_wbrt      1.499775275           22
CRRT                                       CRRT      1.643614145           18
timefromdx                           timefromdx      2.585368951           10
Pneumonia                             Pneumonia      1.299509701           27
Albumin                                 Albumin      1.972062044           14
SAPS_II                                 SAPS_II      1.888910496           16
Cause_Ca_problem               Cause_Ca_problem      1.470070922           23
MV_days                                 MV_days      1.406815834           25
thrombocytopenia               thrombocytopenia      1.009499195           29
post_dc_days                       post_dc_days      1.308781917           26
ICU_cause_intensivist     ICU_cause_intensivist      0.770533029           32
PaO2FiO2                               PaO2FiO2      1.605781156           20
post_icu_survival             post_icu_survival      0.897205744           31
age                                         age      1.631856646           19
Underlying_DM                     Underlying_DM      0.573513002           36
ICU_LOS                                 ICU_LOS      1.235299189           28
ICU_mortal30                       ICU_mortal30      0.390826863           43
underlying_pulmo               underlying_pulmo      0.559663024           37
prev_ccrt                             prev_ccrt      0.397381047           41
Intensivist                         Intensivist      0.353006129           47
Hb                                           Hb      1.430414952           24
hypoalbuminemia                 hypoalbuminemia      0.351356979           48
HFNC                                       HFNC      0.393642742           42
procalcitonin                     procalcitonin      0.970210399           30
post2011                               post2011      0.309298906           52
pulmocomorbid                     pulmocomorbid      0.378449396           44
ICU_Death                             ICU_Death      0.254406996           61
anemia                                   anemia      0.293413033           56
aPTT                                       aPTT      1.910038036           15
cardiovasc                           cardiovasc      0.245035467           63
Distatntmets                       Distatntmets      0.375083326           45
HD                                           HD      0.316588503           51
ICUCPR                                   ICUCPR      0.332601029           49
DNR                                         DNR      0.364117203           46
Hospital_death                   Hospital_death      0.247473159           62
NewlyDx                                 NewlyDx      0.298596657           55
PDT                                         PDT      0.300748889           54
DischargefromICU               DischargefromICU      0.303119887           53
MV                                           MV      0.180695303           69
histologyNum                       histologyNum      0.743012893           33
respfailure                         respfailure      0.221666316           66
StageNum                               StageNum      0.548686311           38
BIPAP                                     BIPAP      0.238387225           65
prev_rtx                               prev_rtx      0.608396401           35
Pre_PS                                   Pre_PS      0.628712972           34
DNR_at_ICU                           DNR_at_ICU      0.268511934           57
CTxinICU                               CTxinICU      0.195271890           67
performance_hospital_DC performance_hospital_DC      0.464783086           40
performance_ICU_DC           performance_ICU_DC      0.538358403           39
prev_ctx                               prev_ctx      0.191973718           68
postICUCtx                           postICUCtx      0.119548437           78
ILD                                         ILD      0.117304898           79
Surgery                                 Surgery      0.258686770           60
smk_hx                                   smk_hx      0.328736763           50
dx_after_adm                       dx_after_adm      0.159708301           71
sex                                         sex      0.177869724           70
RRT                                         RRT      0.128698125           75
ECMO                                       ECMO      0.055880760           86
PCC                                         PCC      0.084004480           82
Refractory                           Refractory      0.268479451           58
ICUreadmission                   ICUreadmission      0.244221859           64
PoorPS                                   PoorPS      0.260355703           59
PrevICUadm                           PrevICUadm      0.066711028           84
WBRT                                       WBRT      0.104625511           80
prevCPR                                 prevCPR      0.156443788           72
Underlying_CV                     Underlying_CV      0.125991165           77
postICURT                             postICURT      0.006425771           88
preICUDNR                             preICUDNR      0.014857020           87
prev_gks                               prev_gks      0.097309735           81
Tracheostomy                       Tracheostomy      0.126606119           76
Underlying_stroke             Underlying_stroke      0.073563813           83
postICUCPR                           postICUCPR      0.143817386           74
neurology                             neurology      0.061756956           85
other_malignancy               other_malignancy      0.153950760           73
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          2        1                            1
WBC                          6        2                            4
neutropenia                  7        3                            3
AKI                          8        4                            2
PT_percent                   9        5                            6
bacteremia                  14        6                            5
PLT                         15        7                            8
BUN                         17        8                           12
CRP                         23        9                           15
SOFA_D1                     24       10                           13
APACH_II                    26       11                           14
Death_Cause                 27       12                           10
Vasoactiveagent             28       13                            7
hospital_LOS                32       14                           19
prev_wbrt                   33       15                           11
CRRT                        34       16                           16
timefromdx                  35       17                           25
Pneumonia                   36       18                            9
Albumin                     37       19                           23
SAPS_II                     37       20                           21
Cause_Ca_problem            41       21                           18
MV_days                     45       22                           20
thrombocytopenia            46       23                           17
post_dc_days                50       24                           24
ICU_cause_intensivist       54       25                           22
PaO2FiO2                    58       26                           38
post_icu_survival           58       27                           27
age                         59       28                           40
Underlying_DM               64       29                           28
ICU_LOS                     69       30                           41
ICU_mortal30                69       31                           26
underlying_pulmo            71       32                           34
prev_ccrt                   73       33                           32
Intensivist                 78       34                           31
Hb                          80       35                           56
hypoalbuminemia             83       36                           35
HFNC                        85       37                           43
procalcitonin               87       38                           57
post2011                    89       39                           37
pulmocomorbid               90       40                           46
ICU_Death                   91       41                           30
anemia                      92       42                           36
aPTT                        92       43                           77
cardiovasc                  92       44                           29
Distatntmets                93       45                           48
HD                          93       46                           42
ICUCPR                      93       47                           44
DNR                         95       48                           49
Hospital_death              95       49                           33
NewlyDx                    102       50                           47
PDT                        107       51                           53
DischargefromICU           108       52                           55
MV                         108       53                           39
histologyNum               111       54                           78
respfailure                111       55                           45
StageNum                   112       56                           74
BIPAP                      115       57                           50
prev_rtx                   116       58                           81
Pre_PS                     117       59                           83
DNR_at_ICU                 122       60                           65
CTxinICU                   126       61                           59
performance_hospital_DC    127       62                           87
performance_ICU_DC         127       63                           88
prev_ctx                   128       64                           60
postICUCtx                 129       65                           51
ILD                        131       66                           52
Surgery                    133       67                           73
smk_hx                     134       68                           84
dx_after_adm               138       69                           67
sex                        138       70                           68
RRT                        139       71                           64
ECMO                       140       72                           54
PCC                        140       73                           58
Refractory                 140       74                           82
ICUreadmission             144       75                           80
PoorPS                     145       76                           86
PrevICUadm                 146       77                           62
WBRT                       146       78                           66
prevCPR                    148       79                           76
Underlying_CV              148       80                           71
postICURT                  149       81                           61
preICUDNR                  150       82                           63
prev_gks                   151       83                           70
Tracheostomy               151       84                           75
Underlying_stroke          152       85                           69
postICUCPR                 153       86                           79
neurology                  157       87                           72
other_malignancy           158       88                           85
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  2
WBC                                            2                  6
neutropenia                                    4                  7
AKI                                            6                  8
PT_percent                                     3                  9
bacteremia                                     9                 14
PLT                                            7                 15
BUN                                            5                 17
CRP                                            8                 23
SOFA_D1                                       11                 24
APACH_II                                      12                 26
Death_Cause                                   17                 27
Vasoactiveagent                               21                 28
hospital_LOS                                  13                 32
prev_wbrt                                     22                 33
CRRT                                          18                 34
timefromdx                                    10                 35
Pneumonia                                     27                 36
Albumin                                       14                 37
SAPS_II                                       16                 37
Cause_Ca_problem                              23                 41
MV_days                                       25                 45
thrombocytopenia                              29                 46
post_dc_days                                  26                 50
ICU_cause_intensivist                         32                 54
PaO2FiO2                                      20                 58
post_icu_survival                             31                 58
age                                           19                 59
Underlying_DM                                 36                 64
ICU_LOS                                       28                 69
ICU_mortal30                                  43                 69
underlying_pulmo                              37                 71
prev_ccrt                                     41                 73
Intensivist                                   47                 78
Hb                                            24                 80
hypoalbuminemia                               48                 83
HFNC                                          42                 85
procalcitonin                                 30                 87
post2011                                      52                 89
pulmocomorbid                                 44                 90
ICU_Death                                     61                 91
anemia                                        56                 92
aPTT                                          15                 92
cardiovasc                                    63                 92
Distatntmets                                  45                 93
HD                                            51                 93
ICUCPR                                        49                 93
DNR                                           46                 95
Hospital_death                                62                 95
NewlyDx                                       55                102
PDT                                           54                107
DischargefromICU                              53                108
MV                                            69                108
histologyNum                                  33                111
respfailure                                   66                111
StageNum                                      38                112
BIPAP                                         65                115
prev_rtx                                      35                116
Pre_PS                                        34                117
DNR_at_ICU                                    57                122
CTxinICU                                      67                126
performance_hospital_DC                       40                127
performance_ICU_DC                            39                127
prev_ctx                                      68                128
postICUCtx                                    78                129
ILD                                           79                131
Surgery                                       60                133
smk_hx                                        50                134
dx_after_adm                                  71                138
sex                                           70                138
RRT                                           75                139
ECMO                                          86                140
PCC                                           82                140
Refractory                                    58                140
ICUreadmission                                64                144
PoorPS                                        59                145
PrevICUadm                                    84                146
WBRT                                          80                146
prevCPR                                       72                148
Underlying_CV                                 77                148
postICURT                                     88                149
preICUDNR                                     87                150
prev_gks                                      81                151
Tracheostomy                                  76                151
Underlying_stroke                             83                152
postICUCPR                                    74                153
neurology                                     85                157
other_malignancy                              73                158
number of selected top features: 6
selected top features: 
[1] "ANC"         "WBC"         "neutropenia" "AKI"         "PT_percent" 
[6] "bacteremia" 

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.6638704
ROC AUC 		0.771875

Brier score =  0.210  (best value: 0; worst value: 1)

TOTAL:

 FN =  6  /  10 	 (truth == 1) & (prediction < threshold)
 TP =  4  /  10 	 (truth == 1) & (prediction >= threshold)

 FP =  3  /  16 	 (truth == 0) & (prediction >= threshold)
 TN =  13  /  16 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.233 	 0.471 	 	0.654 	 	0.400 	 	0.812		0.571	 	0.684	 	0.664	0.772

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  9
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.549701e-02           2
AKI                             1.753766e-02           1
WBC                             1.020772e-02           4
neutropenia                     1.336549e-02           3
CRP                             5.478846e-03           9
PT_percent                      6.392311e-03           8
BUN                             5.014467e-03          11
CRRT                            7.372249e-03           6
Vasoactiveagent                 7.676358e-03           5
Death_Cause                     6.495714e-03           7
PLT                             3.598817e-03          14
SOFA_D1                         4.552194e-03          12
hospital_LOS                    1.802608e-03          19
APACH_II                        2.428688e-03          17
Pneumonia                       5.252616e-03          10
bacteremia                      4.033011e-03          13
Cause_Ca_problem                2.347638e-03          18
timefromdx                      7.675140e-04          28
SAPS_II                         1.308036e-03          23
Albumin                         1.147327e-03          25
thrombocytopenia                2.789683e-03          15
prev_wbrt                       2.615619e-03          16
MV_days                         1.225123e-03          24
post_dc_days                    1.315915e-03          22
age                             7.431986e-04          29
ICU_cause_intensivist           1.677019e-03          20
post_icu_survival               8.668963e-04          26
PaO2FiO2                        3.758473e-04          38
ICU_mortal30                    1.412445e-03          21
ICU_LOS                         3.940842e-04          37
underlying_pulmo                5.318433e-04          30
cardiovasc                      8.028550e-04          27
HFNC                            4.281338e-04          34
hypoalbuminemia                 4.589652e-04          32
NewlyDx                         4.619077e-04          31
pulmocomorbid                   3.620389e-04          39
prev_ccrt                       4.236386e-04          35
DischargefromICU                4.078309e-04          36
Underlying_DM                   2.288432e-04          46
ICU_Death                       3.544822e-04          41
histologyNum                    1.040766e-05          63
Hospital_death                  4.423264e-04          33
Intensivist                     2.606698e-04          44
anemia                          2.914769e-04          42
StageNum                        8.710739e-06          64
ICUCPR                          2.737424e-04          43
post2011                        1.568497e-04          48
aPTT                           -3.907933e-04          87
MV                              3.547454e-04          40
Hb                             -1.699064e-04          83
HD                              2.387903e-04          45
Refractory                      8.187947e-05          55
DNR                             4.048362e-05          59
CTxinICU                        8.678065e-05          53
prev_rtx                       -7.738559e-05          75
respfailure                     1.575654e-04          47
sex                             7.275977e-05          57
performance_hospital_DC        -9.306189e-05          78
PDT                             8.365776e-05          54
Pre_PS                         -2.143259e-04          85
prev_ctx                        1.405590e-04          49
procalcitonin                  -5.476322e-04          88
Surgery                         1.964029e-05          61
performance_ICU_DC             -3.283408e-04          86
ILD                             1.128851e-04          50
Distatntmets                   -1.124146e-04          80
ICUreadmission                  4.590522e-05          58
smk_hx                         -5.993187e-05          74
BIPAP                           1.255806e-05          62
postICUCtx                      9.366688e-05          52
RRT                             7.757957e-05          56
PoorPS                         -9.039947e-05          76
PCC                             9.900152e-05          51
prevCPR                        -5.155814e-06          68
Tracheostomy                    2.899225e-05          60
dx_after_adm                   -4.351187e-05          71
DNR_at_ICU                     -1.720903e-04          84
Underlying_CV                  -5.491596e-05          73
ECMO                            6.837869e-06          65
PrevICUadm                     -3.436527e-05          70
neurology                      -1.461247e-05          69
postICUCPR                     -1.052881e-04          79
other_malignancy               -1.588974e-04          82
postICURT                       4.396135e-06          66
preICUDNR                       0.000000e+00          67
prev_gks                       -4.958101e-05          72
Underlying_stroke              -9.267015e-05          77
WBRT                           -1.128714e-04          81
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC      6.400149040            1
AKI                                         AKI      4.562406686            3
WBC                                         WBC      5.295324640            2
neutropenia                         neutropenia      4.386108935            4
CRP                                         CRP      3.848418305            5
PT_percent                           PT_percent      3.693380228            6
BUN                                         BUN      3.517634643            7
CRRT                                       CRRT      2.525474588           12
Vasoactiveagent                 Vasoactiveagent      2.084708506           15
Death_Cause                         Death_Cause      2.101365883           14
PLT                                         PLT      3.045583454            8
SOFA_D1                                 SOFA_D1      2.812183742           10
hospital_LOS                       hospital_LOS      2.834148865            9
APACH_II                               APACH_II      2.485529844           13
Pneumonia                             Pneumonia      1.537036498           22
bacteremia                           bacteremia      1.303914742           26
Cause_Ca_problem               Cause_Ca_problem      1.651011663           21
timefromdx                           timefromdx      2.618364978           11
SAPS_II                                 SAPS_II      1.990624095           17
Albumin                                 Albumin      2.045257055           16
thrombocytopenia               thrombocytopenia      1.180517500           28
prev_wbrt                             prev_wbrt      0.994746287           30
MV_days                                 MV_days      1.505084195           23
post_dc_days                       post_dc_days      1.387036770           25
age                                         age      1.745404810           20
ICU_cause_intensivist     ICU_cause_intensivist      0.804513571           33
post_icu_survival             post_icu_survival      1.077195701           29
PaO2FiO2                               PaO2FiO2      1.789447204           19
ICU_mortal30                       ICU_mortal30      0.576306689           38
ICU_LOS                                 ICU_LOS      1.283894611           27
underlying_pulmo               underlying_pulmo      0.577491223           37
cardiovasc                           cardiovasc      0.373320714           48
HFNC                                       HFNC      0.445855582           42
hypoalbuminemia                 hypoalbuminemia      0.409095141           44
NewlyDx                                 NewlyDx      0.369042143           49
pulmocomorbid                     pulmocomorbid      0.455404624           41
prev_ccrt                             prev_ccrt      0.388829317           46
DischargefromICU               DischargefromICU      0.381518455           47
Underlying_DM                     Underlying_DM      0.435605469           43
ICU_Death                             ICU_Death      0.362208296           50
histologyNum                       histologyNum      0.849215109           31
Hospital_death                   Hospital_death      0.285594609           62
Intensivist                         Intensivist      0.356529192           51
anemia                                   anemia      0.307141805           56
StageNum                               StageNum      0.609715908           35
ICUCPR                                   ICUCPR      0.302698973           57
post2011                               post2011      0.336075958           53
aPTT                                       aPTT      1.921977045           18
MV                                           MV      0.229338288           66
Hb                                           Hb      1.417855838           24
HD                                           HD      0.283725314           63
Refractory                           Refractory      0.323627613           55
DNR                                         DNR      0.331967316           54
CTxinICU                               CTxinICU      0.292100599           61
prev_rtx                               prev_rtx      0.479521660           39
respfailure                         respfailure      0.211827438           69
sex                                         sex      0.301796191           59
performance_hospital_DC performance_hospital_DC      0.468016357           40
PDT                                         PDT      0.273993683           65
Pre_PS                                   Pre_PS      0.680993903           34
prev_ctx                               prev_ctx      0.210229519           70
procalcitonin                     procalcitonin      0.846492067           32
Surgery                                 Surgery      0.293356210           60
performance_ICU_DC           performance_ICU_DC      0.601443000           36
ILD                                         ILD      0.151069658           73
Distatntmets                       Distatntmets      0.400207716           45
ICUreadmission                   ICUreadmission      0.216537546           67
smk_hx                                   smk_hx      0.336701373           52
BIPAP                                     BIPAP      0.213658857           68
postICUCtx                           postICUCtx      0.119631817           78
RRT                                         RRT      0.137904940           75
PoorPS                                   PoorPS      0.302571433           58
PCC                                         PCC      0.071215612           84
prevCPR                                 prevCPR      0.166604279           71
Tracheostomy                       Tracheostomy      0.096261547           80
dx_after_adm                       dx_after_adm      0.137417450           76
DNR_at_ICU                           DNR_at_ICU      0.276280764           64
Underlying_CV                     Underlying_CV      0.136421096           77
ECMO                                       ECMO      0.030725412           86
PrevICUadm                           PrevICUadm      0.091672731           81
neurology                             neurology      0.081420335           83
postICUCPR                           postICUCPR      0.148056560           74
other_malignancy               other_malignancy      0.163361885           72
postICURT                             postICURT      0.005917026           88
preICUDNR                             preICUDNR      0.017010369           87
prev_gks                               prev_gks      0.060799976           85
Underlying_stroke             Underlying_stroke      0.088151687           82
WBRT                                       WBRT      0.109218020           79
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          3        1                            2
AKI                          4        2                            1
WBC                          6        3                            4
neutropenia                  7        4                            3
CRP                         14        5                            9
PT_percent                  14        6                            8
BUN                         18        7                           11
CRRT                        18        8                            6
Vasoactiveagent             20        9                            5
Death_Cause                 21       10                            7
PLT                         22       11                           14
SOFA_D1                     22       12                           12
hospital_LOS                28       13                           19
APACH_II                    30       14                           17
Pneumonia                   32       15                           10
bacteremia                  39       16                           13
Cause_Ca_problem            39       17                           18
timefromdx                  39       18                           28
SAPS_II                     40       19                           23
Albumin                     41       20                           25
thrombocytopenia            43       21                           15
prev_wbrt                   46       22                           16
MV_days                     47       23                           24
post_dc_days                47       24                           22
age                         49       25                           29
ICU_cause_intensivist       53       26                           20
post_icu_survival           55       27                           26
PaO2FiO2                    57       28                           38
ICU_mortal30                59       29                           21
ICU_LOS                     64       30                           37
underlying_pulmo            67       31                           30
cardiovasc                  75       32                           27
HFNC                        76       33                           34
hypoalbuminemia             76       34                           32
NewlyDx                     80       35                           31
pulmocomorbid               80       36                           39
prev_ccrt                   81       37                           35
DischargefromICU            83       38                           36
Underlying_DM               89       39                           46
ICU_Death                   91       40                           41
histologyNum                94       41                           63
Hospital_death              95       42                           33
Intensivist                 95       43                           44
anemia                      98       44                           42
StageNum                    99       45                           64
ICUCPR                     100       46                           43
post2011                   101       47                           48
aPTT                       105       48                           87
MV                         106       49                           40
Hb                         107       50                           83
HD                         108       51                           45
Refractory                 110       52                           55
DNR                        113       53                           59
CTxinICU                   114       54                           53
prev_rtx                   114       55                           75
respfailure                116       56                           47
sex                        116       57                           57
performance_hospital_DC    118       58                           78
PDT                        119       59                           54
Pre_PS                     119       60                           85
prev_ctx                   119       61                           49
procalcitonin              120       62                           88
Surgery                    121       63                           61
performance_ICU_DC         122       64                           86
ILD                        123       65                           50
Distatntmets               125       66                           80
ICUreadmission             125       67                           58
smk_hx                     126       68                           74
BIPAP                      130       69                           62
postICUCtx                 130       70                           52
RRT                        131       71                           56
PoorPS                     134       72                           76
PCC                        135       73                           51
prevCPR                    139       74                           68
Tracheostomy               140       75                           60
dx_after_adm               147       76                           71
DNR_at_ICU                 148       77                           84
Underlying_CV              150       78                           73
ECMO                       151       79                           65
PrevICUadm                 151       80                           70
neurology                  152       81                           69
postICUCPR                 153       82                           79
other_malignancy           154       83                           82
postICURT                  154       84                           66
preICUDNR                  154       85                           67
prev_gks                   157       86                           72
Underlying_stroke          159       87                           77
WBRT                       160       88                           81
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  3
AKI                                            3                  4
WBC                                            2                  6
neutropenia                                    4                  7
CRP                                            5                 14
PT_percent                                     6                 14
BUN                                            7                 18
CRRT                                          12                 18
Vasoactiveagent                               15                 20
Death_Cause                                   14                 21
PLT                                            8                 22
SOFA_D1                                       10                 22
hospital_LOS                                   9                 28
APACH_II                                      13                 30
Pneumonia                                     22                 32
bacteremia                                    26                 39
Cause_Ca_problem                              21                 39
timefromdx                                    11                 39
SAPS_II                                       17                 40
Albumin                                       16                 41
thrombocytopenia                              28                 43
prev_wbrt                                     30                 46
MV_days                                       23                 47
post_dc_days                                  25                 47
age                                           20                 49
ICU_cause_intensivist                         33                 53
post_icu_survival                             29                 55
PaO2FiO2                                      19                 57
ICU_mortal30                                  38                 59
ICU_LOS                                       27                 64
underlying_pulmo                              37                 67
cardiovasc                                    48                 75
HFNC                                          42                 76
hypoalbuminemia                               44                 76
NewlyDx                                       49                 80
pulmocomorbid                                 41                 80
prev_ccrt                                     46                 81
DischargefromICU                              47                 83
Underlying_DM                                 43                 89
ICU_Death                                     50                 91
histologyNum                                  31                 94
Hospital_death                                62                 95
Intensivist                                   51                 95
anemia                                        56                 98
StageNum                                      35                 99
ICUCPR                                        57                100
post2011                                      53                101
aPTT                                          18                105
MV                                            66                106
Hb                                            24                107
HD                                            63                108
Refractory                                    55                110
DNR                                           54                113
CTxinICU                                      61                114
prev_rtx                                      39                114
respfailure                                   69                116
sex                                           59                116
performance_hospital_DC                       40                118
PDT                                           65                119
Pre_PS                                        34                119
prev_ctx                                      70                119
procalcitonin                                 32                120
Surgery                                       60                121
performance_ICU_DC                            36                122
ILD                                           73                123
Distatntmets                                  45                125
ICUreadmission                                67                125
smk_hx                                        52                126
BIPAP                                         68                130
postICUCtx                                    78                130
RRT                                           75                131
PoorPS                                        58                134
PCC                                           84                135
prevCPR                                       71                139
Tracheostomy                                  80                140
dx_after_adm                                  76                147
DNR_at_ICU                                    64                148
Underlying_CV                                 77                150
ECMO                                          86                151
PrevICUadm                                    81                151
neurology                                     83                152
postICUCPR                                    74                153
other_malignancy                              72                154
postICURT                                     88                154
preICUDNR                                     87                154
prev_gks                                      85                157
Underlying_stroke                             82                159
WBRT                                          79                160
number of selected top features: 6
selected top features: 
[1] "ANC"         "AKI"         "WBC"         "neutropenia" "CRP"        
[6] "PT_percent" 

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.5843932
ROC AUC 		0.7190476

Brier score =  0.138  (best value: 0; worst value: 1)

TOTAL:

 FN =  4  /  5 	 (truth == 1) & (prediction < threshold)
 TP =  1  /  5 	 (truth == 1) & (prediction >= threshold)

 FP =  0  /  21 	 (truth == 0) & (prediction >= threshold)
 TN =  21  /  21 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.410 	 0.333 	 	0.846 	 	0.200 	 	1.000		1.000	 	0.840	 	0.584	0.719

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  10
[Randomizing the rows]
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
ANC                             1.649732e-02           2
AKI                             1.900023e-02           1
WBC                             9.479539e-03           4
neutropenia                     1.014050e-02           3
PT_percent                      6.327087e-03           7
CRP                             4.183769e-03          13
PLT                             4.209839e-03          11
bacteremia                      7.061096e-03           6
BUN                             4.187299e-03          12
SOFA_D1                         4.689066e-03          10
Vasoactiveagent                 8.044681e-03           5
APACH_II                        3.802280e-03          14
CRRT                            6.139172e-03           8
Death_Cause                     4.769545e-03           9
Albumin                         1.968222e-03          18
hospital_LOS                    8.456497e-04          26
SAPS_II                         1.284135e-03          21
Cause_Ca_problem                2.322833e-03          17
thrombocytopenia                3.649752e-03          15
post_dc_days                    1.477266e-03          20
Pneumonia                       3.139706e-03          16
MV_days                         1.103529e-03          23
aPTT                            5.388362e-04          31
PaO2FiO2                        5.070359e-04          32
age                             4.691052e-04          34
prev_wbrt                       1.276446e-03          22
ICU_cause_intensivist           1.076367e-03          24
post_icu_survival               7.270499e-04          27
ICU_mortal30                    1.495601e-03          19
underlying_pulmo                9.407158e-04          25
ICU_LOS                         3.833422e-04          38
hypoalbuminemia                 6.960643e-04          28
HFNC                            6.588489e-04          30
procalcitonin                   1.914648e-04          47
pulmocomorbid                   4.825847e-04          33
StageNum                        3.599746e-04          41
histologyNum                    1.878695e-04          48
ICU_Death                       6.821796e-04          29
HD                              4.017223e-04          35
Underlying_DM                   3.541915e-04          42
NewlyDx                         2.300762e-04          46
post2011                        3.218420e-04          43
DischargefromICU                3.964985e-04          37
Intensivist                     2.322058e-04          45
prev_ccrt                       2.998832e-04          44
ICUCPR                          3.982542e-04          36
timefromdx                     -1.818611e-04          88
Distatntmets                    4.675740e-05          55
Hospital_death                  3.780541e-04          39
cardiovasc                      3.744432e-04          40
DNR                             8.194266e-05          53
Hb                             -9.968670e-05          81
sex                             1.715719e-04          49
preICUDNR                       1.470392e-04          50
Refractory                      7.351925e-05          54
performance_ICU_DC             -8.823336e-05          79
PoorPS                          3.479195e-05          59
anemia                          1.728295e-05          64
Pre_PS                         -1.031158e-04          82
MV                              4.667562e-05          56
performance_hospital_DC        -1.412475e-04          86
ILD                             1.448753e-04          51
respfailure                     3.140710e-05          60
DNR_at_ICU                     -2.767247e-05          69
prev_rtx                       -1.358359e-04          85
smk_hx                         -6.709664e-05          75
CTxinICU                        3.605433e-05          58
prev_ctx                        1.808230e-05          63
PCC                             9.116255e-05          52
ICUreadmission                 -2.189288e-05          67
postICUCtx                      2.667220e-05          61
Tracheostomy                   -4.110040e-05          71
postICUCPR                     -6.677604e-05          74
ECMO                            4.142734e-05          57
Surgery                        -9.444659e-05          80
prevCPR                        -7.163098e-05          76
RRT                            -2.612307e-05          68
PrevICUadm                      1.877053e-05          62
Underlying_CV                  -4.120392e-05          72
BIPAP                          -3.550522e-05          70
dx_after_adm                   -8.797747e-05          78
neurology                      -1.196437e-05          66
postICURT                       0.000000e+00          65
prev_gks                       -5.188376e-05          73
other_malignancy               -1.301012e-04          84
Underlying_stroke              -7.244115e-05          77
PDT                            -1.099200e-04          83
WBRT                           -1.430493e-04          87
                                       features MeanDecreaseGini secondColPos
ANC                                         ANC      6.408303139            1
AKI                                         AKI      4.910453074            3
WBC                                         WBC      5.256186784            2
neutropenia                         neutropenia      3.446035827            6
PT_percent                           PT_percent      3.498138338            4
CRP                                         CRP      3.481282693            5
PLT                                         PLT      3.389039593            7
bacteremia                           bacteremia      2.261669447           14
BUN                                         BUN      3.380496025            8
SOFA_D1                                 SOFA_D1      2.730211263           10
Vasoactiveagent                 Vasoactiveagent      2.163689328           15
APACH_II                               APACH_II      2.789987622            9
CRRT                                       CRRT      2.048233021           16
Death_Cause                         Death_Cause      1.979716754           18
Albumin                                 Albumin      2.350122085           13
hospital_LOS                       hospital_LOS      2.393131621           12
SAPS_II                                 SAPS_II      2.030366278           17
Cause_Ca_problem               Cause_Ca_problem      1.569126204           22
thrombocytopenia               thrombocytopenia      1.227878347           27
post_dc_days                       post_dc_days      1.414306435           24
Pneumonia                             Pneumonia      1.116815291           29
MV_days                                 MV_days      1.410929893           25
aPTT                                       aPTT      1.948271854           19
PaO2FiO2                               PaO2FiO2      1.731854713           21
age                                         age      1.778075233           20
prev_wbrt                             prev_wbrt      0.757023342           32
ICU_cause_intensivist     ICU_cause_intensivist      0.701762978           33
post_icu_survival             post_icu_survival      0.911492153           30
ICU_mortal30                       ICU_mortal30      0.539913877           39
underlying_pulmo               underlying_pulmo      0.631337861           37
ICU_LOS                                 ICU_LOS      1.316618320           26
hypoalbuminemia                 hypoalbuminemia      0.536519356           40
HFNC                                       HFNC      0.522652793           41
procalcitonin                     procalcitonin      1.118955455           28
pulmocomorbid                     pulmocomorbid      0.486671765           42
StageNum                               StageNum      0.658083730           35
histologyNum                       histologyNum      0.782529657           31
ICU_Death                             ICU_Death      0.306182164           54
HD                                           HD      0.337929021           49
Underlying_DM                     Underlying_DM      0.440818672           44
NewlyDx                                 NewlyDx      0.371746700           45
post2011                               post2011      0.338121563           48
DischargefromICU               DischargefromICU      0.301353544           55
Intensivist                         Intensivist      0.350491879           47
prev_ccrt                             prev_ccrt      0.337720895           50
ICUCPR                                   ICUCPR      0.287676763           59
timefromdx                           timefromdx      2.433965863           11
Distatntmets                       Distatntmets      0.366731557           46
Hospital_death                   Hospital_death      0.269118027           62
cardiovasc                           cardiovasc      0.238845989           63
DNR                                         DNR      0.331597864           51
Hb                                           Hb      1.465565163           23
sex                                         sex      0.285754720           60
preICUDNR                             preICUDNR      0.280814488           61
Refractory                           Refractory      0.296406693           57
performance_ICU_DC           performance_ICU_DC      0.663905498           34
PoorPS                                   PoorPS      0.300720816           56
anemia                                   anemia      0.313763657           52
Pre_PS                                   Pre_PS      0.631280329           38
MV                                           MV      0.197748958           66
performance_hospital_DC performance_hospital_DC      0.632442429           36
ILD                                         ILD      0.117180328           73
respfailure                         respfailure      0.198982720           65
DNR_at_ICU                           DNR_at_ICU      0.289183495           58
prev_rtx                               prev_rtx      0.473809921           43
smk_hx                                   smk_hx      0.312081596           53
CTxinICU                               CTxinICU      0.133411161           71
prev_ctx                               prev_ctx      0.185287901           67
PCC                                         PCC      0.074709787           84
ICUreadmission                   ICUreadmission      0.129805525           72
postICUCtx                           postICUCtx      0.097535073           79
Tracheostomy                       Tracheostomy      0.140219900           70
postICUCPR                           postICUCPR      0.159536108           68
ECMO                                       ECMO      0.050187952           87
Surgery                                 Surgery      0.228874729           64
prevCPR                                 prevCPR      0.148990894           69
RRT                                         RRT      0.105721814           78
PrevICUadm                           PrevICUadm      0.057090661           85
Underlying_CV                     Underlying_CV      0.109895306           75
BIPAP                                     BIPAP      0.086891696           82
dx_after_adm                       dx_after_adm      0.114296445           74
neurology                             neurology      0.054079039           86
postICURT                             postICURT      0.001908506           88
prev_gks                               prev_gks      0.090133573           81
other_malignancy               other_malignancy      0.108881694           76
Underlying_stroke             Underlying_stroke      0.080491156           83
PDT                                         PDT      0.090473987           80
WBRT                                       WBRT      0.106570688           77
                        posSum finalPos meanDecreaseAccuracyPosition
ANC                          3        1                            2
AKI                          4        2                            1
WBC                          6        3                            4
neutropenia                  9        4                            3
PT_percent                  11        5                            7
CRP                         18        6                           13
PLT                         18        7                           11
bacteremia                  20        8                            6
BUN                         20        9                           12
SOFA_D1                     20       10                           10
Vasoactiveagent             20       11                            5
APACH_II                    23       12                           14
CRRT                        24       13                            8
Death_Cause                 27       14                            9
Albumin                     31       15                           18
hospital_LOS                38       16                           26
SAPS_II                     38       17                           21
Cause_Ca_problem            39       18                           17
thrombocytopenia            42       19                           15
post_dc_days                44       20                           20
Pneumonia                   45       21                           16
MV_days                     48       22                           23
aPTT                        50       23                           31
PaO2FiO2                    53       24                           32
age                         54       25                           34
prev_wbrt                   54       26                           22
ICU_cause_intensivist       57       27                           24
post_icu_survival           57       28                           27
ICU_mortal30                58       29                           19
underlying_pulmo            62       30                           25
ICU_LOS                     64       31                           38
hypoalbuminemia             68       32                           28
HFNC                        71       33                           30
procalcitonin               75       34                           47
pulmocomorbid               75       35                           33
StageNum                    76       36                           41
histologyNum                79       37                           48
ICU_Death                   83       38                           29
HD                          84       39                           35
Underlying_DM               86       40                           42
NewlyDx                     91       41                           46
post2011                    91       42                           43
DischargefromICU            92       43                           37
Intensivist                 92       44                           45
prev_ccrt                   94       45                           44
ICUCPR                      95       46                           36
timefromdx                  99       47                           88
Distatntmets               101       48                           55
Hospital_death             101       49                           39
cardiovasc                 103       50                           40
DNR                        104       51                           53
Hb                         104       52                           81
sex                        109       53                           49
preICUDNR                  111       54                           50
Refractory                 111       55                           54
performance_ICU_DC         113       56                           79
PoorPS                     115       57                           59
anemia                     116       58                           64
Pre_PS                     120       59                           82
MV                         122       60                           56
performance_hospital_DC    122       61                           86
ILD                        124       62                           51
respfailure                125       63                           60
DNR_at_ICU                 127       64                           69
prev_rtx                   128       65                           85
smk_hx                     128       66                           75
CTxinICU                   129       67                           58
prev_ctx                   130       68                           63
PCC                        136       69                           52
ICUreadmission             139       70                           67
postICUCtx                 140       71                           61
Tracheostomy               141       72                           71
postICUCPR                 142       73                           74
ECMO                       144       74                           57
Surgery                    144       75                           80
prevCPR                    145       76                           76
RRT                        146       77                           68
PrevICUadm                 147       78                           62
Underlying_CV              147       79                           72
BIPAP                      152       80                           70
dx_after_adm               152       81                           78
neurology                  152       82                           66
postICURT                  153       83                           65
prev_gks                   154       84                           73
other_malignancy           160       85                           84
Underlying_stroke          160       86                           77
PDT                        163       87                           83
WBRT                       164       88                           87
                        meanDecreaseGiniPosition aggregatedPosition
ANC                                            1                  3
AKI                                            3                  4
WBC                                            2                  6
neutropenia                                    6                  9
PT_percent                                     4                 11
CRP                                            5                 18
PLT                                            7                 18
bacteremia                                    14                 20
BUN                                            8                 20
SOFA_D1                                       10                 20
Vasoactiveagent                               15                 20
APACH_II                                       9                 23
CRRT                                          16                 24
Death_Cause                                   18                 27
Albumin                                       13                 31
hospital_LOS                                  12                 38
SAPS_II                                       17                 38
Cause_Ca_problem                              22                 39
thrombocytopenia                              27                 42
post_dc_days                                  24                 44
Pneumonia                                     29                 45
MV_days                                       25                 48
aPTT                                          19                 50
PaO2FiO2                                      21                 53
age                                           20                 54
prev_wbrt                                     32                 54
ICU_cause_intensivist                         33                 57
post_icu_survival                             30                 57
ICU_mortal30                                  39                 58
underlying_pulmo                              37                 62
ICU_LOS                                       26                 64
hypoalbuminemia                               40                 68
HFNC                                          41                 71
procalcitonin                                 28                 75
pulmocomorbid                                 42                 75
StageNum                                      35                 76
histologyNum                                  31                 79
ICU_Death                                     54                 83
HD                                            49                 84
Underlying_DM                                 44                 86
NewlyDx                                       45                 91
post2011                                      48                 91
DischargefromICU                              55                 92
Intensivist                                   47                 92
prev_ccrt                                     50                 94
ICUCPR                                        59                 95
timefromdx                                    11                 99
Distatntmets                                  46                101
Hospital_death                                62                101
cardiovasc                                    63                103
DNR                                           51                104
Hb                                            23                104
sex                                           60                109
preICUDNR                                     61                111
Refractory                                    57                111
performance_ICU_DC                            34                113
PoorPS                                        56                115
anemia                                        52                116
Pre_PS                                        38                120
MV                                            66                122
performance_hospital_DC                       36                122
ILD                                           73                124
respfailure                                   65                125
DNR_at_ICU                                    58                127
prev_rtx                                      43                128
smk_hx                                        53                128
CTxinICU                                      71                129
prev_ctx                                      67                130
PCC                                           84                136
ICUreadmission                                72                139
postICUCtx                                    79                140
Tracheostomy                                  70                141
postICUCPR                                    68                142
ECMO                                          87                144
Surgery                                       64                144
prevCPR                                       69                145
RRT                                           78                146
PrevICUadm                                    85                147
Underlying_CV                                 75                147
BIPAP                                         82                152
dx_after_adm                                  74                152
neurology                                     86                152
postICURT                                     88                153
prev_gks                                      81                154
other_malignancy                              76                160
Underlying_stroke                             83                160
PDT                                           80                163
WBRT                                          77                164
number of selected top features: 6
selected top features: 
[1] "ANC"         "AKI"         "WBC"         "neutropenia" "PT_percent" 
[6] "CRP"        

[Training Random Forests classifier on the training set with only the top  6  features]

[Applying the trained Random Forests classifier on the test set with only the top  6  features]

PR AUC (integral) 	0.6242969
ROC AUC 		0.6917293

Brier score =  0.167  (best value: 0; worst value: 1)

TOTAL:

 FN =  4  /  7 	 (truth == 1) & (prediction < threshold)
 TP =  3  /  7 	 (truth == 1) & (prediction >= threshold)

 FP =  3  /  19 	 (truth == 0) & (prediction >= threshold)
 TN =  16  /  19 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.285 	 0.462 	 	0.731 	 	0.429 	 	0.842		0.500	 	0.800	 	0.624	0.692




=== final results ===
Number of executions = 10
                MCC F1_score accuracy TP_rate TN_rate    PPV    NPV PR_AUC
nbr.val      10.000   10.000   10.000  10.000  10.000 10.000 10.000 10.000
nbr.null      0.000    0.000    0.000   0.000   0.000  0.000  0.000  0.000
nbr.na        0.000    0.000    0.000   0.000   0.000  0.000  0.000  0.000
min           0.233    0.333    0.654   0.200   0.812  0.500  0.684  0.584
max           0.659    0.727    0.885   0.667   1.000  1.000  0.905  0.807
range         0.426    0.394    0.231   0.467   0.188  0.500  0.221  0.222
sum           4.120    5.039    7.769   4.020   9.257  7.502  7.892  6.896
median        0.386    0.466    0.769   0.400   0.943  0.732  0.786  0.673
mean          0.412    0.504    0.777   0.402   0.926  0.750  0.789  0.690
SE.mean       0.045    0.041    0.024   0.045   0.020  0.052  0.022  0.024
CI.mean.0.95  0.101    0.092    0.053   0.103   0.044  0.118  0.049  0.053
var           0.020    0.016    0.006   0.021   0.004  0.027  0.005  0.006
std.dev       0.142    0.128    0.074   0.144   0.062  0.165  0.069  0.075
coef.var      0.344    0.255    0.096   0.358   0.067  0.219  0.087  0.108
             ROC_AUC
nbr.val       10.000
nbr.null       0.000
nbr.na         0.000
min            0.692
max            0.917
range          0.225
sum            7.805
median         0.762
mean           0.780
SE.mean        0.027
CI.mean.0.95   0.060
var            0.007
std.dev        0.084
coef.var       0.108


=== === === ===
          MCC F1_score accuracy TP_rate TN_rate   PPV   NPV PR_AUC ROC_AUC
mean    0.412    0.504    0.777   0.402   0.926 0.750 0.789  0.690   0.780
std.dev 0.142    0.128    0.074   0.144   0.062 0.165 0.069  0.075   0.084


=== === === ===



Total execution time: 1.808152 seconds
0 days, 00 hours, 01 minutes, 48.49 seconds

We'll plot only the top 20 features
applied command: mkdir -p ../results/
just run the command: mkdir -p ../results/
saved plot in file ../results/MeanDecreaseAccuracy_features_83191.pdf
just run the command: mkdir -p ../results/
saved plot in file ../results/MeanDecreaseGini_features_83191.pdf
null device 
          1 
