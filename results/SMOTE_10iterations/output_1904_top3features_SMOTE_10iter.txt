TOP_FEATURES_NUMBER = 3
NUM_ITERATIONS = 10
TRAIN_SET_OVERSAMPLING_SYNTHETIC_ROSE == FALSE
Read data from file ../data/pone0210951_s006_dataset_EDITED_IMPUTED.csv
adenoca
large_cell_NEC
mixed
neuroendocrine_tumor
nonsmall_cell
others
poorly_differentiated
sarcomatoid
small_cell
squamous


The target feature is Sepsis
application of dplyr::select()
TRAINING_SET_RATIO = 0.9
Number of classification executions = 10	Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  1
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
Vasoactiveagent                 4.067205e-02           1
Pneumonia                       3.291500e-02           3
AKI                             3.447853e-02           2
PCC                             3.029127e-02           4
sex                             1.888018e-02           7
thrombocytopenia                2.132004e-02           5
WBRT                            1.420915e-02           9
neutropenia                     1.916439e-02           6
CRP                             1.360883e-02          10
RRT                             1.545113e-02           8
CRRT                            1.225749e-02          12
ICU_cause_intensivist           8.611755e-03          17
Death_Cause                     1.321524e-02          11
SOFA_D1                         1.001682e-02          13
cardiovasc                      7.715088e-03          20
prev_wbrt                       9.365541e-03          15
PLT                             8.001139e-03          19
ICU_mortal30                    9.504570e-03          14
APACH_II                        8.019960e-03          18
BIPAP                           6.075588e-03          24
ANC                             9.020322e-03          16
smk_hx                          6.658764e-03          23
DischargefromICU                7.108593e-03          22
PT_percent                      7.207233e-03          21
MV                              5.854033e-03          27
MV_days                         5.870132e-03          26
respfailure                     4.403065e-03          34
Underlying_DM                   5.048216e-03          31
Hospital_death                  6.050751e-03          25
StageNum                        5.508416e-03          28
ICU_Death                       5.253939e-03          30
histologyNum                    5.311791e-03          29
post2011                        4.386874e-03          35
prev_rtx                        4.277267e-03          37
ICU_LOS                         4.818653e-03          32
age                             4.260914e-03          38
WBC                             4.807319e-03          33
Distatntmets                    4.286454e-03          36
Underlying_stroke               2.939744e-03          47
bacteremia                      4.235945e-03          39
timefromdx                      3.317544e-03          43
Cause_Ca_problem                4.188384e-03          40
BUN                             3.598504e-03          41
Albumin                         3.353571e-03          42
postICUCtx                      2.800712e-03          50
hospital_LOS                    3.177916e-03          46
Pre_PS                          3.180115e-03          45
Surgery                         1.850156e-03          65
PaO2FiO2                        2.895930e-03          48
prev_ctx                        3.299268e-03          44
post_icu_survival               2.735279e-03          51
post_dc_days                    2.872484e-03          49
aPTT                            2.647744e-03          53
procalcitonin                   2.485648e-03          56
SAPS_II                         2.589404e-03          55
performance_ICU_DC              2.724979e-03          52
underlying_pulmo                2.630542e-03          54
NewlyDx                         2.320646e-03          59
Hb                              2.148696e-03          61
Refractory                      2.424631e-03          58
DNR                             2.479319e-03          57
prev_ccrt                       1.913788e-03          62
anemia                          2.247012e-03          60
DNR_at_ICU                      1.877963e-03          63
HD                              1.408061e-03          67
performance_hospital_DC         1.870325e-03          64
Intensivist                     1.748581e-03          66
HFNC                            1.248479e-03          69
PoorPS                          1.285873e-03          68
Tracheostomy                    8.376002e-04          73
hypoalbuminemia                 1.209045e-03          70
PDT                             9.031367e-04          72
pulmocomorbid                   9.788082e-04          71
ICUreadmission                  7.243179e-04          74
dx_after_adm                    5.124656e-04          76
prev_gks                        6.884585e-04          75
Underlying_CV                   4.108844e-04          78
ICUCPR                          4.546369e-04          77
ILD                             1.822190e-04          79
prevCPR                         1.218274e-04          80
PrevICUadm                      1.048053e-04          82
neurology                       1.120957e-04          81
preICUDNR                       8.813116e-05          83
other_malignancy                7.145629e-05          84
CTxinICU                        7.595207e-06          86
ECMO                            6.362509e-05          85
postICURT                       5.947730e-06          87
postICUCPR                     -3.984304e-06          88
                                       features MeanDecreaseGini secondColPos
Vasoactiveagent                 Vasoactiveagent      22.54573457            2
Pneumonia                             Pneumonia      28.40040581            1
AKI                                         AKI      16.50327585            5
PCC                                         PCC      19.11189949            3
sex                                         sex      18.99220608            4
thrombocytopenia               thrombocytopenia      12.41584373            6
WBRT                                       WBRT      11.97157814            7
neutropenia                         neutropenia       9.21502797           11
CRP                                         CRP      10.54492632            8
RRT                                         RRT       9.38481370           10
CRRT                                       CRRT       8.94395431           13
ICU_cause_intensivist     ICU_cause_intensivist      10.37816532            9
Death_Cause                         Death_Cause       5.52304126           16
SOFA_D1                                 SOFA_D1       7.08776779           14
cardiovasc                           cardiovasc       9.00951750           12
prev_wbrt                             prev_wbrt       4.73982604           17
PLT                                         PLT       6.29826296           15
ICU_mortal30                       ICU_mortal30       3.73310363           21
APACH_II                               APACH_II       4.03257748           19
BIPAP                                     BIPAP       4.08644278           18
ANC                                         ANC       3.04311923           27
smk_hx                                   smk_hx       3.79736452           20
DischargefromICU               DischargefromICU       3.25149062           24
PT_percent                           PT_percent       2.99263238           28
MV                                           MV       3.49866840           23
MV_days                                 MV_days       3.10021303           26
respfailure                         respfailure       3.71432671           22
Underlying_DM                     Underlying_DM       3.18946277           25
Hospital_death                   Hospital_death       2.48598856           33
StageNum                               StageNum       2.30443681           34
ICU_Death                             ICU_Death       2.27376607           35
histologyNum                       histologyNum       1.98538296           37
post2011                               post2011       2.63047966           31
prev_rtx                               prev_rtx       2.96077526           29
ICU_LOS                                 ICU_LOS       1.92184766           39
age                                         age       2.02490908           36
WBC                                         WBC       1.69317898           43
Distatntmets                       Distatntmets       1.71534263           42
Underlying_stroke             Underlying_stroke       2.50758299           32
bacteremia                           bacteremia       1.84168498           41
timefromdx                           timefromdx       1.93051523           38
Cause_Ca_problem               Cause_Ca_problem       1.68799327           44
BUN                                         BUN       1.62779444           45
Albumin                                 Albumin       1.61477034           46
postICUCtx                           postICUCtx       1.89949621           40
hospital_LOS                       hospital_LOS       1.54314570           47
Pre_PS                                   Pre_PS       1.36094447           49
Surgery                                 Surgery       2.87565954           30
PaO2FiO2                               PaO2FiO2       1.51160132           48
prev_ctx                               prev_ctx       1.14728854           57
post_icu_survival             post_icu_survival       1.28322509           51
post_dc_days                       post_dc_days       1.22988917           55
aPTT                                       aPTT       1.27574511           53
procalcitonin                     procalcitonin       1.30570878           50
SAPS_II                                 SAPS_II       1.27713415           52
performance_ICU_DC           performance_ICU_DC       1.15036642           56
underlying_pulmo               underlying_pulmo       1.27182482           54
NewlyDx                                 NewlyDx       1.13292979           58
Hb                                           Hb       1.12638457           59
Refractory                           Refractory       0.95644119           62
DNR                                         DNR       0.83553440           64
prev_ccrt                             prev_ccrt       1.01297492           61
anemia                                   anemia       0.80366779           66
DNR_at_ICU                           DNR_at_ICU       0.86235076           63
HD                                           HD       1.03902672           60
performance_hospital_DC performance_hospital_DC       0.82519540           65
Intensivist                         Intensivist       0.78099732           68
HFNC                                       HFNC       0.56795166           70
PoorPS                                   PoorPS       0.52017054           72
Tracheostomy                       Tracheostomy       0.78736950           67
hypoalbuminemia                 hypoalbuminemia       0.55225735           71
PDT                                         PDT       0.74082694           69
pulmocomorbid                     pulmocomorbid       0.49077290           73
ICUreadmission                   ICUreadmission       0.37054497           74
dx_after_adm                       dx_after_adm       0.35998313           75
prev_gks                               prev_gks       0.26124295           77
Underlying_CV                     Underlying_CV       0.27368688           76
ICUCPR                                   ICUCPR       0.21845471           78
ILD                                         ILD       0.14185852           79
prevCPR                                 prevCPR       0.10568229           81
PrevICUadm                           PrevICUadm       0.12137927           80
neurology                             neurology       0.08765120           82
preICUDNR                             preICUDNR       0.08738875           83
other_malignancy               other_malignancy       0.06463943           84
CTxinICU                               CTxinICU       0.03882763           85
ECMO                                       ECMO       0.03868275           86
postICURT                             postICURT       0.03084815           87
postICUCPR                           postICUCPR       0.01666136           88
                        posSum finalPos meanDecreaseAccuracyPosition
Vasoactiveagent              3        1                            1
Pneumonia                    4        2                            3
AKI                          7        3                            2
PCC                          7        4                            4
sex                         11        5                            7
thrombocytopenia            11        6                            5
WBRT                        16        7                            9
neutropenia                 17        8                            6
CRP                         18        9                           10
RRT                         18       10                            8
CRRT                        25       11                           12
ICU_cause_intensivist       26       12                           17
Death_Cause                 27       13                           11
SOFA_D1                     27       14                           13
cardiovasc                  32       15                           20
prev_wbrt                   32       16                           15
PLT                         34       17                           19
ICU_mortal30                35       18                           14
APACH_II                    37       19                           18
BIPAP                       42       20                           24
ANC                         43       21                           16
smk_hx                      43       22                           23
DischargefromICU            46       23                           22
PT_percent                  49       24                           21
MV                          50       25                           27
MV_days                     52       26                           26
respfailure                 56       27                           34
Underlying_DM               56       28                           31
Hospital_death              58       29                           25
StageNum                    62       30                           28
ICU_Death                   65       31                           30
histologyNum                66       32                           29
post2011                    66       33                           35
prev_rtx                    66       34                           37
ICU_LOS                     71       35                           32
age                         74       36                           38
WBC                         76       37                           33
Distatntmets                78       38                           36
Underlying_stroke           79       39                           47
bacteremia                  80       40                           39
timefromdx                  81       41                           43
Cause_Ca_problem            84       42                           40
BUN                         86       43                           41
Albumin                     88       44                           42
postICUCtx                  90       45                           50
hospital_LOS                93       46                           46
Pre_PS                      94       47                           45
Surgery                     95       48                           65
PaO2FiO2                    96       49                           48
prev_ctx                   101       50                           44
post_icu_survival          102       51                           51
post_dc_days               104       52                           49
aPTT                       106       53                           53
procalcitonin              106       54                           56
SAPS_II                    107       55                           55
performance_ICU_DC         108       56                           52
underlying_pulmo           108       57                           54
NewlyDx                    117       58                           59
Hb                         120       59                           61
Refractory                 120       60                           58
DNR                        121       61                           57
prev_ccrt                  123       62                           62
anemia                     126       63                           60
DNR_at_ICU                 126       64                           63
HD                         127       65                           67
performance_hospital_DC    129       66                           64
Intensivist                134       67                           66
HFNC                       139       68                           69
PoorPS                     140       69                           68
Tracheostomy               140       70                           73
hypoalbuminemia            141       71                           70
PDT                        141       72                           72
pulmocomorbid              144       73                           71
ICUreadmission             148       74                           74
dx_after_adm               151       75                           76
prev_gks                   152       76                           75
Underlying_CV              154       77                           78
ICUCPR                     155       78                           77
ILD                        158       79                           79
prevCPR                    161       80                           80
PrevICUadm                 162       81                           82
neurology                  163       82                           81
preICUDNR                  166       83                           83
other_malignancy           168       84                           84
CTxinICU                   171       85                           86
ECMO                       171       86                           85
postICURT                  174       87                           87
postICUCPR                 176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
Vasoactiveagent                                2                  3
Pneumonia                                      1                  4
AKI                                            5                  7
PCC                                            3                  7
sex                                            4                 11
thrombocytopenia                               6                 11
WBRT                                           7                 16
neutropenia                                   11                 17
CRP                                            8                 18
RRT                                           10                 18
CRRT                                          13                 25
ICU_cause_intensivist                          9                 26
Death_Cause                                   16                 27
SOFA_D1                                       14                 27
cardiovasc                                    12                 32
prev_wbrt                                     17                 32
PLT                                           15                 34
ICU_mortal30                                  21                 35
APACH_II                                      19                 37
BIPAP                                         18                 42
ANC                                           27                 43
smk_hx                                        20                 43
DischargefromICU                              24                 46
PT_percent                                    28                 49
MV                                            23                 50
MV_days                                       26                 52
respfailure                                   22                 56
Underlying_DM                                 25                 56
Hospital_death                                33                 58
StageNum                                      34                 62
ICU_Death                                     35                 65
histologyNum                                  37                 66
post2011                                      31                 66
prev_rtx                                      29                 66
ICU_LOS                                       39                 71
age                                           36                 74
WBC                                           43                 76
Distatntmets                                  42                 78
Underlying_stroke                             32                 79
bacteremia                                    41                 80
timefromdx                                    38                 81
Cause_Ca_problem                              44                 84
BUN                                           45                 86
Albumin                                       46                 88
postICUCtx                                    40                 90
hospital_LOS                                  47                 93
Pre_PS                                        49                 94
Surgery                                       30                 95
PaO2FiO2                                      48                 96
prev_ctx                                      57                101
post_icu_survival                             51                102
post_dc_days                                  55                104
aPTT                                          53                106
procalcitonin                                 50                106
SAPS_II                                       52                107
performance_ICU_DC                            56                108
underlying_pulmo                              54                108
NewlyDx                                       58                117
Hb                                            59                120
Refractory                                    62                120
DNR                                           64                121
prev_ccrt                                     61                123
anemia                                        66                126
DNR_at_ICU                                    63                126
HD                                            60                127
performance_hospital_DC                       65                129
Intensivist                                   68                134
HFNC                                          70                139
PoorPS                                        72                140
Tracheostomy                                  67                140
hypoalbuminemia                               71                141
PDT                                           69                141
pulmocomorbid                                 73                144
ICUreadmission                                74                148
dx_after_adm                                  75                151
prev_gks                                      77                152
Underlying_CV                                 76                154
ICUCPR                                        78                155
ILD                                           79                158
prevCPR                                       81                161
PrevICUadm                                    80                162
neurology                                     82                163
preICUDNR                                     83                166
other_malignancy                              84                168
CTxinICU                                      85                171
ECMO                                          86                171
postICURT                                     87                174
postICUCPR                                    88                176
number of selected top features: 3
selected top features: 
[1] "Vasoactiveagent" "Pneumonia"       "AKI"            

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.8106111
ROC AUC 		0.9131944

Brier score =  0.143  (best value: 0; worst value: 1)

TOTAL:

 FN =  0  /  8 	 (truth == 1) & (prediction < threshold)
 TP =  8  /  8 	 (truth == 1) & (prediction >= threshold)

 FP =  7  /  18 	 (truth == 0) & (prediction >= threshold)
 TN =  11  /  18 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.571 	 0.696 	 	0.731 	 	1.000 	 	0.611		0.533	 	1.000	 	0.811	0.913

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  2
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
neutropenia                     6.869937e-02           1
thrombocytopenia                4.666046e-02           2
ANC                             3.805625e-02           3
aPTT                            2.258099e-02           4
PT_percent                      1.561140e-02           6
PLT                             1.631145e-02           5
Hospital_death                  1.511305e-02           7
CRRT                            1.351669e-02           8
Albumin                         1.026302e-02          14
Vasoactiveagent                 1.270413e-02           9
APACH_II                        1.106928e-02          12
underlying_pulmo                1.113937e-02          11
bacteremia                      1.155565e-02          10
Death_Cause                     1.083267e-02          13
ICU_mortal30                    9.845750e-03          16
ICU_cause_intensivist           7.358466e-03          21
Hb                              9.909646e-03          15
SOFA_D1                         7.607081e-03          20
WBC                             9.225714e-03          17
AKI                             8.322580e-03          18
postICUCtx                      5.533250e-03          24
cardiovasc                      5.254167e-03          26
CRP                             7.622573e-03          19
hypoalbuminemia                 5.838390e-03          23
BUN                             7.337034e-03          22
CTxinICU                        4.508885e-03          31
age                             5.460906e-03          25
Intensivist                     5.175594e-03          27
pulmocomorbid                   4.969916e-03          30
MV_days                         4.391236e-03          32
Cause_Ca_problem                5.016865e-03          29
DNR                             5.130305e-03          28
timefromdx                      3.919898e-03          34
Pneumonia                       4.173598e-03          33
Refractory                      3.377704e-03          37
PaO2FiO2                        3.801062e-03          35
SAPS_II                         3.138994e-03          38
prev_ccrt                       2.791292e-03          41
neurology                       3.707546e-03          36
ICU_LOS                         2.936856e-03          40
BIPAP                           2.709534e-03          42
StageNum                        2.989920e-03          39
hospital_LOS                    2.524171e-03          44
ILD                             2.331831e-03          47
HFNC                            2.482242e-03          45
ECMO                            2.050470e-03          50
post_dc_days                    2.230370e-03          48
post_icu_survival               2.064915e-03          49
prev_wbrt                       2.641190e-03          43
Distatntmets                    2.440668e-03          46
DNR_at_ICU                      1.984147e-03          51
procalcitonin                   1.622088e-03          58
WBRT                            1.795639e-03          54
Underlying_DM                   1.541517e-03          60
Pre_PS                          1.819817e-03          53
histologyNum                    1.757593e-03          55
NewlyDx                         1.826970e-03          52
ICU_Death                       1.707008e-03          57
RRT                             1.181934e-03          69
DischargefromICU                1.716645e-03          56
Tracheostomy                    1.303795e-03          66
dx_after_adm                    1.311516e-03          65
Surgery                         1.609493e-03          59
performance_ICU_DC              1.407444e-03          62
other_malignancy                1.161632e-03          70
ICUreadmission                  1.210503e-03          67
performance_hospital_DC         1.462113e-03          61
post2011                        1.347856e-03          63
prev_rtx                        1.187910e-03          68
PoorPS                          1.337114e-03          64
prev_gks                        9.401354e-04          74
sex                             1.055602e-03          72
PCC                             1.067149e-03          71
anemia                          1.008212e-03          73
smk_hx                          9.272659e-04          75
MV                              8.211897e-04          76
prevCPR                         5.995474e-04          78
prev_ctx                        5.973276e-04          79
Underlying_CV                   6.002560e-04          77
respfailure                     5.769152e-04          80
PDT                             3.547764e-04          82
ICUCPR                          3.878732e-04          81
preICUDNR                       3.335645e-04          83
HD                              9.191948e-05          85
Underlying_stroke               1.484551e-04          84
PrevICUadm                      5.552508e-05          86
postICUCPR                      0.000000e+00          87
postICURT                       0.000000e+00          88
                                       features MeanDecreaseGini secondColPos
neutropenia                         neutropenia     42.608365746            1
thrombocytopenia               thrombocytopenia     36.932756330            2
ANC                                         ANC     23.487547279            3
aPTT                                       aPTT     16.639661495            4
PT_percent                           PT_percent     13.646334464            5
PLT                                         PLT     10.225628429            8
Hospital_death                   Hospital_death     10.555574117            7
CRRT                                       CRRT      9.293915295           10
Albumin                                 Albumin     13.137783401            6
Vasoactiveagent                 Vasoactiveagent      8.213958278           12
APACH_II                               APACH_II      8.270364604           11
underlying_pulmo               underlying_pulmo      6.898582463           14
bacteremia                           bacteremia      5.703285988           17
Death_Cause                         Death_Cause      6.380999658           15
ICU_mortal30                       ICU_mortal30      7.083811774           13
ICU_cause_intensivist     ICU_cause_intensivist      9.708794092            9
Hb                                           Hb      5.664111754           18
SOFA_D1                                 SOFA_D1      5.728002802           16
WBC                                         WBC      3.655603010           23
AKI                                         AKI      3.483239097           25
postICUCtx                           postICUCtx      4.755507206           20
cardiovasc                           cardiovasc      5.593548658           19
CRP                                         CRP      3.394039076           26
hypoalbuminemia                 hypoalbuminemia      3.791252471           22
BUN                                         BUN      3.605905633           24
CTxinICU                               CTxinICU      4.041836964           21
age                                         age      2.242887676           30
Intensivist                         Intensivist      2.374003913           29
pulmocomorbid                     pulmocomorbid      2.451302415           28
MV_days                                 MV_days      2.549912194           27
Cause_Ca_problem               Cause_Ca_problem      2.138994918           32
DNR                                         DNR      1.743447091           36
timefromdx                           timefromdx      2.230538431           31
Pneumonia                             Pneumonia      2.078556221           33
Refractory                           Refractory      1.977708869           34
PaO2FiO2                               PaO2FiO2      1.593827600           39
SAPS_II                                 SAPS_II      1.742906382           37
prev_ccrt                             prev_ccrt      1.977415945           35
neurology                             neurology      1.544076481           41
ICU_LOS                                 ICU_LOS      1.634235571           38
BIPAP                                     BIPAP      1.590448647           40
StageNum                               StageNum      1.471144322           43
hospital_LOS                       hospital_LOS      1.499448320           42
ILD                                         ILD      1.437897551           44
HFNC                                       HFNC      1.213745884           49
ECMO                                       ECMO      1.430146527           45
post_dc_days                       post_dc_days      1.249073372           48
post_icu_survival             post_icu_survival      1.128824472           50
prev_wbrt                             prev_wbrt      0.892259817           56
Distatntmets                       Distatntmets      1.030860174           54
DNR_at_ICU                           DNR_at_ICU      1.045964150           52
procalcitonin                     procalcitonin      1.272483123           47
WBRT                                       WBRT      1.094501390           51
Underlying_DM                     Underlying_DM      1.409028000           46
Pre_PS                                   Pre_PS      1.018849557           55
histologyNum                       histologyNum      0.884108217           57
NewlyDx                                 NewlyDx      0.844277619           62
ICU_Death                             ICU_Death      0.866502946           61
RRT                                         RRT      1.042616840           53
DischargefromICU               DischargefromICU      0.696913641           68
Tracheostomy                       Tracheostomy      0.878655251           58
dx_after_adm                       dx_after_adm      0.868132757           60
Surgery                                 Surgery      0.731395011           66
performance_ICU_DC           performance_ICU_DC      0.747001960           64
other_malignancy               other_malignancy      0.877190762           59
ICUreadmission                   ICUreadmission      0.800496382           63
performance_hospital_DC performance_hospital_DC      0.665601621           70
post2011                               post2011      0.668235170           69
prev_rtx                               prev_rtx      0.744074221           65
PoorPS                                   PoorPS      0.585994747           71
prev_gks                               prev_gks      0.709628561           67
sex                                         sex      0.554704516           72
PCC                                         PCC      0.465387362           74
anemia                                   anemia      0.469047887           73
smk_hx                                   smk_hx      0.463513451           75
MV                                           MV      0.393505777           78
prevCPR                                 prevCPR      0.457702438           76
prev_ctx                               prev_ctx      0.415931978           77
Underlying_CV                     Underlying_CV      0.297449629           81
respfailure                         respfailure      0.317666614           80
PDT                                         PDT      0.335104613           79
ICUCPR                                   ICUCPR      0.259062961           82
preICUDNR                             preICUDNR      0.190839325           83
HD                                           HD      0.096708123           84
Underlying_stroke             Underlying_stroke      0.083728673           85
PrevICUadm                           PrevICUadm      0.073337556           86
postICUCPR                           postICUCPR      0.003210494           87
postICURT                             postICURT      0.000000000           88
                        posSum finalPos meanDecreaseAccuracyPosition
neutropenia                  2        1                            1
thrombocytopenia             4        2                            2
ANC                          6        3                            3
aPTT                         8        4                            4
PT_percent                  11        5                            6
PLT                         13        6                            5
Hospital_death              14        7                            7
CRRT                        18        8                            8
Albumin                     20        9                           14
Vasoactiveagent             21       10                            9
APACH_II                    23       11                           12
underlying_pulmo            25       12                           11
bacteremia                  27       13                           10
Death_Cause                 28       14                           13
ICU_mortal30                29       15                           16
ICU_cause_intensivist       30       16                           21
Hb                          33       17                           15
SOFA_D1                     36       18                           20
WBC                         40       19                           17
AKI                         43       20                           18
postICUCtx                  44       21                           24
cardiovasc                  45       22                           26
CRP                         45       23                           19
hypoalbuminemia             45       24                           23
BUN                         46       25                           22
CTxinICU                    52       26                           31
age                         55       27                           25
Intensivist                 56       28                           27
pulmocomorbid               58       29                           30
MV_days                     59       30                           32
Cause_Ca_problem            61       31                           29
DNR                         64       32                           28
timefromdx                  65       33                           34
Pneumonia                   66       34                           33
Refractory                  71       35                           37
PaO2FiO2                    74       36                           35
SAPS_II                     75       37                           38
prev_ccrt                   76       38                           41
neurology                   77       39                           36
ICU_LOS                     78       40                           40
BIPAP                       82       41                           42
StageNum                    82       42                           39
hospital_LOS                86       43                           44
ILD                         91       44                           47
HFNC                        94       45                           45
ECMO                        95       46                           50
post_dc_days                96       47                           48
post_icu_survival           99       48                           49
prev_wbrt                   99       49                           43
Distatntmets               100       50                           46
DNR_at_ICU                 103       51                           51
procalcitonin              105       52                           58
WBRT                       105       53                           54
Underlying_DM              106       54                           60
Pre_PS                     108       55                           53
histologyNum               112       56                           55
NewlyDx                    114       57                           52
ICU_Death                  118       58                           57
RRT                        122       59                           69
DischargefromICU           124       60                           56
Tracheostomy               124       61                           66
dx_after_adm               125       62                           65
Surgery                    125       63                           59
performance_ICU_DC         126       64                           62
other_malignancy           129       65                           70
ICUreadmission             130       66                           67
performance_hospital_DC    131       67                           61
post2011                   132       68                           63
prev_rtx                   133       69                           68
PoorPS                     135       70                           64
prev_gks                   141       71                           74
sex                        144       72                           72
PCC                        145       73                           71
anemia                     146       74                           73
smk_hx                     150       75                           75
MV                         154       76                           76
prevCPR                    154       77                           78
prev_ctx                   156       78                           79
Underlying_CV              158       79                           77
respfailure                160       80                           80
PDT                        161       81                           82
ICUCPR                     163       82                           81
preICUDNR                  166       83                           83
HD                         169       84                           85
Underlying_stroke          169       85                           84
PrevICUadm                 172       86                           86
postICUCPR                 174       87                           87
postICURT                  176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
neutropenia                                    1                  2
thrombocytopenia                               2                  4
ANC                                            3                  6
aPTT                                           4                  8
PT_percent                                     5                 11
PLT                                            8                 13
Hospital_death                                 7                 14
CRRT                                          10                 18
Albumin                                        6                 20
Vasoactiveagent                               12                 21
APACH_II                                      11                 23
underlying_pulmo                              14                 25
bacteremia                                    17                 27
Death_Cause                                   15                 28
ICU_mortal30                                  13                 29
ICU_cause_intensivist                          9                 30
Hb                                            18                 33
SOFA_D1                                       16                 36
WBC                                           23                 40
AKI                                           25                 43
postICUCtx                                    20                 44
cardiovasc                                    19                 45
CRP                                           26                 45
hypoalbuminemia                               22                 45
BUN                                           24                 46
CTxinICU                                      21                 52
age                                           30                 55
Intensivist                                   29                 56
pulmocomorbid                                 28                 58
MV_days                                       27                 59
Cause_Ca_problem                              32                 61
DNR                                           36                 64
timefromdx                                    31                 65
Pneumonia                                     33                 66
Refractory                                    34                 71
PaO2FiO2                                      39                 74
SAPS_II                                       37                 75
prev_ccrt                                     35                 76
neurology                                     41                 77
ICU_LOS                                       38                 78
BIPAP                                         40                 82
StageNum                                      43                 82
hospital_LOS                                  42                 86
ILD                                           44                 91
HFNC                                          49                 94
ECMO                                          45                 95
post_dc_days                                  48                 96
post_icu_survival                             50                 99
prev_wbrt                                     56                 99
Distatntmets                                  54                100
DNR_at_ICU                                    52                103
procalcitonin                                 47                105
WBRT                                          51                105
Underlying_DM                                 46                106
Pre_PS                                        55                108
histologyNum                                  57                112
NewlyDx                                       62                114
ICU_Death                                     61                118
RRT                                           53                122
DischargefromICU                              68                124
Tracheostomy                                  58                124
dx_after_adm                                  60                125
Surgery                                       66                125
performance_ICU_DC                            64                126
other_malignancy                              59                129
ICUreadmission                                63                130
performance_hospital_DC                       70                131
post2011                                      69                132
prev_rtx                                      65                133
PoorPS                                        71                135
prev_gks                                      67                141
sex                                           72                144
PCC                                           74                145
anemia                                        73                146
smk_hx                                        75                150
MV                                            78                154
prevCPR                                       76                154
prev_ctx                                      77                156
Underlying_CV                                 81                158
respfailure                                   80                160
PDT                                           79                161
ICUCPR                                        82                163
preICUDNR                                     83                166
HD                                            84                169
Underlying_stroke                             85                169
PrevICUadm                                    86                172
postICUCPR                                    87                174
postICURT                                     88                176
number of selected top features: 3
selected top features: 
[1] "neutropenia"      "thrombocytopenia" "ANC"             

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.6237936
ROC AUC 		0.7333333

Brier score =  0.113  (best value: 0; worst value: 1)

TOTAL:

 FN =  2  /  5 	 (truth == 1) & (prediction < threshold)
 TP =  3  /  5 	 (truth == 1) & (prediction >= threshold)

 FP =  1  /  21 	 (truth == 0) & (prediction >= threshold)
 TN =  20  /  21 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.603 	 0.667 	 	0.885 	 	0.600 	 	0.952		0.750	 	0.909	 	0.624	0.733

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  3
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
neutropenia                     8.583562e-02           1
Vasoactiveagent                 5.571237e-02           2
ANC                             2.159340e-02           3
PDT                             1.469710e-02           5
CRP                             1.505670e-02           4
ICU_cause_intensivist           1.262745e-02           9
CRRT                            1.419726e-02           7
BIPAP                           1.195689e-02          10
APACH_II                        1.452765e-02           6
bacteremia                      9.262708e-03          13
SOFA_D1                         1.363844e-02           8
Hb                              8.036015e-03          16
underlying_pulmo                9.588313e-03          12
thrombocytopenia                8.718607e-03          15
AKI                             1.050896e-02          11
Underlying_DM                   6.082453e-03          23
DNR_at_ICU                      7.811057e-03          17
procalcitonin                   6.709938e-03          19
WBC                             7.278011e-03          18
Pneumonia                       8.970811e-03          14
cardiovasc                      5.700685e-03          26
prev_ctx                        5.186500e-03          32
SAPS_II                         6.219588e-03          20
PCC                             5.325859e-03          29
BUN                             6.193176e-03          21
Cause_Ca_problem                5.678195e-03          27
Hospital_death                  6.031735e-03          24
aPTT                            5.208270e-03          31
pulmocomorbid                   5.539565e-03          28
prev_wbrt                       5.813930e-03          25
performance_hospital_DC         4.812453e-03          33
Death_Cause                     6.097734e-03          22
Albumin                         4.561674e-03          34
PT_percent                      5.251517e-03          30
ILD                             4.226564e-03          36
performance_ICU_DC              3.897626e-03          38
neurology                       2.358224e-03          51
DNR                             4.459753e-03          35
DischargefromICU                3.212850e-03          42
age                             4.017072e-03          37
PLT                             3.850701e-03          39
NewlyDx                         3.410522e-03          41
PaO2FiO2                        3.465033e-03          40
anemia                          2.506842e-03          49
MV_days                         2.880223e-03          44
ICU_mortal30                    2.882213e-03          43
StageNum                        2.607371e-03          47
ICU_LOS                         2.774535e-03          45
Distatntmets                    2.662293e-03          46
timefromdx                      2.347865e-03          52
PrevICUadm                      1.939586e-03          57
histologyNum                    2.579749e-03          48
Pre_PS                          2.183542e-03          53
hospital_LOS                    2.115490e-03          54
hypoalbuminemia                 2.453414e-03          50
prevCPR                         1.295524e-03          67
HFNC                            2.110007e-03          55
postICUCtx                      1.586009e-03          62
post_dc_days                    1.701097e-03          58
post_icu_survival               2.040856e-03          56
prev_rtx                        1.694019e-03          59
other_malignancy                1.501063e-03          63
Surgery                         1.650497e-03          61
ICU_Death                       1.666014e-03          60
PoorPS                          1.306322e-03          66
Refractory                      1.452721e-03          64
sex                             1.257715e-03          69
Intensivist                     1.415200e-03          65
respfailure                     1.261017e-03          68
ICUreadmission                  7.511087e-04          74
dx_after_adm                    7.952992e-04          73
post2011                        1.105594e-03          71
prev_ccrt                       1.125216e-03          70
MV                              9.992187e-04          72
postICURT                       7.452928e-04          75
CTxinICU                        6.127457e-04          77
smk_hx                          7.073652e-04          76
HD                              5.633754e-04          78
preICUDNR                       3.213027e-04          80
ICUCPR                          4.452245e-04          79
WBRT                            2.764144e-04          82
RRT                             3.187420e-04          81
ECMO                            2.477456e-04          83
Underlying_CV                   1.518441e-04          85
Underlying_stroke               1.969158e-04          84
postICUCPR                      1.269310e-04          86
Tracheostomy                    1.149379e-04          87
prev_gks                        9.216403e-05          88
                                       features MeanDecreaseGini secondColPos
neutropenia                         neutropenia      47.02445520            1
Vasoactiveagent                 Vasoactiveagent      40.44974486            2
ANC                                         ANC      13.12263108            4
PDT                                         PDT      14.75136684            3
CRP                                         CRP      10.00801668            7
ICU_cause_intensivist     ICU_cause_intensivist      12.86780219            5
CRRT                                       CRRT       9.64399121            8
BIPAP                                     BIPAP      11.91426580            6
APACH_II                               APACH_II       8.27048788           12
bacteremia                           bacteremia       9.00830412            9
SOFA_D1                                 SOFA_D1       6.71766300           14
Hb                                           Hb       8.54579042           11
underlying_pulmo               underlying_pulmo       6.44015779           15
thrombocytopenia               thrombocytopenia       6.03764756           17
AKI                                         AKI       3.81286958           22
Underlying_DM                     Underlying_DM       8.81179740           10
DNR_at_ICU                           DNR_at_ICU       4.54342825           19
procalcitonin                     procalcitonin       4.73390925           18
WBC                                         WBC       4.15241265           20
Pneumonia                             Pneumonia       3.06865850           25
cardiovasc                           cardiovasc       6.43146434           16
prev_ctx                               prev_ctx       8.05669793           13
SAPS_II                                 SAPS_II       2.68640463           28
PCC                                         PCC       4.11592655           21
BUN                                         BUN       2.31866637           32
Cause_Ca_problem               Cause_Ca_problem       2.73498713           26
Hospital_death                   Hospital_death       2.38838973           30
aPTT                                       aPTT       3.09962134           24
pulmocomorbid                     pulmocomorbid       2.51382726           29
prev_wbrt                             prev_wbrt       2.18788733           33
performance_hospital_DC performance_hospital_DC       2.72532438           27
Death_Cause                         Death_Cause       1.81940391           39
Albumin                                 Albumin       2.38039449           31
PT_percent                           PT_percent       1.90384855           37
ILD                                         ILD       2.03494715           35
performance_ICU_DC           performance_ICU_DC       2.15294233           34
neurology                             neurology       3.10650782           23
DNR                                         DNR       1.81226104           40
DischargefromICU               DischargefromICU       1.97615713           36
age                                         age       1.58436378           43
PLT                                         PLT       1.68151146           41
NewlyDx                                 NewlyDx       1.64658183           42
PaO2FiO2                               PaO2FiO2       1.41910640           46
anemia                                   anemia       1.82400423           38
MV_days                                 MV_days       1.37473570           49
ICU_mortal30                       ICU_mortal30       1.31223846           51
StageNum                               StageNum       1.40144114           47
ICU_LOS                                 ICU_LOS       1.32289213           50
Distatntmets                       Distatntmets       1.20847354           53
timefromdx                           timefromdx       1.40010139           48
PrevICUadm                           PrevICUadm       1.45803365           45
histologyNum                       histologyNum       1.12995857           56
Pre_PS                                   Pre_PS       1.21324919           52
hospital_LOS                       hospital_LOS       1.19635907           54
hypoalbuminemia                 hypoalbuminemia       0.99245883           59
prevCPR                                 prevCPR       1.56780542           44
HFNC                                       HFNC       0.99618995           58
postICUCtx                           postICUCtx       1.15346132           55
post_dc_days                       post_dc_days       0.94008086           61
post_icu_survival             post_icu_survival       0.90611068           63
prev_rtx                               prev_rtx       0.98798753           60
other_malignancy               other_malignancy       1.02208036           57
Surgery                                 Surgery       0.92671991           62
ICU_Death                             ICU_Death       0.72225082           66
PoorPS                                   PoorPS       0.80949745           64
Refractory                           Refractory       0.64632314           68
sex                                         sex       0.76288194           65
Intensivist                         Intensivist       0.61843712           70
respfailure                         respfailure       0.56956482           71
ICUreadmission                   ICUreadmission       0.68670172           67
dx_after_adm                       dx_after_adm       0.64632095           69
post2011                               post2011       0.55771263           72
prev_ccrt                             prev_ccrt       0.53547204           74
MV                                           MV       0.55577957           73
postICURT                             postICURT       0.41189747           76
CTxinICU                               CTxinICU       0.41391392           75
smk_hx                                   smk_hx       0.40295014           77
HD                                           HD       0.37362239           78
preICUDNR                             preICUDNR       0.34819262           80
ICUCPR                                   ICUCPR       0.23540148           82
WBRT                                       WBRT       0.36267860           79
RRT                                         RRT       0.28262040           81
ECMO                                       ECMO       0.18470235           83
Underlying_CV                     Underlying_CV       0.14114116           84
Underlying_stroke             Underlying_stroke       0.11767229           85
postICUCPR                           postICUCPR       0.09613788           87
Tracheostomy                       Tracheostomy       0.10636149           86
prev_gks                               prev_gks       0.06476655           88
                        posSum finalPos meanDecreaseAccuracyPosition
neutropenia                  2        1                            1
Vasoactiveagent              4        2                            2
ANC                          7        3                            3
PDT                          8        4                            5
CRP                         11        5                            4
ICU_cause_intensivist       14        6                            9
CRRT                        15        7                            7
BIPAP                       16        8                           10
APACH_II                    18        9                            6
bacteremia                  22       10                           13
SOFA_D1                     22       11                            8
Hb                          27       12                           16
underlying_pulmo            27       13                           12
thrombocytopenia            32       14                           15
AKI                         33       15                           11
Underlying_DM               33       16                           23
DNR_at_ICU                  36       17                           17
procalcitonin               37       18                           19
WBC                         38       19                           18
Pneumonia                   39       20                           14
cardiovasc                  42       21                           26
prev_ctx                    45       22                           32
SAPS_II                     48       23                           20
PCC                         50       24                           29
BUN                         53       25                           21
Cause_Ca_problem            53       26                           27
Hospital_death              54       27                           24
aPTT                        55       28                           31
pulmocomorbid               57       29                           28
prev_wbrt                   58       30                           25
performance_hospital_DC     60       31                           33
Death_Cause                 61       32                           22
Albumin                     65       33                           34
PT_percent                  67       34                           30
ILD                         71       35                           36
performance_ICU_DC          72       36                           38
neurology                   74       37                           51
DNR                         75       38                           35
DischargefromICU            78       39                           42
age                         80       40                           37
PLT                         80       41                           39
NewlyDx                     83       42                           41
PaO2FiO2                    86       43                           40
anemia                      87       44                           49
MV_days                     93       45                           44
ICU_mortal30                94       46                           43
StageNum                    94       47                           47
ICU_LOS                     95       48                           45
Distatntmets                99       49                           46
timefromdx                 100       50                           52
PrevICUadm                 102       51                           57
histologyNum               104       52                           48
Pre_PS                     105       53                           53
hospital_LOS               108       54                           54
hypoalbuminemia            109       55                           50
prevCPR                    111       56                           67
HFNC                       113       57                           55
postICUCtx                 117       58                           62
post_dc_days               119       59                           58
post_icu_survival          119       60                           56
prev_rtx                   119       61                           59
other_malignancy           120       62                           63
Surgery                    123       63                           61
ICU_Death                  126       64                           60
PoorPS                     130       65                           66
Refractory                 132       66                           64
sex                        134       67                           69
Intensivist                135       68                           65
respfailure                139       69                           68
ICUreadmission             141       70                           74
dx_after_adm               142       71                           73
post2011                   143       72                           71
prev_ccrt                  144       73                           70
MV                         145       74                           72
postICURT                  151       75                           75
CTxinICU                   152       76                           77
smk_hx                     153       77                           76
HD                         156       78                           78
preICUDNR                  160       79                           80
ICUCPR                     161       80                           79
WBRT                       161       81                           82
RRT                        162       82                           81
ECMO                       166       83                           83
Underlying_CV              169       84                           85
Underlying_stroke          169       85                           84
postICUCPR                 173       86                           86
Tracheostomy               173       87                           87
prev_gks                   176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
neutropenia                                    1                  2
Vasoactiveagent                                2                  4
ANC                                            4                  7
PDT                                            3                  8
CRP                                            7                 11
ICU_cause_intensivist                          5                 14
CRRT                                           8                 15
BIPAP                                          6                 16
APACH_II                                      12                 18
bacteremia                                     9                 22
SOFA_D1                                       14                 22
Hb                                            11                 27
underlying_pulmo                              15                 27
thrombocytopenia                              17                 32
AKI                                           22                 33
Underlying_DM                                 10                 33
DNR_at_ICU                                    19                 36
procalcitonin                                 18                 37
WBC                                           20                 38
Pneumonia                                     25                 39
cardiovasc                                    16                 42
prev_ctx                                      13                 45
SAPS_II                                       28                 48
PCC                                           21                 50
BUN                                           32                 53
Cause_Ca_problem                              26                 53
Hospital_death                                30                 54
aPTT                                          24                 55
pulmocomorbid                                 29                 57
prev_wbrt                                     33                 58
performance_hospital_DC                       27                 60
Death_Cause                                   39                 61
Albumin                                       31                 65
PT_percent                                    37                 67
ILD                                           35                 71
performance_ICU_DC                            34                 72
neurology                                     23                 74
DNR                                           40                 75
DischargefromICU                              36                 78
age                                           43                 80
PLT                                           41                 80
NewlyDx                                       42                 83
PaO2FiO2                                      46                 86
anemia                                        38                 87
MV_days                                       49                 93
ICU_mortal30                                  51                 94
StageNum                                      47                 94
ICU_LOS                                       50                 95
Distatntmets                                  53                 99
timefromdx                                    48                100
PrevICUadm                                    45                102
histologyNum                                  56                104
Pre_PS                                        52                105
hospital_LOS                                  54                108
hypoalbuminemia                               59                109
prevCPR                                       44                111
HFNC                                          58                113
postICUCtx                                    55                117
post_dc_days                                  61                119
post_icu_survival                             63                119
prev_rtx                                      60                119
other_malignancy                              57                120
Surgery                                       62                123
ICU_Death                                     66                126
PoorPS                                        64                130
Refractory                                    68                132
sex                                           65                134
Intensivist                                   70                135
respfailure                                   71                139
ICUreadmission                                67                141
dx_after_adm                                  69                142
post2011                                      72                143
prev_ccrt                                     74                144
MV                                            73                145
postICURT                                     76                151
CTxinICU                                      75                152
smk_hx                                        77                153
HD                                            78                156
preICUDNR                                     80                160
ICUCPR                                        82                161
WBRT                                          79                161
RRT                                           81                162
ECMO                                          83                166
Underlying_CV                                 84                169
Underlying_stroke                             85                169
postICUCPR                                    87                173
Tracheostomy                                  86                173
prev_gks                                      88                176
number of selected top features: 3
selected top features: 
[1] "neutropenia"     "Vasoactiveagent" "ANC"            

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.7925402
ROC AUC 		0.8625

Brier score =  0.171  (best value: 0; worst value: 1)

TOTAL:

 FN =  0  /  6 	 (truth == 1) & (prediction < threshold)
 TP =  6  /  6 	 (truth == 1) & (prediction >= threshold)

 FP =  9  /  20 	 (truth == 0) & (prediction >= threshold)
 TN =  11  /  20 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.469 	 0.571 	 	0.654 	 	1.000 	 	0.550		0.400	 	1.000	 	0.793	0.863

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  4
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
CRRT                            3.001695e-02           2
Death_Cause                     3.400921e-02           1
ICU_mortal30                    2.554525e-02           4
underlying_pulmo                2.801989e-02           3
bacteremia                      1.647399e-02           8
dx_after_adm                    1.598704e-02           9
ICU_Death                       1.881603e-02           7
AKI                             2.095931e-02           5
SOFA_D1                         1.474787e-02          10
Vasoactiveagent                 1.956470e-02           6
neurology                       1.223538e-02          13
pulmocomorbid                   1.295721e-02          11
ILD                             1.112285e-02          16
ICU_cause_intensivist           1.153618e-02          15
prev_wbrt                       1.217315e-02          14
ANC                             1.287953e-02          12
RRT                             9.731389e-03          19
WBC                             1.075078e-02          17
age                             8.420826e-03          21
PT_percent                      1.046612e-02          18
Hospital_death                  7.557985e-03          24
neutropenia                     8.389090e-03          22
CRP                             9.087793e-03          20
DischargefromICU                7.320092e-03          25
postICUCtx                      6.353198e-03          28
procalcitonin                   7.842061e-03          23
BUN                             6.528074e-03          27
Underlying_DM                   5.179884e-03          33
respfailure                     3.819563e-03          40
Albumin                         6.803387e-03          26
APACH_II                        4.735861e-03          36
hypoalbuminemia                 5.798761e-03          30
postICURT                       4.545473e-03          37
aPTT                            4.837917e-03          35
PLT                             5.716198e-03          32
Pneumonia                       6.161376e-03          29
Cause_Ca_problem                5.777138e-03          31
thrombocytopenia                4.927695e-03          34
Hb                              4.115487e-03          39
Tracheostomy                    3.191669e-03          45
hospital_LOS                    4.354513e-03          38
performance_hospital_DC         3.730536e-03          41
post_icu_survival               3.656789e-03          42
timefromdx                      3.264554e-03          44
BIPAP                           2.863759e-03          50
SAPS_II                         2.980457e-03          48
post_dc_days                    3.509909e-03          43
prev_gks                        2.605155e-03          53
MV_days                         3.122637e-03          47
ICU_LOS                         2.897917e-03          49
StageNum                        2.856611e-03          51
PaO2FiO2                        2.757989e-03          52
histologyNum                    3.125691e-03          46
Underlying_stroke               1.825165e-03          63
Pre_PS                          2.514379e-03          54
HFNC                            2.510840e-03          55
Distatntmets                    2.455855e-03          56
Intensivist                     2.177182e-03          58
performance_ICU_DC              2.339346e-03          57
DNR_at_ICU                      2.017593e-03          59
other_malignancy                1.479272e-03          74
PrevICUadm                      1.883652e-03          61
DNR                             1.858282e-03          62
MV                              1.684366e-03          64
prev_rtx                        1.533789e-03          69
PoorPS                          1.894449e-03          60
prev_ctx                        1.657291e-03          65
Surgery                         1.560351e-03          67
NewlyDx                         1.526086e-03          70
Refractory                      1.534762e-03          68
sex                             1.649284e-03          66
anemia                          1.498009e-03          71
preICUDNR                       1.495884e-03          72
WBRT                            1.100761e-03          78
smk_hx                          1.490577e-03          73
post2011                        1.319908e-03          75
prev_ccrt                       1.196075e-03          76
Underlying_CV                   1.105490e-03          77
cardiovasc                      8.103339e-04          79
ICUreadmission                  7.109778e-04          81
prevCPR                         7.322951e-04          80
PDT                             5.182431e-04          83
CTxinICU                        4.742803e-04          84
ICUCPR                          6.114750e-04          82
ECMO                            2.325520e-04          86
PCC                             3.578052e-04          85
HD                              6.806685e-05          87
postICUCPR                      0.000000e+00          88
                                       features MeanDecreaseGini secondColPos
CRRT                                       CRRT     26.793276259            1
Death_Cause                         Death_Cause     20.920026909            2
ICU_mortal30                       ICU_mortal30     16.157330427            5
underlying_pulmo               underlying_pulmo     15.918192421            6
bacteremia                           bacteremia     16.476394649            4
dx_after_adm                       dx_after_adm     19.041320265            3
ICU_Death                             ICU_Death     11.927462469            8
AKI                                         AKI      9.127977361           11
SOFA_D1                                 SOFA_D1     14.801245764            7
Vasoactiveagent                 Vasoactiveagent      6.043248014           15
neurology                             neurology      9.676444461            9
pulmocomorbid                     pulmocomorbid      7.121892208           13
ILD                                         ILD      9.164075540           10
ICU_cause_intensivist     ICU_cause_intensivist      8.484654737           12
prev_wbrt                             prev_wbrt      6.797953642           14
ANC                                         ANC      5.751248269           18
RRT                                         RRT      5.899509486           16
WBC                                         WBC      4.848687571           19
age                                         age      5.789398303           17
PT_percent                           PT_percent      4.286667408           22
Hospital_death                   Hospital_death      4.424493332           21
neutropenia                         neutropenia      4.266130210           23
CRP                                         CRP      3.819016610           26
DischargefromICU               DischargefromICU      3.688844189           27
postICUCtx                           postICUCtx      4.193452291           24
procalcitonin                     procalcitonin      2.745086007           32
BUN                                         BUN      3.125963970           29
Underlying_DM                     Underlying_DM      3.928752588           25
respfailure                         respfailure      4.722095486           20
Albumin                                 Albumin      2.680131886           35
APACH_II                               APACH_II      2.840582365           31
hypoalbuminemia                 hypoalbuminemia      2.581412416           37
postICURT                             postICURT      3.050467087           30
aPTT                                       aPTT      2.744373355           33
PLT                                         PLT      2.586159516           36
Pneumonia                             Pneumonia      2.549021529           39
Cause_Ca_problem               Cause_Ca_problem      2.541200284           40
thrombocytopenia               thrombocytopenia      2.577779058           38
Hb                                           Hb      2.713664661           34
Tracheostomy                       Tracheostomy      3.557077661           28
hospital_LOS                       hospital_LOS      2.226854130           43
performance_hospital_DC performance_hospital_DC      1.835675024           48
post_icu_survival             post_icu_survival      1.903178228           47
timefromdx                           timefromdx      1.914582560           46
BIPAP                                     BIPAP      2.438467711           41
SAPS_II                                 SAPS_II      1.995852190           45
post_dc_days                       post_dc_days      1.741425239           51
prev_gks                               prev_gks      2.241185298           42
MV_days                                 MV_days      1.816502779           50
ICU_LOS                                 ICU_LOS      1.432670627           54
StageNum                               StageNum      1.510209390           52
PaO2FiO2                               PaO2FiO2      1.472810954           53
histologyNum                       histologyNum      1.147559099           60
Underlying_stroke             Underlying_stroke      2.085691748           44
Pre_PS                                   Pre_PS      1.339464681           55
HFNC                                       HFNC      1.191034196           57
Distatntmets                       Distatntmets      1.186895608           58
Intensivist                         Intensivist      1.317039056           56
performance_ICU_DC           performance_ICU_DC      1.164499245           59
DNR_at_ICU                           DNR_at_ICU      1.038288351           61
other_malignancy               other_malignancy      1.819172047           49
PrevICUadm                           PrevICUadm      1.012301971           62
DNR                                         DNR      0.942882299           64
MV                                           MV      0.903105205           66
prev_rtx                               prev_rtx      1.006209387           63
PoorPS                                   PoorPS      0.789706449           73
prev_ctx                               prev_ctx      0.844763217           69
Surgery                                 Surgery      0.886537693           67
NewlyDx                                 NewlyDx      0.916604843           65
Refractory                           Refractory      0.815273015           70
sex                                         sex      0.750825934           74
anemia                                   anemia      0.814621167           71
preICUDNR                             preICUDNR      0.804952386           72
WBRT                                       WBRT      0.860712799           68
smk_hx                                   smk_hx      0.681682782           76
post2011                               post2011      0.741212875           75
prev_ccrt                             prev_ccrt      0.644857158           78
Underlying_CV                     Underlying_CV      0.656774592           77
cardiovasc                           cardiovasc      0.466852970           81
ICUreadmission                   ICUreadmission      0.522650538           79
prevCPR                                 prevCPR      0.518198653           80
PDT                                         PDT      0.450579178           82
CTxinICU                               CTxinICU      0.388724778           83
ICUCPR                                   ICUCPR      0.377681664           85
ECMO                                       ECMO      0.382062765           84
PCC                                         PCC      0.233169593           86
HD                                           HD      0.233046795           87
postICUCPR                           postICUCPR      0.008173194           88
                        posSum finalPos meanDecreaseAccuracyPosition
CRRT                         3        1                            2
Death_Cause                  3        2                            1
ICU_mortal30                 9        3                            4
underlying_pulmo             9        4                            3
bacteremia                  12        5                            8
dx_after_adm                12        6                            9
ICU_Death                   15        7                            7
AKI                         16        8                            5
SOFA_D1                     17        9                           10
Vasoactiveagent             21       10                            6
neurology                   22       11                           13
pulmocomorbid               24       12                           11
ILD                         26       13                           16
ICU_cause_intensivist       27       14                           15
prev_wbrt                   28       15                           14
ANC                         30       16                           12
RRT                         35       17                           19
WBC                         36       18                           17
age                         38       19                           21
PT_percent                  40       20                           18
Hospital_death              45       21                           24
neutropenia                 45       22                           22
CRP                         46       23                           20
DischargefromICU            52       24                           25
postICUCtx                  52       25                           28
procalcitonin               55       26                           23
BUN                         56       27                           27
Underlying_DM               58       28                           33
respfailure                 60       29                           40
Albumin                     61       30                           26
APACH_II                    67       31                           36
hypoalbuminemia             67       32                           30
postICURT                   67       33                           37
aPTT                        68       34                           35
PLT                         68       35                           32
Pneumonia                   68       36                           29
Cause_Ca_problem            71       37                           31
thrombocytopenia            72       38                           34
Hb                          73       39                           39
Tracheostomy                73       40                           45
hospital_LOS                81       41                           38
performance_hospital_DC     89       42                           41
post_icu_survival           89       43                           42
timefromdx                  90       44                           44
BIPAP                       91       45                           50
SAPS_II                     93       46                           48
post_dc_days                94       47                           43
prev_gks                    95       48                           53
MV_days                     97       49                           47
ICU_LOS                    103       50                           49
StageNum                   103       51                           51
PaO2FiO2                   105       52                           52
histologyNum               106       53                           46
Underlying_stroke          107       54                           63
Pre_PS                     109       55                           54
HFNC                       112       56                           55
Distatntmets               114       57                           56
Intensivist                114       58                           58
performance_ICU_DC         116       59                           57
DNR_at_ICU                 120       60                           59
other_malignancy           123       61                           74
PrevICUadm                 123       62                           61
DNR                        126       63                           62
MV                         130       64                           64
prev_rtx                   132       65                           69
PoorPS                     133       66                           60
prev_ctx                   134       67                           65
Surgery                    134       68                           67
NewlyDx                    135       69                           70
Refractory                 138       70                           68
sex                        140       71                           66
anemia                     142       72                           71
preICUDNR                  144       73                           72
WBRT                       146       74                           78
smk_hx                     149       75                           73
post2011                   150       76                           75
prev_ccrt                  154       77                           76
Underlying_CV              154       78                           77
cardiovasc                 160       79                           79
ICUreadmission             160       80                           81
prevCPR                    160       81                           80
PDT                        165       82                           83
CTxinICU                   167       83                           84
ICUCPR                     167       84                           82
ECMO                       170       85                           86
PCC                        171       86                           85
HD                         174       87                           87
postICUCPR                 176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
CRRT                                           1                  3
Death_Cause                                    2                  3
ICU_mortal30                                   5                  9
underlying_pulmo                               6                  9
bacteremia                                     4                 12
dx_after_adm                                   3                 12
ICU_Death                                      8                 15
AKI                                           11                 16
SOFA_D1                                        7                 17
Vasoactiveagent                               15                 21
neurology                                      9                 22
pulmocomorbid                                 13                 24
ILD                                           10                 26
ICU_cause_intensivist                         12                 27
prev_wbrt                                     14                 28
ANC                                           18                 30
RRT                                           16                 35
WBC                                           19                 36
age                                           17                 38
PT_percent                                    22                 40
Hospital_death                                21                 45
neutropenia                                   23                 45
CRP                                           26                 46
DischargefromICU                              27                 52
postICUCtx                                    24                 52
procalcitonin                                 32                 55
BUN                                           29                 56
Underlying_DM                                 25                 58
respfailure                                   20                 60
Albumin                                       35                 61
APACH_II                                      31                 67
hypoalbuminemia                               37                 67
postICURT                                     30                 67
aPTT                                          33                 68
PLT                                           36                 68
Pneumonia                                     39                 68
Cause_Ca_problem                              40                 71
thrombocytopenia                              38                 72
Hb                                            34                 73
Tracheostomy                                  28                 73
hospital_LOS                                  43                 81
performance_hospital_DC                       48                 89
post_icu_survival                             47                 89
timefromdx                                    46                 90
BIPAP                                         41                 91
SAPS_II                                       45                 93
post_dc_days                                  51                 94
prev_gks                                      42                 95
MV_days                                       50                 97
ICU_LOS                                       54                103
StageNum                                      52                103
PaO2FiO2                                      53                105
histologyNum                                  60                106
Underlying_stroke                             44                107
Pre_PS                                        55                109
HFNC                                          57                112
Distatntmets                                  58                114
Intensivist                                   56                114
performance_ICU_DC                            59                116
DNR_at_ICU                                    61                120
other_malignancy                              49                123
PrevICUadm                                    62                123
DNR                                           64                126
MV                                            66                130
prev_rtx                                      63                132
PoorPS                                        73                133
prev_ctx                                      69                134
Surgery                                       67                134
NewlyDx                                       65                135
Refractory                                    70                138
sex                                           74                140
anemia                                        71                142
preICUDNR                                     72                144
WBRT                                          68                146
smk_hx                                        76                149
post2011                                      75                150
prev_ccrt                                     78                154
Underlying_CV                                 77                154
cardiovasc                                    81                160
ICUreadmission                                79                160
prevCPR                                       80                160
PDT                                           82                165
CTxinICU                                      83                167
ICUCPR                                        85                167
ECMO                                          84                170
PCC                                           86                171
HD                                            87                174
postICUCPR                                    88                176
number of selected top features: 3
selected top features: 
[1] "CRRT"         "Death_Cause"  "ICU_mortal30"

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.3905025
ROC AUC 		0.6136364

Brier score =  0.292  (best value: 0; worst value: 1)

TOTAL:

 FN =  2  /  4 	 (truth == 1) & (prediction < threshold)
 TP =  2  /  4 	 (truth == 1) & (prediction >= threshold)

 FP =  7  /  22 	 (truth == 0) & (prediction >= threshold)
 TN =  15  /  22 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.138 	 0.308 	 	0.654 	 	0.500 	 	0.682		0.222	 	0.882	 	0.391	0.614

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  5
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
AKI                             4.778641e-02           1
BUN                             3.569430e-02           2
Pneumonia                       3.524448e-02           3
prev_wbrt                       2.750374e-02           4
ICU_cause_intensivist           1.373022e-02           7
cardiovasc                      1.317757e-02           8
neutropenia                     1.577608e-02           6
PT_percent                      1.293034e-02           9
HFNC                            1.660264e-02           5
CTxinICU                        1.282029e-02          10
thrombocytopenia                1.223084e-02          12
WBC                             1.034964e-02          14
APACH_II                        1.093199e-02          13
timefromdx                      1.250234e-02          11
underlying_pulmo                8.926374e-03          16
DNR_at_ICU                      8.127038e-03          21
preICUDNR                       1.020872e-02          15
post_icu_survival               8.894462e-03          17
ANC                             8.498210e-03          19
CRRT                            7.980729e-03          22
respfailure                     7.449708e-03          25
CRP                             8.717062e-03          18
bacteremia                      8.357892e-03          20
procalcitonin                   7.028933e-03          27
age                             7.148996e-03          26
prev_ccrt                       5.792838e-03          30
post_dc_days                    6.564461e-03          28
SOFA_D1                         7.515582e-03          24
Vasoactiveagent                 7.857523e-03          23
PCC                             5.387061e-03          31
Cause_Ca_problem                5.985493e-03          29
NewlyDx                         5.354820e-03          32
prev_ctx                        4.484952e-03          35
hospital_LOS                    4.664866e-03          33
PaO2FiO2                        4.660333e-03          34
SAPS_II                         4.148620e-03          37
PDT                             4.179644e-03          36
Albumin                         3.876548e-03          38
neurology                       2.634098e-03          48
ICUreadmission                  2.948861e-03          44
PLT                             3.708760e-03          39
MV_days                         3.075498e-03          42
pulmocomorbid                   3.119688e-03          41
Death_Cause                     3.073653e-03          43
ECMO                            2.889280e-03          46
prevCPR                         2.554333e-03          51
aPTT                            2.261040e-03          53
ICUCPR                          2.847262e-03          47
Intensivist                     3.140955e-03          40
performance_ICU_DC              2.613412e-03          49
PrevICUadm                      2.933041e-03          45
Hb                              2.459544e-03          52
histologyNum                    2.555488e-03          50
performance_hospital_DC         2.213619e-03          54
ICU_LOS                         1.998646e-03          57
StageNum                        2.064037e-03          56
anemia                          2.080210e-03          55
Pre_PS                          1.885790e-03          59
Distatntmets                    1.888599e-03          58
smk_hx                          1.612228e-03          61
PoorPS                          1.513171e-03          62
DischargefromICU                1.707821e-03          60
DNR                             1.339324e-03          65
ICU_Death                       1.457591e-03          63
Refractory                      1.267101e-03          68
MV                              1.306032e-03          66
Hospital_death                  1.299635e-03          67
ICU_mortal30                    1.455437e-03          64
RRT                             8.171026e-04          74
Underlying_DM                   1.154390e-03          70
hypoalbuminemia                 1.207822e-03          69
prev_rtx                        9.751672e-04          71
dx_after_adm                    8.673798e-04          73
HD                              7.219996e-04          79
BIPAP                           7.951721e-04          76
other_malignancy                8.131109e-04          75
post2011                        9.359369e-04          72
sex                             7.887086e-04          77
postICUCtx                      7.756519e-04          78
Surgery                         6.243712e-04          80
WBRT                            6.165122e-04          82
Tracheostomy                    6.166688e-04          81
Underlying_CV                   4.687795e-04          83
ILD                             3.644282e-04          84
Underlying_stroke               2.102397e-04          85
prev_gks                        1.116341e-04          86
postICURT                       4.494382e-06          87
postICUCPR                      0.000000e+00          88
                                       features MeanDecreaseGini secondColPos
AKI                                         AKI     22.527220689            3
BUN                                         BUN     28.288081259            2
Pneumonia                             Pneumonia     30.840414188            1
prev_wbrt                             prev_wbrt     17.756976718            4
ICU_cause_intensivist     ICU_cause_intensivist     15.154375000            5
cardiovasc                           cardiovasc     10.977048799            6
neutropenia                         neutropenia      9.232260798            8
PT_percent                           PT_percent      9.494225686            7
HFNC                                       HFNC      7.023470878           13
CTxinICU                               CTxinICU      7.040331978           12
thrombocytopenia               thrombocytopenia      7.477464677           11
WBC                                         WBC      8.867144316            9
APACH_II                               APACH_II      6.227793450           15
timefromdx                           timefromdx      6.083746502           17
underlying_pulmo               underlying_pulmo      6.311330510           14
DNR_at_ICU                           DNR_at_ICU      7.764830781           10
preICUDNR                             preICUDNR      4.650216639           21
post_icu_survival             post_icu_survival      4.702608571           20
ANC                                         ANC      5.884682069           19
CRRT                                       CRRT      5.983913544           18
respfailure                         respfailure      6.217080316           16
CRP                                         CRP      4.029645101           24
bacteremia                           bacteremia      3.954593685           25
procalcitonin                     procalcitonin      4.353150674           22
age                                         age      3.530979172           27
prev_ccrt                             prev_ccrt      4.215493846           23
post_dc_days                       post_dc_days      3.317258809           28
SOFA_D1                                 SOFA_D1      2.349210526           32
Vasoactiveagent                 Vasoactiveagent      2.189200027           33
PCC                                         PCC      3.748759530           26
Cause_Ca_problem               Cause_Ca_problem      2.357613467           31
NewlyDx                                 NewlyDx      3.059950269           29
prev_ctx                               prev_ctx      2.108119056           34
hospital_LOS                       hospital_LOS      1.850793911           38
PaO2FiO2                               PaO2FiO2      1.890471990           37
SAPS_II                                 SAPS_II      1.923627220           36
PDT                                         PDT      1.842195614           39
Albumin                                 Albumin      1.805805923           40
neurology                             neurology      2.723822408           30
ICUreadmission                   ICUreadmission      1.949010371           35
PLT                                         PLT      1.663176650           41
MV_days                                 MV_days      1.448969154           42
pulmocomorbid                     pulmocomorbid      1.355862424           45
Death_Cause                         Death_Cause      1.344592892           46
ECMO                                       ECMO      1.344185054           47
prevCPR                                 prevCPR      1.428158094           43
aPTT                                       aPTT      1.387029162           44
ICUCPR                                   ICUCPR      1.117684455           50
Intensivist                         Intensivist      0.929434211           57
performance_ICU_DC           performance_ICU_DC      1.296763578           48
PrevICUadm                           PrevICUadm      1.071767404           52
Hb                                           Hb      1.243325013           49
histologyNum                       histologyNum      1.087522127           51
performance_hospital_DC performance_hospital_DC      0.996142043           55
ICU_LOS                                 ICU_LOS      1.056380810           53
StageNum                               StageNum      0.988950160           56
anemia                                   anemia      0.897822050           58
Pre_PS                                   Pre_PS      1.022249824           54
Distatntmets                       Distatntmets      0.889840984           59
smk_hx                                   smk_hx      0.796546753           60
PoorPS                                   PoorPS      0.656002910           61
DischargefromICU               DischargefromICU      0.631327250           64
DNR                                         DNR      0.619707549           65
ICU_Death                             ICU_Death      0.576779920           67
Refractory                           Refractory      0.654668244           62
MV                                           MV      0.615456249           66
Hospital_death                   Hospital_death      0.552947562           68
ICU_mortal30                       ICU_mortal30      0.530223964           72
RRT                                         RRT      0.643361324           63
Underlying_DM                     Underlying_DM      0.536042091           69
hypoalbuminemia                 hypoalbuminemia      0.533344185           71
prev_rtx                               prev_rtx      0.524332581           73
dx_after_adm                       dx_after_adm      0.492327340           74
HD                                           HD      0.533971617           70
BIPAP                                     BIPAP      0.482975379           75
other_malignancy               other_malignancy      0.409553155           76
post2011                               post2011      0.365836924           82
sex                                         sex      0.408918376           77
postICUCtx                           postICUCtx      0.401175480           78
Surgery                                 Surgery      0.367785780           80
WBRT                                       WBRT      0.375236342           79
Tracheostomy                       Tracheostomy      0.366245188           81
Underlying_CV                     Underlying_CV      0.238309506           83
ILD                                         ILD      0.187953974           85
Underlying_stroke             Underlying_stroke      0.195337466           84
prev_gks                               prev_gks      0.114593850           86
postICURT                             postICURT      0.009555356           87
postICUCPR                           postICUCPR      0.001852060           88
                        posSum finalPos meanDecreaseAccuracyPosition
AKI                          4        1                            1
BUN                          4        2                            2
Pneumonia                    4        3                            3
prev_wbrt                    8        4                            4
ICU_cause_intensivist       12        5                            7
cardiovasc                  14        6                            8
neutropenia                 14        7                            6
PT_percent                  16        8                            9
HFNC                        18        9                            5
CTxinICU                    22       10                           10
thrombocytopenia            23       11                           12
WBC                         23       12                           14
APACH_II                    28       13                           13
timefromdx                  28       14                           11
underlying_pulmo            30       15                           16
DNR_at_ICU                  31       16                           21
preICUDNR                   36       17                           15
post_icu_survival           37       18                           17
ANC                         38       19                           19
CRRT                        40       20                           22
respfailure                 41       21                           25
CRP                         42       22                           18
bacteremia                  45       23                           20
procalcitonin               49       24                           27
age                         53       25                           26
prev_ccrt                   53       26                           30
post_dc_days                56       27                           28
SOFA_D1                     56       28                           24
Vasoactiveagent             56       29                           23
PCC                         57       30                           31
Cause_Ca_problem            60       31                           29
NewlyDx                     61       32                           32
prev_ctx                    69       33                           35
hospital_LOS                71       34                           33
PaO2FiO2                    71       35                           34
SAPS_II                     73       36                           37
PDT                         75       37                           36
Albumin                     78       38                           38
neurology                   78       39                           48
ICUreadmission              79       40                           44
PLT                         80       41                           39
MV_days                     84       42                           42
pulmocomorbid               86       43                           41
Death_Cause                 89       44                           43
ECMO                        93       45                           46
prevCPR                     94       46                           51
aPTT                        97       47                           53
ICUCPR                      97       48                           47
Intensivist                 97       49                           40
performance_ICU_DC          97       50                           49
PrevICUadm                  97       51                           45
Hb                         101       52                           52
histologyNum               101       53                           50
performance_hospital_DC    109       54                           54
ICU_LOS                    110       55                           57
StageNum                   112       56                           56
anemia                     113       57                           55
Pre_PS                     113       58                           59
Distatntmets               117       59                           58
smk_hx                     121       60                           61
PoorPS                     123       61                           62
DischargefromICU           124       62                           60
DNR                        130       63                           65
ICU_Death                  130       64                           63
Refractory                 130       65                           68
MV                         132       66                           66
Hospital_death             135       67                           67
ICU_mortal30               136       68                           64
RRT                        137       69                           74
Underlying_DM              139       70                           70
hypoalbuminemia            140       71                           69
prev_rtx                   144       72                           71
dx_after_adm               147       73                           73
HD                         149       74                           79
BIPAP                      151       75                           76
other_malignancy           151       76                           75
post2011                   154       77                           72
sex                        154       78                           77
postICUCtx                 156       79                           78
Surgery                    160       80                           80
WBRT                       161       81                           82
Tracheostomy               162       82                           81
Underlying_CV              166       83                           83
ILD                        169       84                           84
Underlying_stroke          169       85                           85
prev_gks                   172       86                           86
postICURT                  174       87                           87
postICUCPR                 176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
AKI                                            3                  4
BUN                                            2                  4
Pneumonia                                      1                  4
prev_wbrt                                      4                  8
ICU_cause_intensivist                          5                 12
cardiovasc                                     6                 14
neutropenia                                    8                 14
PT_percent                                     7                 16
HFNC                                          13                 18
CTxinICU                                      12                 22
thrombocytopenia                              11                 23
WBC                                            9                 23
APACH_II                                      15                 28
timefromdx                                    17                 28
underlying_pulmo                              14                 30
DNR_at_ICU                                    10                 31
preICUDNR                                     21                 36
post_icu_survival                             20                 37
ANC                                           19                 38
CRRT                                          18                 40
respfailure                                   16                 41
CRP                                           24                 42
bacteremia                                    25                 45
procalcitonin                                 22                 49
age                                           27                 53
prev_ccrt                                     23                 53
post_dc_days                                  28                 56
SOFA_D1                                       32                 56
Vasoactiveagent                               33                 56
PCC                                           26                 57
Cause_Ca_problem                              31                 60
NewlyDx                                       29                 61
prev_ctx                                      34                 69
hospital_LOS                                  38                 71
PaO2FiO2                                      37                 71
SAPS_II                                       36                 73
PDT                                           39                 75
Albumin                                       40                 78
neurology                                     30                 78
ICUreadmission                                35                 79
PLT                                           41                 80
MV_days                                       42                 84
pulmocomorbid                                 45                 86
Death_Cause                                   46                 89
ECMO                                          47                 93
prevCPR                                       43                 94
aPTT                                          44                 97
ICUCPR                                        50                 97
Intensivist                                   57                 97
performance_ICU_DC                            48                 97
PrevICUadm                                    52                 97
Hb                                            49                101
histologyNum                                  51                101
performance_hospital_DC                       55                109
ICU_LOS                                       53                110
StageNum                                      56                112
anemia                                        58                113
Pre_PS                                        54                113
Distatntmets                                  59                117
smk_hx                                        60                121
PoorPS                                        61                123
DischargefromICU                              64                124
DNR                                           65                130
ICU_Death                                     67                130
Refractory                                    62                130
MV                                            66                132
Hospital_death                                68                135
ICU_mortal30                                  72                136
RRT                                           63                137
Underlying_DM                                 69                139
hypoalbuminemia                               71                140
prev_rtx                                      73                144
dx_after_adm                                  74                147
HD                                            70                149
BIPAP                                         75                151
other_malignancy                              76                151
post2011                                      82                154
sex                                           77                154
postICUCtx                                    78                156
Surgery                                       80                160
WBRT                                          79                161
Tracheostomy                                  81                162
Underlying_CV                                 83                166
ILD                                           85                169
Underlying_stroke                             84                169
prev_gks                                      86                172
postICURT                                     87                174
postICUCPR                                    88                176
number of selected top features: 3
selected top features: 
[1] "AKI"       "BUN"       "Pneumonia"

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.6755403
ROC AUC 		0.7673611

Brier score =  0.212  (best value: 0; worst value: 1)

TOTAL:

 FN =  4  /  8 	 (truth == 1) & (prediction < threshold)
 TP =  4  /  8 	 (truth == 1) & (prediction >= threshold)

 FP =  4  /  18 	 (truth == 0) & (prediction >= threshold)
 TN =  14  /  18 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.278 	 0.500 	 	0.692 	 	0.500 	 	0.778		0.500	 	0.778	 	0.676	0.767

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  6
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
AKI                             5.948478e-02           1
Pneumonia                       3.829072e-02           2
neutropenia                     3.797796e-02           3
Vasoactiveagent                 3.379448e-02           4
CRRT                            2.833290e-02           5
BUN                             2.690398e-02           6
SOFA_D1                         2.335422e-02           7
bacteremia                      1.889980e-02           8
age                             1.594469e-02          10
prev_wbrt                       1.718695e-02           9
CRP                             1.250935e-02          11
SAPS_II                         1.074318e-02          12
ANC                             1.011943e-02          13
timefromdx                      6.541189e-03          19
APACH_II                        7.455763e-03          17
WBC                             1.008794e-02          14
Cause_Ca_problem                7.725152e-03          16
PrevICUadm                      4.798723e-03          23
thrombocytopenia                7.951614e-03          15
PT_percent                      7.008711e-03          18
sex                             4.675860e-03          25
PLT                             6.038555e-03          21
respfailure                     4.094960e-03          29
post2011                        6.130103e-03          20
MV_days                         5.519335e-03          22
prev_ccrt                       4.052505e-03          31
PaO2FiO2                        4.096811e-03          28
ICU_LOS                         4.788747e-03          24
Death_Cause                     4.664617e-03          26
StageNum                        4.050095e-03          32
Albumin                         4.071798e-03          30
HFNC                            4.533237e-03          27
cardiovasc                      2.951817e-03          39
Pre_PS                          3.953321e-03          33
smk_hx                          3.438770e-03          34
Surgery                         2.758419e-03          43
hospital_LOS                    3.236492e-03          36
Intensivist                     3.366479e-03          35
Hb                              2.960061e-03          38
prev_rtx                        2.977186e-03          37
prev_ctx                        2.744638e-03          44
ICU_cause_intensivist           1.831345e-03          56
performance_ICU_DC              2.758916e-03          42
procalcitonin                   2.851031e-03          40
postICUCPR                      2.618246e-03          46
ICU_mortal30                    2.772934e-03          41
pulmocomorbid                   2.171706e-03          51
post_dc_days                    2.386663e-03          48
Refractory                      2.385623e-03          49
histologyNum                    2.724211e-03          45
post_icu_survival               2.556288e-03          47
aPTT                            1.875915e-03          55
ECMO                            1.666040e-03          58
CTxinICU                        2.080838e-03          52
ICU_Death                       2.254408e-03          50
Distatntmets                    1.952686e-03          53
underlying_pulmo                1.885299e-03          54
ICUreadmission                  1.420921e-03          63
hypoalbuminemia                 1.728903e-03          57
PDT                             1.297854e-03          66
DischargefromICU                1.629825e-03          59
RRT                             1.504071e-03          61
PoorPS                          1.575597e-03          60
DNR                             1.448390e-03          62
NewlyDx                         1.363744e-03          65
anemia                          1.405094e-03          64
MV                              1.168841e-03          69
performance_hospital_DC         1.191711e-03          68
DNR_at_ICU                      1.225176e-03          67
other_malignancy                1.120494e-03          70
Hospital_death                  9.329634e-04          71
prev_gks                        6.847431e-04          75
Underlying_DM                   8.278604e-04          72
ICUCPR                          6.709035e-04          76
BIPAP                           7.798921e-04          73
prevCPR                         5.976802e-04          77
Tracheostomy                    7.398837e-04          74
dx_after_adm                    3.603690e-04          80
ILD                             4.679210e-04          79
WBRT                            4.923168e-04          78
Underlying_CV                   3.515713e-04          81
postICUCtx                      3.408988e-04          82
HD                              2.116717e-04          83
preICUDNR                       1.547111e-04          84
neurology                       1.002050e-04          85
Underlying_stroke               8.438738e-05          86
PCC                             6.384319e-05          87
postICURT                       0.000000e+00          88
                                       features MeanDecreaseGini secondColPos
AKI                                         AKI      36.42436615            1
Pneumonia                             Pneumonia      28.75314861            2
neutropenia                         neutropenia      25.23144604            3
Vasoactiveagent                 Vasoactiveagent      23.01533406            4
CRRT                                       CRRT      21.79148022            5
BUN                                         BUN      16.21706929            7
SOFA_D1                                 SOFA_D1      18.15933269            6
bacteremia                           bacteremia       9.99843397            9
age                                         age      10.50760373            8
prev_wbrt                             prev_wbrt       9.14404772           10
CRP                                         CRP       5.65484889           13
SAPS_II                                 SAPS_II       6.16026679           12
ANC                                         ANC       4.89292527           17
timefromdx                           timefromdx       6.79329420           11
APACH_II                               APACH_II       5.17879505           15
WBC                                         WBC       4.87416047           18
Cause_Ca_problem               Cause_Ca_problem       4.53856356           20
PrevICUadm                           PrevICUadm       5.31321223           14
thrombocytopenia               thrombocytopenia       3.23306296           22
PT_percent                           PT_percent       3.03480693           23
sex                                         sex       4.75973772           19
PLT                                         PLT       2.71436436           24
respfailure                         respfailure       4.94917230           16
post2011                               post2011       2.50538106           26
MV_days                                 MV_days       2.39087328           27
prev_ccrt                             prev_ccrt       4.26943084           21
PaO2FiO2                               PaO2FiO2       2.63297900           25
ICU_LOS                                 ICU_LOS       2.09730724           31
Death_Cause                         Death_Cause       1.76177460           36
StageNum                               StageNum       2.09079712           32
Albumin                                 Albumin       1.78510848           35
HFNC                                       HFNC       1.71380520           38
cardiovasc                           cardiovasc       2.34632505           28
Pre_PS                                   Pre_PS       1.88506294           34
smk_hx                                   smk_hx       1.96076115           33
Surgery                                 Surgery       2.26955857           30
hospital_LOS                       hospital_LOS       1.70157684           39
Intensivist                         Intensivist       1.58002196           41
Hb                                           Hb       1.68704566           40
prev_rtx                               prev_rtx       1.41213345           42
prev_ctx                               prev_ctx       1.74044240           37
ICU_cause_intensivist     ICU_cause_intensivist       2.33798421           29
performance_ICU_DC           performance_ICU_DC       1.34207830           43
procalcitonin                     procalcitonin       1.23417025           46
postICUCPR                           postICUCPR       1.33139860           44
ICU_mortal30                       ICU_mortal30       0.91290984           55
pulmocomorbid                     pulmocomorbid       1.26517182           45
post_dc_days                       post_dc_days       1.03467661           49
Refractory                           Refractory       1.04386120           48
histologyNum                       histologyNum       0.97725443           54
post_icu_survival             post_icu_survival       0.98354371           53
aPTT                                       aPTT       1.00651367           50
ECMO                                       ECMO       1.05548312           47
CTxinICU                               CTxinICU       0.87576660           56
ICU_Death                             ICU_Death       0.82844256           59
Distatntmets                       Distatntmets       0.87308184           57
underlying_pulmo               underlying_pulmo       0.86027607           58
ICUreadmission                   ICUreadmission       0.99145939           51
hypoalbuminemia                 hypoalbuminemia       0.79876988           60
PDT                                         PDT       0.99131910           52
DischargefromICU               DischargefromICU       0.76277383           62
RRT                                         RRT       0.77974118           61
PoorPS                                   PoorPS       0.70789200           63
DNR                                         DNR       0.65097250           65
NewlyDx                                 NewlyDx       0.64320931           66
anemia                                   anemia       0.56383506           69
MV                                           MV       0.65781624           64
performance_hospital_DC performance_hospital_DC       0.60070047           67
DNR_at_ICU                           DNR_at_ICU       0.54551733           71
other_malignancy               other_malignancy       0.59106590           68
Hospital_death                   Hospital_death       0.48326142           74
prev_gks                               prev_gks       0.55771431           70
Underlying_DM                     Underlying_DM       0.52453082           73
ICUCPR                                   ICUCPR       0.53489189           72
BIPAP                                     BIPAP       0.43676067           76
prevCPR                                 prevCPR       0.44859604           75
Tracheostomy                       Tracheostomy       0.32853768           78
dx_after_adm                       dx_after_adm       0.34677475           77
ILD                                         ILD       0.31509444           79
WBRT                                       WBRT       0.28465661           81
Underlying_CV                     Underlying_CV       0.30014744           80
postICUCtx                           postICUCtx       0.19460271           82
HD                                           HD       0.18291096           83
preICUDNR                             preICUDNR       0.13297202           84
neurology                             neurology       0.06802886           86
Underlying_stroke             Underlying_stroke       0.09494321           85
PCC                                         PCC       0.04396174           87
postICURT                             postICURT       0.00000000           88
                        posSum finalPos meanDecreaseAccuracyPosition
AKI                          2        1                            1
Pneumonia                    4        2                            2
neutropenia                  6        3                            3
Vasoactiveagent              8        4                            4
CRRT                        10        5                            5
BUN                         13        6                            6
SOFA_D1                     13        7                            7
bacteremia                  17        8                            8
age                         18        9                           10
prev_wbrt                   19       10                            9
CRP                         24       11                           11
SAPS_II                     24       12                           12
ANC                         30       13                           13
timefromdx                  30       14                           19
APACH_II                    32       15                           17
WBC                         32       16                           14
Cause_Ca_problem            36       17                           16
PrevICUadm                  37       18                           23
thrombocytopenia            37       19                           15
PT_percent                  41       20                           18
sex                         44       21                           25
PLT                         45       22                           21
respfailure                 45       23                           29
post2011                    46       24                           20
MV_days                     49       25                           22
prev_ccrt                   52       26                           31
PaO2FiO2                    53       27                           28
ICU_LOS                     55       28                           24
Death_Cause                 62       29                           26
StageNum                    64       30                           32
Albumin                     65       31                           30
HFNC                        65       32                           27
cardiovasc                  67       33                           39
Pre_PS                      67       34                           33
smk_hx                      67       35                           34
Surgery                     73       36                           43
hospital_LOS                75       37                           36
Intensivist                 76       38                           35
Hb                          78       39                           38
prev_rtx                    79       40                           37
prev_ctx                    81       41                           44
ICU_cause_intensivist       85       42                           56
performance_ICU_DC          85       43                           42
procalcitonin               86       44                           40
postICUCPR                  90       45                           46
ICU_mortal30                96       46                           41
pulmocomorbid               96       47                           51
post_dc_days                97       48                           48
Refractory                  97       49                           49
histologyNum                99       50                           45
post_icu_survival          100       51                           47
aPTT                       105       52                           55
ECMO                       105       53                           58
CTxinICU                   108       54                           52
ICU_Death                  109       55                           50
Distatntmets               110       56                           53
underlying_pulmo           112       57                           54
ICUreadmission             114       58                           63
hypoalbuminemia            117       59                           57
PDT                        118       60                           66
DischargefromICU           121       61                           59
RRT                        122       62                           61
PoorPS                     123       63                           60
DNR                        127       64                           62
NewlyDx                    131       65                           65
anemia                     133       66                           64
MV                         133       67                           69
performance_hospital_DC    135       68                           68
DNR_at_ICU                 138       69                           67
other_malignancy           138       70                           70
Hospital_death             145       71                           71
prev_gks                   145       72                           75
Underlying_DM              145       73                           72
ICUCPR                     148       74                           76
BIPAP                      149       75                           73
prevCPR                    152       76                           77
Tracheostomy               152       77                           74
dx_after_adm               157       78                           80
ILD                        158       79                           79
WBRT                       159       80                           78
Underlying_CV              161       81                           81
postICUCtx                 164       82                           82
HD                         166       83                           83
preICUDNR                  168       84                           84
neurology                  171       85                           85
Underlying_stroke          171       86                           86
PCC                        174       87                           87
postICURT                  176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
AKI                                            1                  2
Pneumonia                                      2                  4
neutropenia                                    3                  6
Vasoactiveagent                                4                  8
CRRT                                           5                 10
BUN                                            7                 13
SOFA_D1                                        6                 13
bacteremia                                     9                 17
age                                            8                 18
prev_wbrt                                     10                 19
CRP                                           13                 24
SAPS_II                                       12                 24
ANC                                           17                 30
timefromdx                                    11                 30
APACH_II                                      15                 32
WBC                                           18                 32
Cause_Ca_problem                              20                 36
PrevICUadm                                    14                 37
thrombocytopenia                              22                 37
PT_percent                                    23                 41
sex                                           19                 44
PLT                                           24                 45
respfailure                                   16                 45
post2011                                      26                 46
MV_days                                       27                 49
prev_ccrt                                     21                 52
PaO2FiO2                                      25                 53
ICU_LOS                                       31                 55
Death_Cause                                   36                 62
StageNum                                      32                 64
Albumin                                       35                 65
HFNC                                          38                 65
cardiovasc                                    28                 67
Pre_PS                                        34                 67
smk_hx                                        33                 67
Surgery                                       30                 73
hospital_LOS                                  39                 75
Intensivist                                   41                 76
Hb                                            40                 78
prev_rtx                                      42                 79
prev_ctx                                      37                 81
ICU_cause_intensivist                         29                 85
performance_ICU_DC                            43                 85
procalcitonin                                 46                 86
postICUCPR                                    44                 90
ICU_mortal30                                  55                 96
pulmocomorbid                                 45                 96
post_dc_days                                  49                 97
Refractory                                    48                 97
histologyNum                                  54                 99
post_icu_survival                             53                100
aPTT                                          50                105
ECMO                                          47                105
CTxinICU                                      56                108
ICU_Death                                     59                109
Distatntmets                                  57                110
underlying_pulmo                              58                112
ICUreadmission                                51                114
hypoalbuminemia                               60                117
PDT                                           52                118
DischargefromICU                              62                121
RRT                                           61                122
PoorPS                                        63                123
DNR                                           65                127
NewlyDx                                       66                131
anemia                                        69                133
MV                                            64                133
performance_hospital_DC                       67                135
DNR_at_ICU                                    71                138
other_malignancy                              68                138
Hospital_death                                74                145
prev_gks                                      70                145
Underlying_DM                                 73                145
ICUCPR                                        72                148
BIPAP                                         76                149
prevCPR                                       75                152
Tracheostomy                                  78                152
dx_after_adm                                  77                157
ILD                                           79                158
WBRT                                          81                159
Underlying_CV                                 80                161
postICUCtx                                    82                164
HD                                            83                166
preICUDNR                                     84                168
neurology                                     86                171
Underlying_stroke                             85                171
PCC                                           87                174
postICURT                                     88                176
number of selected top features: 3
selected top features: 
[1] "AKI"         "Pneumonia"   "neutropenia"

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.565005
ROC AUC 		0.7541667

Brier score =  0.151  (best value: 0; worst value: 1)

TOTAL:

 FN =  4  /  6 	 (truth == 1) & (prediction < threshold)
 TP =  2  /  6 	 (truth == 1) & (prediction >= threshold)

 FP =  1  /  20 	 (truth == 0) & (prediction >= threshold)
 TN =  19  /  20 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.374 	 0.444 	 	0.808 	 	0.333 	 	0.950		0.667	 	0.826	 	0.565	0.754

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  7
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
neutropenia                     0.0632406681           1
bacteremia                      0.0429186811           2
PCC                             0.0251619482           4
ANC                             0.0260390670           3
Death_Cause                     0.0184703670           5
respfailure                     0.0156489442           9
Vasoactiveagent                 0.0144685954          10
postICUCtx                      0.0130772522          12
APACH_II                        0.0157285238           8
AKI                             0.0183888796           6
Pneumonia                       0.0143302112          11
thrombocytopenia                0.0172289373           7
cardiovasc                      0.0105726510          14
Underlying_DM                   0.0078940492          20
WBC                             0.0125077678          13
ICU_cause_intensivist           0.0087709087          17
PT_percent                      0.0095052966          15
ICUCPR                          0.0065256059          21
MV_days                         0.0081630765          19
age                             0.0087080882          18
procalcitonin                   0.0063032386          22
BUN                             0.0088177460          16
postICURT                       0.0062819995          23
MV                              0.0061716520          25
prev_ccrt                       0.0058858137          32
PLT                             0.0061442365          27
StageNum                        0.0059231378          29
Distatntmets                    0.0060480096          28
aPTT                            0.0061998723          24
Cause_Ca_problem                0.0061630790          26
ICU_LOS                         0.0059082303          30
timefromdx                      0.0053815951          33
PaO2FiO2                        0.0051651307          34
CRP                             0.0058869254          31
smk_hx                          0.0038472606          38
post_icu_survival               0.0039518432          37
NewlyDx                         0.0042515652          36
prev_wbrt                       0.0049071335          35
Albumin                         0.0037092168          40
sex                             0.0032551635          42
Pre_PS                          0.0032671067          41
SOFA_D1                         0.0038179290          39
Hb                              0.0032461597          43
BIPAP                           0.0017066501          56
WBRT                            0.0024644191          52
histologyNum                    0.0032397691          44
SAPS_II                         0.0028643296          48
dx_after_adm                    0.0015236929          62
post_dc_days                    0.0030962863          45
HFNC                            0.0029964730          46
post2011                        0.0025260745          50
anemia                          0.0029106600          47
hospital_LOS                    0.0024920639          51
PDT                             0.0013876221          66
CRRT                            0.0027139642          49
prev_rtx                        0.0018169671          54
ICU_mortal30                    0.0023510330          53
Refractory                      0.0017930346          55
Tracheostomy                    0.0014581482          65
pulmocomorbid                   0.0016577942          57
Surgery                         0.0015071200          63
underlying_pulmo                0.0015473008          61
hypoalbuminemia                 0.0016011912          58
DNR_at_ICU                      0.0014936402          64
ICU_Death                       0.0015495170          60
ICUreadmission                  0.0012667942          68
Intensivist                     0.0015626627          59
PrevICUadm                      0.0011862687          73
performance_hospital_DC         0.0012540706          70
PoorPS                          0.0012565679          69
DNR                             0.0013353258          67
HD                              0.0007051970          76
Hospital_death                  0.0011966802          72
prev_ctx                        0.0010760879          75
DischargefromICU                0.0012343836          71
performance_ICU_DC              0.0011678809          74
prevCPR                         0.0005925051          77
CTxinICU                        0.0005481322          79
RRT                             0.0005711225          78
other_malignancy                0.0005277732          80
Underlying_stroke               0.0004520199          81
Underlying_CV                   0.0003225830          82
prev_gks                        0.0002640906          83
neurology                       0.0001970560          84
ILD                             0.0001423513          85
postICUCPR                      0.0001391129          86
ECMO                            0.0000000000          87
preICUDNR                       0.0000000000          88
                                       features MeanDecreaseGini secondColPos
neutropenia                         neutropenia      39.65947698            1
bacteremia                           bacteremia      29.84258161            2
PCC                                         PCC      20.00192035            3
ANC                                         ANC      13.19436161            7
Death_Cause                         Death_Cause       9.56680877           10
respfailure                         respfailure      13.37433009            6
Vasoactiveagent                 Vasoactiveagent      13.93156638            5
postICUCtx                           postICUCtx      15.37563282            4
APACH_II                               APACH_II       8.46961297           11
AKI                                         AKI       7.52530481           14
Pneumonia                             Pneumonia       9.87662854            9
thrombocytopenia               thrombocytopenia       7.79377971           13
cardiovasc                           cardiovasc       8.32374072           12
Underlying_DM                     Underlying_DM      13.03677439            8
WBC                                         WBC       4.97505847           17
ICU_cause_intensivist     ICU_cause_intensivist       5.02054546           16
PT_percent                           PT_percent       4.78441322           18
ICUCPR                                   ICUCPR       5.66017370           15
MV_days                                 MV_days       4.47260395           20
age                                         age       3.79813642           24
procalcitonin                     procalcitonin       4.38864352           21
BUN                                         BUN       3.08186011           29
postICURT                             postICURT       3.85970322           23
MV                                           MV       3.97311065           22
prev_ccrt                             prev_ccrt       4.64264996           19
PLT                                         PLT       3.49203963           26
StageNum                               StageNum       3.61104336           25
Distatntmets                       Distatntmets       3.47499202           27
aPTT                                       aPTT       2.89223701           32
Cause_Ca_problem               Cause_Ca_problem       3.00517703           31
ICU_LOS                                 ICU_LOS       3.07092362           30
timefromdx                           timefromdx       3.29300353           28
PaO2FiO2                               PaO2FiO2       2.84541528           33
CRP                                         CRP       2.12852370           40
smk_hx                                   smk_hx       2.29527225           36
post_icu_survival             post_icu_survival       2.20400457           39
NewlyDx                                 NewlyDx       1.67733718           43
prev_wbrt                             prev_wbrt       1.62895433           46
Albumin                                 Albumin       1.75461971           42
sex                                         sex       1.98908286           41
Pre_PS                                   Pre_PS       1.66380891           45
SOFA_D1                                 SOFA_D1       1.55693794           47
Hb                                           Hb       1.66409799           44
BIPAP                                     BIPAP       2.52784029           34
WBRT                                       WBRT       2.27382139           38
histologyNum                       histologyNum       1.47096061           49
SAPS_II                                 SAPS_II       1.51773804           48
dx_after_adm                       dx_after_adm       2.40401595           35
post_dc_days                       post_dc_days       1.39433651           52
HFNC                                       HFNC       1.38032697           53
post2011                               post2011       1.45687712           50
anemia                                   anemia       1.33239490           54
hospital_LOS                       hospital_LOS       1.42781473           51
PDT                                         PDT       2.27616937           37
CRRT                                       CRRT       1.14491697           57
prev_rtx                               prev_rtx       1.15754778           56
ICU_mortal30                       ICU_mortal30       1.05314896           58
Refractory                           Refractory       0.88068925           61
Tracheostomy                       Tracheostomy       1.29205446           55
pulmocomorbid                     pulmocomorbid       0.82932066           64
Surgery                                 Surgery       0.93318458           60
underlying_pulmo               underlying_pulmo       0.85042611           62
hypoalbuminemia                 hypoalbuminemia       0.75787096           66
DNR_at_ICU                           DNR_at_ICU       0.83405764           63
ICU_Death                             ICU_Death       0.69097520           67
ICUreadmission                   ICUreadmission       1.03027738           59
Intensivist                         Intensivist       0.58474441           74
PrevICUadm                           PrevICUadm       0.76694956           65
performance_hospital_DC performance_hospital_DC       0.66659113           69
PoorPS                                   PoorPS       0.62822704           71
DNR                                         DNR       0.57996726           75
HD                                           HD       0.66768435           68
Hospital_death                   Hospital_death       0.60811302           72
prev_ctx                               prev_ctx       0.66435972           70
DischargefromICU               DischargefromICU       0.53649995           76
performance_ICU_DC           performance_ICU_DC       0.60648685           73
prevCPR                                 prevCPR       0.39968288           78
CTxinICU                               CTxinICU       0.53083299           77
RRT                                         RRT       0.39122761           79
other_malignancy               other_malignancy       0.30870252           80
Underlying_stroke             Underlying_stroke       0.26842124           81
Underlying_CV                     Underlying_CV       0.23210346           82
prev_gks                               prev_gks       0.19441644           83
neurology                             neurology       0.16567151           84
ILD                                         ILD       0.08629760           86
postICUCPR                           postICUCPR       0.16231515           85
ECMO                                       ECMO       0.00000000           88
preICUDNR                             preICUDNR       0.02808715           87
                        posSum finalPos meanDecreaseAccuracyPosition
neutropenia                  2        1                            1
bacteremia                   4        2                            2
PCC                          7        3                            4
ANC                         10        4                            3
Death_Cause                 15        5                            5
respfailure                 15        6                            9
Vasoactiveagent             15        7                           10
postICUCtx                  16        8                           12
APACH_II                    19        9                            8
AKI                         20       10                            6
Pneumonia                   20       11                           11
thrombocytopenia            20       12                            7
cardiovasc                  26       13                           14
Underlying_DM               28       14                           20
WBC                         30       15                           13
ICU_cause_intensivist       33       16                           17
PT_percent                  33       17                           15
ICUCPR                      36       18                           21
MV_days                     39       19                           19
age                         42       20                           18
procalcitonin               43       21                           22
BUN                         45       22                           16
postICURT                   46       23                           23
MV                          47       24                           25
prev_ccrt                   51       25                           32
PLT                         53       26                           27
StageNum                    54       27                           29
Distatntmets                55       28                           28
aPTT                        56       29                           24
Cause_Ca_problem            57       30                           26
ICU_LOS                     60       31                           30
timefromdx                  61       32                           33
PaO2FiO2                    67       33                           34
CRP                         71       34                           31
smk_hx                      74       35                           38
post_icu_survival           76       36                           37
NewlyDx                     79       37                           36
prev_wbrt                   81       38                           35
Albumin                     82       39                           40
sex                         83       40                           42
Pre_PS                      86       41                           41
SOFA_D1                     86       42                           39
Hb                          87       43                           43
BIPAP                       90       44                           56
WBRT                        90       45                           52
histologyNum                93       46                           44
SAPS_II                     96       47                           48
dx_after_adm                97       48                           62
post_dc_days                97       49                           45
HFNC                        99       50                           46
post2011                   100       51                           50
anemia                     101       52                           47
hospital_LOS               102       53                           51
PDT                        103       54                           66
CRRT                       106       55                           49
prev_rtx                   110       56                           54
ICU_mortal30               111       57                           53
Refractory                 116       58                           55
Tracheostomy               120       59                           65
pulmocomorbid              121       60                           57
Surgery                    123       61                           63
underlying_pulmo           123       62                           61
hypoalbuminemia            124       63                           58
DNR_at_ICU                 127       64                           64
ICU_Death                  127       65                           60
ICUreadmission             127       66                           68
Intensivist                133       67                           59
PrevICUadm                 138       68                           73
performance_hospital_DC    139       69                           70
PoorPS                     140       70                           69
DNR                        142       71                           67
HD                         144       72                           76
Hospital_death             144       73                           72
prev_ctx                   145       74                           75
DischargefromICU           147       75                           71
performance_ICU_DC         147       76                           74
prevCPR                    155       77                           77
CTxinICU                   156       78                           79
RRT                        157       79                           78
other_malignancy           160       80                           80
Underlying_stroke          162       81                           81
Underlying_CV              164       82                           82
prev_gks                   166       83                           83
neurology                  168       84                           84
ILD                        171       85                           85
postICUCPR                 171       86                           86
ECMO                       175       87                           87
preICUDNR                  175       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
neutropenia                                    1                  2
bacteremia                                     2                  4
PCC                                            3                  7
ANC                                            7                 10
Death_Cause                                   10                 15
respfailure                                    6                 15
Vasoactiveagent                                5                 15
postICUCtx                                     4                 16
APACH_II                                      11                 19
AKI                                           14                 20
Pneumonia                                      9                 20
thrombocytopenia                              13                 20
cardiovasc                                    12                 26
Underlying_DM                                  8                 28
WBC                                           17                 30
ICU_cause_intensivist                         16                 33
PT_percent                                    18                 33
ICUCPR                                        15                 36
MV_days                                       20                 39
age                                           24                 42
procalcitonin                                 21                 43
BUN                                           29                 45
postICURT                                     23                 46
MV                                            22                 47
prev_ccrt                                     19                 51
PLT                                           26                 53
StageNum                                      25                 54
Distatntmets                                  27                 55
aPTT                                          32                 56
Cause_Ca_problem                              31                 57
ICU_LOS                                       30                 60
timefromdx                                    28                 61
PaO2FiO2                                      33                 67
CRP                                           40                 71
smk_hx                                        36                 74
post_icu_survival                             39                 76
NewlyDx                                       43                 79
prev_wbrt                                     46                 81
Albumin                                       42                 82
sex                                           41                 83
Pre_PS                                        45                 86
SOFA_D1                                       47                 86
Hb                                            44                 87
BIPAP                                         34                 90
WBRT                                          38                 90
histologyNum                                  49                 93
SAPS_II                                       48                 96
dx_after_adm                                  35                 97
post_dc_days                                  52                 97
HFNC                                          53                 99
post2011                                      50                100
anemia                                        54                101
hospital_LOS                                  51                102
PDT                                           37                103
CRRT                                          57                106
prev_rtx                                      56                110
ICU_mortal30                                  58                111
Refractory                                    61                116
Tracheostomy                                  55                120
pulmocomorbid                                 64                121
Surgery                                       60                123
underlying_pulmo                              62                123
hypoalbuminemia                               66                124
DNR_at_ICU                                    63                127
ICU_Death                                     67                127
ICUreadmission                                59                127
Intensivist                                   74                133
PrevICUadm                                    65                138
performance_hospital_DC                       69                139
PoorPS                                        71                140
DNR                                           75                142
HD                                            68                144
Hospital_death                                72                144
prev_ctx                                      70                145
DischargefromICU                              76                147
performance_ICU_DC                            73                147
prevCPR                                       78                155
CTxinICU                                      77                156
RRT                                           79                157
other_malignancy                              80                160
Underlying_stroke                             81                162
Underlying_CV                                 82                164
prev_gks                                      83                166
neurology                                     84                168
ILD                                           86                171
postICUCPR                                    85                171
ECMO                                          88                175
preICUDNR                                     87                175
number of selected top features: 3
selected top features: 
[1] "neutropenia" "bacteremia"  "PCC"        

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.748705
ROC AUC 		0.8522727

Brier score =  0.092  (best value: 0; worst value: 1)

TOTAL:

 FN =  1  /  4 	 (truth == 1) & (prediction < threshold)
 TP =  3  /  4 	 (truth == 1) & (prediction >= threshold)

 FP =  3  /  22 	 (truth == 0) & (prediction >= threshold)
 TN =  19  /  22 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.525 	 0.600 	 	0.846 	 	0.750 	 	0.864		0.500	 	0.950	 	0.749	0.852

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  8
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
Vasoactiveagent                 4.197833e-02           1
pulmocomorbid                   3.385613e-02           2
StageNum                        2.331593e-02           4
underlying_pulmo                2.728735e-02           3
AKI                             2.247643e-02           6
ILD                             1.644283e-02           8
WBRT                            1.337332e-02          12
aPTT                            1.646229e-02           7
CRP                             1.351952e-02          11
Death_Cause                     2.302272e-02           5
DNR                             1.465375e-02           9
PCC                             1.373319e-02          10
neutropenia                     1.188954e-02          14
prev_rtx                        1.146991e-02          17
Albumin                         1.152501e-02          16
ANC                             1.226995e-02          13
prevCPR                         1.117846e-02          20
post_dc_days                    1.143213e-02          18
WBC                             1.153291e-02          15
procalcitonin                   9.589370e-03          21
MV_days                         7.596636e-03          25
Surgery                         9.446165e-03          22
Intensivist                     9.399230e-03          23
prev_wbrt                       1.121262e-02          19
ICU_LOS                         6.869487e-03          27
hospital_LOS                    6.922525e-03          26
HFNC                            6.576451e-03          29
smk_hx                          6.805586e-03          28
SOFA_D1                         7.628433e-03          24
APACH_II                        6.139315e-03          30
DischargefromICU                5.965652e-03          32
age                             6.018205e-03          31
PaO2FiO2                        5.833045e-03          33
timefromdx                      5.357501e-03          35
hypoalbuminemia                 5.570026e-03          34
Cause_Ca_problem                5.327870e-03          36
Hb                              5.226631e-03          37
PrevICUadm                      4.407201e-03          40
PT_percent                      5.148707e-03          38
performance_hospital_DC         4.496516e-03          39
SAPS_II                         4.240439e-03          41
CRRT                            4.196823e-03          42
Pre_PS                          3.862930e-03          49
ICU_cause_intensivist           4.062986e-03          44
Distatntmets                    4.082870e-03          43
BUN                             3.872975e-03          47
performance_ICU_DC              3.410552e-03          53
histologyNum                    3.868065e-03          48
ICU_Death                       3.904918e-03          45
sex                             3.611704e-03          51
ICU_mortal30                    3.904670e-03          46
PLT                             3.622130e-03          50
HD                              3.186497e-03          55
post2011                        3.580865e-03          52
post_icu_survival               2.819469e-03          56
CTxinICU                        2.388800e-03          60
thrombocytopenia                3.304842e-03          54
cardiovasc                      2.492810e-03          58
Hospital_death                  2.706861e-03          57
Underlying_CV                   2.311171e-03          62
Pneumonia                       2.478280e-03          59
anemia                          2.243670e-03          64
DNR_at_ICU                      2.376905e-03          61
Refractory                      2.186418e-03          65
bacteremia                      2.297910e-03          63
prev_ctx                        1.854391e-03          67
respfailure                     1.805159e-03          68
PoorPS                          2.105252e-03          66
MV                              1.693991e-03          69
NewlyDx                         1.607292e-03          71
PDT                             1.271197e-03          72
prev_ccrt                       1.615438e-03          70
other_malignancy                1.215971e-03          73
ICUCPR                          1.204788e-03          74
dx_after_adm                    1.193057e-03          75
Underlying_DM                   1.139785e-03          76
postICUCtx                      9.263666e-04          77
preICUDNR                       5.365877e-04          81
RRT                             6.189600e-04          80
ECMO                            6.619351e-04          78
Tracheostomy                    6.387849e-04          79
prev_gks                        5.088342e-04          82
BIPAP                           3.698597e-04          84
neurology                       4.702818e-04          83
postICURT                       2.645312e-04          85
postICUCPR                      1.297917e-04          86
Underlying_stroke               1.224305e-04          87
ICUreadmission                  2.697821e-05          88
                                       features MeanDecreaseGini secondColPos
Vasoactiveagent                 Vasoactiveagent      30.98755213            1
pulmocomorbid                     pulmocomorbid      20.55571422            2
StageNum                               StageNum      15.70045743            3
underlying_pulmo               underlying_pulmo      15.68839558            4
AKI                                         AKI       9.95585618            8
ILD                                         ILD      12.47805047            6
WBRT                                       WBRT      12.96712747            5
aPTT                                       aPTT       7.25226406           11
CRP                                         CRP      10.28797833            7
Death_Cause                         Death_Cause       6.58043715           13
DNR                                         DNR       8.29808599            9
PCC                                         PCC       8.08234692           10
neutropenia                         neutropenia       5.99919218           15
prev_rtx                               prev_rtx       6.79972754           12
Albumin                                 Albumin       5.94195351           16
ANC                                         ANC       4.75706697           19
prevCPR                                 prevCPR       6.27813172           14
post_dc_days                       post_dc_days       5.83536519           17
WBC                                         WBC       4.52970675           22
procalcitonin                     procalcitonin       4.59379791           20
MV_days                                 MV_days       4.76998194           18
Surgery                                 Surgery       4.53910471           21
Intensivist                         Intensivist       4.49574170           23
prev_wbrt                             prev_wbrt       3.62898889           27
ICU_LOS                                 ICU_LOS       4.37642784           24
hospital_LOS                       hospital_LOS       3.71954702           26
HFNC                                       HFNC       4.16578974           25
smk_hx                                   smk_hx       3.45487944           28
SOFA_D1                                 SOFA_D1       2.84960384           32
APACH_II                               APACH_II       3.34334470           29
DischargefromICU               DischargefromICU       3.19064406           30
age                                         age       2.67810063           33
PaO2FiO2                               PaO2FiO2       2.98121531           31
timefromdx                           timefromdx       2.67794082           34
hypoalbuminemia                 hypoalbuminemia       2.39444051           38
Cause_Ca_problem               Cause_Ca_problem       2.42008121           37
Hb                                           Hb       2.53994218           36
PrevICUadm                           PrevICUadm       2.59557343           35
PT_percent                           PT_percent       2.21052605           40
performance_hospital_DC performance_hospital_DC       1.93947777           41
SAPS_II                                 SAPS_II       1.91718020           42
CRRT                                       CRRT       1.84025390           44
Pre_PS                                   Pre_PS       2.27335887           39
ICU_cause_intensivist     ICU_cause_intensivist       1.67878211           46
Distatntmets                       Distatntmets       1.63749279           48
BUN                                         BUN       1.78402738           45
performance_ICU_DC           performance_ICU_DC       1.90270584           43
histologyNum                       histologyNum       1.61440041           49
ICU_Death                             ICU_Death       1.51726640           52
sex                                         sex       1.65959991           47
ICU_mortal30                       ICU_mortal30       1.45171508           53
PLT                                         PLT       1.57303008           50
HD                                           HD       1.52148112           51
post2011                               post2011       1.36485523           55
post_icu_survival             post_icu_survival       1.25472494           57
CTxinICU                               CTxinICU       1.40173132           54
thrombocytopenia               thrombocytopenia       1.05858034           60
cardiovasc                           cardiovasc       1.18163338           58
Hospital_death                   Hospital_death       1.03931167           61
Underlying_CV                     Underlying_CV       1.34146086           56
Pneumonia                             Pneumonia       1.03700316           62
anemia                                   anemia       1.10582194           59
DNR_at_ICU                           DNR_at_ICU       0.96248156           66
Refractory                           Refractory       0.99025435           63
bacteremia                           bacteremia       0.92607037           68
prev_ctx                               prev_ctx       0.97229270           65
respfailure                         respfailure       0.97373275           64
PoorPS                                   PoorPS       0.95384638           67
MV                                           MV       0.74373609           71
NewlyDx                                 NewlyDx       0.77431187           70
PDT                                         PDT       0.89637004           69
prev_ccrt                             prev_ccrt       0.72010703           73
other_malignancy               other_malignancy       0.74306653           72
ICUCPR                                   ICUCPR       0.67403485           74
dx_after_adm                       dx_after_adm       0.66974102           75
Underlying_DM                     Underlying_DM       0.56817303           77
postICUCtx                           postICUCtx       0.45561189           79
preICUDNR                             preICUDNR       0.64460113           76
RRT                                         RRT       0.46977545           78
ECMO                                       ECMO       0.37955233           81
Tracheostomy                       Tracheostomy       0.31731739           82
prev_gks                               prev_gks       0.41282366           80
BIPAP                                     BIPAP       0.30688597           84
neurology                             neurology       0.28527386           85
postICURT                             postICURT       0.31710669           83
postICUCPR                           postICUCPR       0.12007200           87
Underlying_stroke             Underlying_stroke       0.16279183           86
ICUreadmission                   ICUreadmission       0.09211882           88
                        posSum finalPos meanDecreaseAccuracyPosition
Vasoactiveagent              2        1                            1
pulmocomorbid                4        2                            2
StageNum                     7        3                            4
underlying_pulmo             7        4                            3
AKI                         14        5                            6
ILD                         14        6                            8
WBRT                        17        7                           12
aPTT                        18        8                            7
CRP                         18        9                           11
Death_Cause                 18       10                            5
DNR                         18       11                            9
PCC                         20       12                           10
neutropenia                 29       13                           14
prev_rtx                    29       14                           17
Albumin                     32       15                           16
ANC                         32       16                           13
prevCPR                     34       17                           20
post_dc_days                35       18                           18
WBC                         37       19                           15
procalcitonin               41       20                           21
MV_days                     43       21                           25
Surgery                     43       22                           22
Intensivist                 46       23                           23
prev_wbrt                   46       24                           19
ICU_LOS                     51       25                           27
hospital_LOS                52       26                           26
HFNC                        54       27                           29
smk_hx                      56       28                           28
SOFA_D1                     56       29                           24
APACH_II                    59       30                           30
DischargefromICU            62       31                           32
age                         64       32                           31
PaO2FiO2                    64       33                           33
timefromdx                  69       34                           35
hypoalbuminemia             72       35                           34
Cause_Ca_problem            73       36                           36
Hb                          73       37                           37
PrevICUadm                  75       38                           40
PT_percent                  78       39                           38
performance_hospital_DC     80       40                           39
SAPS_II                     83       41                           41
CRRT                        86       42                           42
Pre_PS                      88       43                           49
ICU_cause_intensivist       90       44                           44
Distatntmets                91       45                           43
BUN                         92       46                           47
performance_ICU_DC          96       47                           53
histologyNum                97       48                           48
ICU_Death                   97       49                           45
sex                         98       50                           51
ICU_mortal30                99       51                           46
PLT                        100       52                           50
HD                         106       53                           55
post2011                   107       54                           52
post_icu_survival          113       55                           56
CTxinICU                   114       56                           60
thrombocytopenia           114       57                           54
cardiovasc                 116       58                           58
Hospital_death             118       59                           57
Underlying_CV              118       60                           62
Pneumonia                  121       61                           59
anemia                     123       62                           64
DNR_at_ICU                 127       63                           61
Refractory                 128       64                           65
bacteremia                 131       65                           63
prev_ctx                   132       66                           67
respfailure                132       67                           68
PoorPS                     133       68                           66
MV                         140       69                           69
NewlyDx                    141       70                           71
PDT                        141       71                           72
prev_ccrt                  143       72                           70
other_malignancy           145       73                           73
ICUCPR                     148       74                           74
dx_after_adm               150       75                           75
Underlying_DM              153       76                           76
postICUCtx                 156       77                           77
preICUDNR                  157       78                           81
RRT                        158       79                           80
ECMO                       159       80                           78
Tracheostomy               161       81                           79
prev_gks                   162       82                           82
BIPAP                      168       83                           84
neurology                  168       84                           83
postICURT                  168       85                           85
postICUCPR                 173       86                           86
Underlying_stroke          173       87                           87
ICUreadmission             176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
Vasoactiveagent                                1                  2
pulmocomorbid                                  2                  4
StageNum                                       3                  7
underlying_pulmo                               4                  7
AKI                                            8                 14
ILD                                            6                 14
WBRT                                           5                 17
aPTT                                          11                 18
CRP                                            7                 18
Death_Cause                                   13                 18
DNR                                            9                 18
PCC                                           10                 20
neutropenia                                   15                 29
prev_rtx                                      12                 29
Albumin                                       16                 32
ANC                                           19                 32
prevCPR                                       14                 34
post_dc_days                                  17                 35
WBC                                           22                 37
procalcitonin                                 20                 41
MV_days                                       18                 43
Surgery                                       21                 43
Intensivist                                   23                 46
prev_wbrt                                     27                 46
ICU_LOS                                       24                 51
hospital_LOS                                  26                 52
HFNC                                          25                 54
smk_hx                                        28                 56
SOFA_D1                                       32                 56
APACH_II                                      29                 59
DischargefromICU                              30                 62
age                                           33                 64
PaO2FiO2                                      31                 64
timefromdx                                    34                 69
hypoalbuminemia                               38                 72
Cause_Ca_problem                              37                 73
Hb                                            36                 73
PrevICUadm                                    35                 75
PT_percent                                    40                 78
performance_hospital_DC                       41                 80
SAPS_II                                       42                 83
CRRT                                          44                 86
Pre_PS                                        39                 88
ICU_cause_intensivist                         46                 90
Distatntmets                                  48                 91
BUN                                           45                 92
performance_ICU_DC                            43                 96
histologyNum                                  49                 97
ICU_Death                                     52                 97
sex                                           47                 98
ICU_mortal30                                  53                 99
PLT                                           50                100
HD                                            51                106
post2011                                      55                107
post_icu_survival                             57                113
CTxinICU                                      54                114
thrombocytopenia                              60                114
cardiovasc                                    58                116
Hospital_death                                61                118
Underlying_CV                                 56                118
Pneumonia                                     62                121
anemia                                        59                123
DNR_at_ICU                                    66                127
Refractory                                    63                128
bacteremia                                    68                131
prev_ctx                                      65                132
respfailure                                   64                132
PoorPS                                        67                133
MV                                            71                140
NewlyDx                                       70                141
PDT                                           69                141
prev_ccrt                                     73                143
other_malignancy                              72                145
ICUCPR                                        74                148
dx_after_adm                                  75                150
Underlying_DM                                 77                153
postICUCtx                                    79                156
preICUDNR                                     76                157
RRT                                           78                158
ECMO                                          81                159
Tracheostomy                                  82                161
prev_gks                                      80                162
BIPAP                                         84                168
neurology                                     85                168
postICURT                                     83                168
postICUCPR                                    87                173
Underlying_stroke                             86                173
ICUreadmission                                88                176
number of selected top features: 3
selected top features: 
[1] "Vasoactiveagent" "pulmocomorbid"   "StageNum"       

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.4
ROC AUC 		0.6666667

Brier score =  0.400  (best value: 0; worst value: 1)

TOTAL:

 FN =  2  /  8 	 (truth == 1) & (prediction < threshold)
 TP =  6  /  8 	 (truth == 1) & (prediction >= threshold)

 FP =  9  /  18 	 (truth == 0) & (prediction >= threshold)
 TN =  9  /  18 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.234 	 0.522 	 	0.577 	 	0.750 	 	0.500		0.400	 	0.818	 	0.400	0.667

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  9
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
bacteremia                      4.273616e-02           1
neutropenia                     3.582866e-02           2
ANC                             3.541578e-02           3
Pneumonia                       2.319638e-02           6
WBC                             3.471953e-02           4
WBRT                            1.762272e-02           9
post_dc_days                    2.545518e-02           5
thrombocytopenia                2.189410e-02           8
PLT                             2.315951e-02           7
PT_percent                      1.503485e-02          10
hospital_LOS                    1.450075e-02          12
prev_ccrt                       1.161552e-02          14
Vasoactiveagent                 1.296998e-02          13
AKI                             1.466043e-02          11
aPTT                            9.239298e-03          15
PrevICUadm                      8.104002e-03          17
CRP                             8.792722e-03          16
postICUCtx                      6.705291e-03          19
SOFA_D1                         7.600644e-03          18
timefromdx                      6.359623e-03          20
StageNum                        5.949370e-03          21
Underlying_DM                   4.961964e-03          26
prev_wbrt                       5.544128e-03          22
Albumin                         5.498682e-03          23
BUN                             5.232963e-03          24
Cause_Ca_problem                5.144846e-03          25
performance_ICU_DC              3.217522e-03          36
Hb                              4.961168e-03          27
procalcitonin                   4.485088e-03          28
Refractory                      3.632964e-03          34
PaO2FiO2                        4.094699e-03          29
anemia                          3.866252e-03          31
prevCPR                         3.058760e-03          38
APACH_II                        3.994904e-03          30
post_icu_survival               3.782600e-03          32
Underlying_stroke               3.434740e-03          35
age                             3.185393e-03          37
Death_Cause                     3.704948e-03          33
MV_days                         3.036818e-03          39
ICU_LOS                         2.248046e-03          42
HFNC                            2.669796e-03          40
hypoalbuminemia                 2.522508e-03          41
Pre_PS                          2.183768e-03          43
SAPS_II                         2.147567e-03          44
Distatntmets                    2.080291e-03          45
histologyNum                    2.004302e-03          47
Hospital_death                  2.043882e-03          46
prev_rtx                        1.930743e-03          48
Tracheostomy                    1.193683e-03          63
performance_hospital_DC         1.655663e-03          52
post2011                        1.668471e-03          51
PDT                             1.152557e-03          65
DischargefromICU                1.698151e-03          50
prev_gks                        1.107866e-03          68
CRRT                            1.490537e-03          54
cardiovasc                      1.367113e-03          58
ICU_mortal30                    1.881045e-03          49
respfailure                     1.439778e-03          56
Underlying_CV                   1.252011e-03          60
NewlyDx                         1.440237e-03          55
underlying_pulmo                1.355059e-03          59
ICU_Death                       1.511285e-03          53
smk_hx                          1.143885e-03          67
DNR_at_ICU                      1.423023e-03          57
sex                             1.162582e-03          64
BIPAP                           8.313528e-04          75
DNR                             1.214671e-03          62
PoorPS                          1.221106e-03          61
Surgery                         1.148279e-03          66
neurology                       9.811821e-04          73
Intensivist                     1.083043e-03          69
ILD                             9.890203e-04          71
pulmocomorbid                   1.011540e-03          70
MV                              9.849194e-04          72
ICUCPR                          7.950606e-04          76
prev_ctx                        8.838104e-04          74
HD                              6.573287e-04          78
PCC                             5.307295e-04          80
other_malignancy                7.261670e-04          77
ICU_cause_intensivist           5.872737e-04          79
dx_after_adm                    5.050136e-04          81
ECMO                            1.555599e-04          84
RRT                             1.826534e-04          83
CTxinICU                        6.665138e-05          85
preICUDNR                       1.838423e-04          82
ICUreadmission                  1.266671e-05          87
postICUCPR                      1.359632e-05          86
postICURT                       0.000000e+00          88
                                       features MeanDecreaseGini secondColPos
bacteremia                           bacteremia     31.916949625            1
neutropenia                         neutropenia     26.501218261            2
ANC                                         ANC     16.796946197            5
Pneumonia                             Pneumonia     19.530808265            3
WBC                                         WBC     16.425113413            7
WBRT                                       WBRT     17.691540541            4
post_dc_days                       post_dc_days     15.069133247            9
thrombocytopenia               thrombocytopenia     16.628866294            6
PLT                                         PLT     16.353083770            8
PT_percent                           PT_percent      8.190778958           13
hospital_LOS                       hospital_LOS      8.707558654           12
prev_ccrt                             prev_ccrt     13.244872303           10
Vasoactiveagent                 Vasoactiveagent     10.503414127           11
AKI                                         AKI      7.437313474           14
aPTT                                       aPTT      6.078049463           15
PrevICUadm                           PrevICUadm      5.657422139           16
CRP                                         CRP      3.943278178           18
postICUCtx                           postICUCtx      4.343142267           17
SOFA_D1                                 SOFA_D1      2.871825326           23
timefromdx                           timefromdx      3.345075239           21
StageNum                               StageNum      3.119287343           22
Underlying_DM                     Underlying_DM      3.607320283           19
prev_wbrt                             prev_wbrt      2.752683982           24
Albumin                                 Albumin      2.614657666           26
BUN                                         BUN      2.461819030           28
Cause_Ca_problem               Cause_Ca_problem      2.385531157           29
performance_ICU_DC           performance_ICU_DC      3.445853486           20
Hb                                           Hb      2.317409427           30
procalcitonin                     procalcitonin      2.018333608           31
Refractory                           Refractory      2.487631668           27
PaO2FiO2                               PaO2FiO2      1.892027940           33
anemia                                   anemia      1.956704578           32
prevCPR                                 prevCPR      2.635069144           25
APACH_II                               APACH_II      1.740749298           37
post_icu_survival             post_icu_survival      1.564806403           38
Underlying_stroke             Underlying_stroke      1.775832793           36
age                                         age      1.788078763           35
Death_Cause                         Death_Cause      1.442232255           40
MV_days                                 MV_days      1.878503372           34
ICU_LOS                                 ICU_LOS      1.436047962           41
HFNC                                       HFNC      1.153092297           44
hypoalbuminemia                 hypoalbuminemia      0.978008912           48
Pre_PS                                   Pre_PS      1.079181533           46
SAPS_II                                 SAPS_II      1.080681268           45
Distatntmets                       Distatntmets      1.005744775           47
histologyNum                       histologyNum      0.965921326           49
Hospital_death                   Hospital_death      0.910342024           52
prev_rtx                               prev_rtx      0.944409328           50
Tracheostomy                       Tracheostomy      1.504474541           39
performance_hospital_DC performance_hospital_DC      0.937226493           51
post2011                               post2011      0.886083039           53
PDT                                         PDT      1.186825360           43
DischargefromICU               DischargefromICU      0.804545690           60
prev_gks                               prev_gks      1.340665312           42
CRRT                                       CRRT      0.824220870           58
cardiovasc                           cardiovasc      0.826743771           57
ICU_mortal30                       ICU_mortal30      0.662974805           66
respfailure                         respfailure      0.809096976           59
Underlying_CV                     Underlying_CV      0.835626479           55
NewlyDx                                 NewlyDx      0.671395006           65
underlying_pulmo               underlying_pulmo      0.755654914           61
ICU_Death                             ICU_Death      0.599544530           70
smk_hx                                   smk_hx      0.827778835           56
DNR_at_ICU                           DNR_at_ICU      0.639942716           67
sex                                         sex      0.745594390           63
BIPAP                                     BIPAP      0.859427515           54
DNR                                         DNR      0.622123116           68
PoorPS                                   PoorPS      0.604592704           69
Surgery                                 Surgery      0.724316854           64
neurology                             neurology      0.749154518           62
Intensivist                         Intensivist      0.570828894           71
ILD                                         ILD      0.497374816           72
pulmocomorbid                     pulmocomorbid      0.473815205           75
MV                                           MV      0.475212911           74
ICUCPR                                   ICUCPR      0.485512562           73
prev_ctx                               prev_ctx      0.458041200           78
HD                                           HD      0.460694777           77
PCC                                         PCC      0.470652349           76
other_malignancy               other_malignancy      0.347238009           81
ICU_cause_intensivist     ICU_cause_intensivist      0.392076719           80
dx_after_adm                       dx_after_adm      0.425055925           79
ECMO                                       ECMO      0.235922100           82
RRT                                         RRT      0.110480183           84
CTxinICU                               CTxinICU      0.129218404           83
preICUDNR                             preICUDNR      0.089361882           86
ICUreadmission                   ICUreadmission      0.089533257           85
postICUCPR                           postICUCPR      0.043013716           87
postICURT                             postICURT      0.004910146           88
                        posSum finalPos meanDecreaseAccuracyPosition
bacteremia                   2        1                            1
neutropenia                  4        2                            2
ANC                          8        3                            3
Pneumonia                    9        4                            6
WBC                         11        5                            4
WBRT                        13        6                            9
post_dc_days                14        7                            5
thrombocytopenia            14        8                            8
PLT                         15        9                            7
PT_percent                  23       10                           10
hospital_LOS                24       11                           12
prev_ccrt                   24       12                           14
Vasoactiveagent             24       13                           13
AKI                         25       14                           11
aPTT                        30       15                           15
PrevICUadm                  33       16                           17
CRP                         34       17                           16
postICUCtx                  36       18                           19
SOFA_D1                     41       19                           18
timefromdx                  41       20                           20
StageNum                    43       21                           21
Underlying_DM               45       22                           26
prev_wbrt                   46       23                           22
Albumin                     49       24                           23
BUN                         52       25                           24
Cause_Ca_problem            54       26                           25
performance_ICU_DC          56       27                           36
Hb                          57       28                           27
procalcitonin               59       29                           28
Refractory                  61       30                           34
PaO2FiO2                    62       31                           29
anemia                      63       32                           31
prevCPR                     63       33                           38
APACH_II                    67       34                           30
post_icu_survival           70       35                           32
Underlying_stroke           71       36                           35
age                         72       37                           37
Death_Cause                 73       38                           33
MV_days                     73       39                           39
ICU_LOS                     83       40                           42
HFNC                        84       41                           40
hypoalbuminemia             89       42                           41
Pre_PS                      89       43                           43
SAPS_II                     89       44                           44
Distatntmets                92       45                           45
histologyNum                96       46                           47
Hospital_death              98       47                           46
prev_rtx                    98       48                           48
Tracheostomy               102       49                           63
performance_hospital_DC    103       50                           52
post2011                   104       51                           51
PDT                        108       52                           65
DischargefromICU           110       53                           50
prev_gks                   110       54                           68
CRRT                       112       55                           54
cardiovasc                 115       56                           58
ICU_mortal30               115       57                           49
respfailure                115       58                           56
Underlying_CV              115       59                           60
NewlyDx                    120       60                           55
underlying_pulmo           120       61                           59
ICU_Death                  123       62                           53
smk_hx                     123       63                           67
DNR_at_ICU                 124       64                           57
sex                        127       65                           64
BIPAP                      129       66                           75
DNR                        130       67                           62
PoorPS                     130       68                           61
Surgery                    130       69                           66
neurology                  135       70                           73
Intensivist                140       71                           69
ILD                        143       72                           71
pulmocomorbid              145       73                           70
MV                         146       74                           72
ICUCPR                     149       75                           76
prev_ctx                   152       76                           74
HD                         155       77                           78
PCC                        156       78                           80
other_malignancy           158       79                           77
ICU_cause_intensivist      159       80                           79
dx_after_adm               160       81                           81
ECMO                       166       82                           84
RRT                        167       83                           83
CTxinICU                   168       84                           85
preICUDNR                  168       85                           82
ICUreadmission             172       86                           87
postICUCPR                 173       87                           86
postICURT                  176       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
bacteremia                                     1                  2
neutropenia                                    2                  4
ANC                                            5                  8
Pneumonia                                      3                  9
WBC                                            7                 11
WBRT                                           4                 13
post_dc_days                                   9                 14
thrombocytopenia                               6                 14
PLT                                            8                 15
PT_percent                                    13                 23
hospital_LOS                                  12                 24
prev_ccrt                                     10                 24
Vasoactiveagent                               11                 24
AKI                                           14                 25
aPTT                                          15                 30
PrevICUadm                                    16                 33
CRP                                           18                 34
postICUCtx                                    17                 36
SOFA_D1                                       23                 41
timefromdx                                    21                 41
StageNum                                      22                 43
Underlying_DM                                 19                 45
prev_wbrt                                     24                 46
Albumin                                       26                 49
BUN                                           28                 52
Cause_Ca_problem                              29                 54
performance_ICU_DC                            20                 56
Hb                                            30                 57
procalcitonin                                 31                 59
Refractory                                    27                 61
PaO2FiO2                                      33                 62
anemia                                        32                 63
prevCPR                                       25                 63
APACH_II                                      37                 67
post_icu_survival                             38                 70
Underlying_stroke                             36                 71
age                                           35                 72
Death_Cause                                   40                 73
MV_days                                       34                 73
ICU_LOS                                       41                 83
HFNC                                          44                 84
hypoalbuminemia                               48                 89
Pre_PS                                        46                 89
SAPS_II                                       45                 89
Distatntmets                                  47                 92
histologyNum                                  49                 96
Hospital_death                                52                 98
prev_rtx                                      50                 98
Tracheostomy                                  39                102
performance_hospital_DC                       51                103
post2011                                      53                104
PDT                                           43                108
DischargefromICU                              60                110
prev_gks                                      42                110
CRRT                                          58                112
cardiovasc                                    57                115
ICU_mortal30                                  66                115
respfailure                                   59                115
Underlying_CV                                 55                115
NewlyDx                                       65                120
underlying_pulmo                              61                120
ICU_Death                                     70                123
smk_hx                                        56                123
DNR_at_ICU                                    67                124
sex                                           63                127
BIPAP                                         54                129
DNR                                           68                130
PoorPS                                        69                130
Surgery                                       64                130
neurology                                     62                135
Intensivist                                   71                140
ILD                                           72                143
pulmocomorbid                                 75                145
MV                                            74                146
ICUCPR                                        73                149
prev_ctx                                      78                152
HD                                            77                155
PCC                                           76                156
other_malignancy                              81                158
ICU_cause_intensivist                         80                159
dx_after_adm                                  79                160
ECMO                                          82                166
RRT                                           84                167
CTxinICU                                      83                168
preICUDNR                                     86                168
ICUreadmission                                85                172
postICUCPR                                    87                173
postICURT                                     88                176
number of selected top features: 3
selected top features: 
[1] "bacteremia"  "neutropenia" "ANC"        

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.7047615
ROC AUC 		0.7593985

Brier score =  0.152  (best value: 0; worst value: 1)

TOTAL:

 FN =  3  /  7 	 (truth == 1) & (prediction < threshold)
 TP =  4  /  7 	 (truth == 1) & (prediction >= threshold)

 FP =  2  /  19 	 (truth == 0) & (prediction >= threshold)
 TN =  17  /  19 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.491 	 0.615 	 	0.808 	 	0.571 	 	0.895		0.667	 	0.850	 	0.705	0.759

Number of feature selection executions = 10



 Execution number feature selection = 1 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 2 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 3 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 4 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 5 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 6 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 7 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 8 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 9 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]



 Execution number feature selection = 10 & classif =  10
[Randomizing the rows]
SMOTE oversampling
application of randomForest()
[function agregateTwoSortedRankings()]




== final ranking after 10 executions == 
[function agregateTwoSortedRankings()]
                        MeanDecreaseAccuracy firstColPos
bacteremia                      0.0736634572           1
neutropenia                     0.0611623541           2
thrombocytopenia                0.0470292042           3
PLT                             0.0193918927           4
BUN                             0.0193332633           5
Vasoactiveagent                 0.0134290818           8
CRRT                            0.0150259888           6
PCC                             0.0149729156           7
procalcitonin                   0.0121844893          10
PT_percent                      0.0118865260          11
AKI                             0.0123172343           9
ANC                             0.0095616096          14
CTxinICU                        0.0096180590          13
Underlying_stroke               0.0057125455          22
SOFA_D1                         0.0097400648          12
CRP                             0.0088995410          15
WBC                             0.0088312073          16
other_malignancy                0.0056863175          23
RRT                             0.0050750063          25
aPTT                            0.0065863041          20
APACH_II                        0.0077751160          17
SAPS_II                         0.0068570248          19
ICU_mortal30                    0.0069104648          18
Death_Cause                     0.0062516759          21
Albumin                         0.0051429513          24
timefromdx                      0.0046168121          26
anemia                          0.0035390600          31
prevCPR                         0.0029854113          36
prev_wbrt                       0.0038190696          27
StageNum                        0.0036526853          29
Hb                              0.0026295338          41
ICU_LOS                         0.0035100189          32
Cause_Ca_problem                0.0035592999          30
ICU_Death                       0.0037202332          28
post_dc_days                    0.0030702876          34
MV_days                         0.0030121513          35
smk_hx                          0.0024485092          44
hospital_LOS                    0.0026676959          39
hypoalbuminemia                 0.0028334359          37
Hospital_death                  0.0031617984          33
PaO2FiO2                        0.0026497741          40
age                             0.0024435820          45
prev_ccrt                       0.0020377591          48
DNR                             0.0028155266          38
histologyNum                    0.0024529368          43
performance_ICU_DC              0.0021199078          47
underlying_pulmo                0.0019582459          49
Pre_PS                          0.0021328273          46
Pneumonia                       0.0025449933          42
ICU_cause_intensivist           0.0017083422          52
Distatntmets                    0.0017246009          51
Refractory                      0.0016466888          53
cardiovasc                      0.0017866731          50
PDT                             0.0015514398          54
MV                              0.0015440323          55
respfailure                     0.0013549174          62
performance_hospital_DC         0.0015029639          58
pulmocomorbid                   0.0015289545          56
post_icu_survival               0.0015188971          57
sex                             0.0013885286          60
NewlyDx                         0.0013665837          61
Tracheostomy                    0.0006379420          75
DischargefromICU                0.0014940584          59
Surgery                         0.0011185080          65
DNR_at_ICU                      0.0013178544          63
prev_rtx                        0.0009505158          69
post2011                        0.0011508361          64
HD                              0.0009931450          67
prev_ctx                        0.0009876471          68
ILD                             0.0008319356          71
Intensivist                     0.0010055722          66
HFNC                            0.0009203742          70
postICUCtx                      0.0006866805          73
Underlying_CV                   0.0007120686          72
Underlying_DM                   0.0006640818          74
WBRT                            0.0006038151          77
dx_after_adm                    0.0003943914          79
ICUCPR                          0.0006127783          76
PoorPS                          0.0005664177          78
BIPAP                           0.0003818997          80
prev_gks                        0.0002846267          81
ICUreadmission                  0.0001819308          83
PrevICUadm                      0.0002154375          82
neurology                       0.0001105786          85
postICURT                       0.0001689483          84
ECMO                            0.0000000000          86
preICUDNR                       0.0000000000          88
postICUCPR                      0.0000000000          87
                                       features MeanDecreaseGini secondColPos
bacteremia                           bacteremia     39.683046062            1
neutropenia                         neutropenia     38.006395819            2
thrombocytopenia               thrombocytopenia     30.879506383            3
PLT                                         PLT     15.417425100            4
BUN                                         BUN     13.940580131            6
Vasoactiveagent                 Vasoactiveagent     14.352680677            5
CRRT                                       CRRT      9.901048600            8
PCC                                         PCC      8.445547398           10
procalcitonin                     procalcitonin      9.005879319            9
PT_percent                           PT_percent      8.111491071           11
AKI                                         AKI      5.582241545           16
ANC                                         ANC      6.110059345           14
CTxinICU                               CTxinICU      5.747237196           15
Underlying_stroke             Underlying_stroke     11.683049713            7
SOFA_D1                                 SOFA_D1      4.052909844           19
CRP                                         CRP      4.960416771           17
WBC                                         WBC      4.183563707           18
other_malignancy               other_malignancy      7.140080819           12
RRT                                         RRT      6.684388489           13
aPTT                                       aPTT      3.393302657           20
APACH_II                               APACH_II      2.448702026           25
SAPS_II                                 SAPS_II      2.658272013           23
ICU_mortal30                       ICU_mortal30      2.445086157           26
Death_Cause                         Death_Cause      2.168993534           30
Albumin                                 Albumin      2.209072824           29
timefromdx                           timefromdx      2.404223316           27
anemia                                   anemia      2.649568019           24
prevCPR                                 prevCPR      3.392794249           21
prev_wbrt                             prev_wbrt      1.741498486           33
StageNum                               StageNum      2.168440750           31
Hb                                           Hb      2.924920946           22
ICU_LOS                                 ICU_LOS      1.981787430           32
Cause_Ca_problem               Cause_Ca_problem      1.477339660           36
ICU_Death                             ICU_Death      1.285044193           40
post_dc_days                       post_dc_days      1.563564084           35
MV_days                                 MV_days      1.432925393           37
smk_hx                                   smk_hx      2.350172263           28
hospital_LOS                       hospital_LOS      1.573871977           34
hypoalbuminemia                 hypoalbuminemia      1.364541890           38
Hospital_death                   Hospital_death      1.019036487           48
PaO2FiO2                               PaO2FiO2      1.175603115           43
age                                         age      1.228678887           41
prev_ccrt                             prev_ccrt      1.320190092           39
DNR                                         DNR      0.974567008           50
histologyNum                       histologyNum      1.054227233           46
performance_ICU_DC           performance_ICU_DC      1.105150582           44
underlying_pulmo               underlying_pulmo      1.180134736           42
Pre_PS                                   Pre_PS      1.025005937           47
Pneumonia                             Pneumonia      0.895113647           54
ICU_cause_intensivist     ICU_cause_intensivist      1.081188677           45
Distatntmets                       Distatntmets      0.899608865           53
Refractory                           Refractory      0.935403891           52
cardiovasc                           cardiovasc      0.663453633           59
PDT                                         PDT      0.850428505           55
MV                                           MV      0.741756507           57
respfailure                         respfailure      0.974478098           51
performance_hospital_DC performance_hospital_DC      0.848322336           56
pulmocomorbid                     pulmocomorbid      0.707503477           58
post_icu_survival             post_icu_survival      0.649384006           60
sex                                         sex      0.602604491           62
NewlyDx                                 NewlyDx      0.595730981           63
Tracheostomy                       Tracheostomy      1.014660995           49
DischargefromICU               DischargefromICU      0.508390813           66
Surgery                                 Surgery      0.622832732           61
DNR_at_ICU                           DNR_at_ICU      0.550233760           65
prev_rtx                               prev_rtx      0.591593833           64
post2011                               post2011      0.472645332           70
HD                                           HD      0.488100103           68
prev_ctx                               prev_ctx      0.483371646           69
ILD                                         ILD      0.505565211           67
Intensivist                         Intensivist      0.439699790           72
HFNC                                       HFNC      0.418229108           73
postICUCtx                           postICUCtx      0.439961266           71
Underlying_CV                     Underlying_CV      0.356812866           74
Underlying_DM                     Underlying_DM      0.285456105           78
WBRT                                       WBRT      0.316047382           76
dx_after_adm                       dx_after_adm      0.330512882           75
ICUCPR                                   ICUCPR      0.276255328           79
PoorPS                                   PoorPS      0.311584551           77
BIPAP                                     BIPAP      0.202875532           81
prev_gks                               prev_gks      0.262168533           80
ICUreadmission                   ICUreadmission      0.173117670           82
PrevICUadm                           PrevICUadm      0.105537762           83
neurology                             neurology      0.078405552           84
postICURT                             postICURT      0.062110007           85
ECMO                                       ECMO      0.000000000           87
preICUDNR                             preICUDNR      0.001564011           86
postICUCPR                           postICUCPR      0.000000000           88
                        posSum finalPos meanDecreaseAccuracyPosition
bacteremia                   2        1                            1
neutropenia                  4        2                            2
thrombocytopenia             6        3                            3
PLT                          8        4                            4
BUN                         11        5                            5
Vasoactiveagent             13        6                            8
CRRT                        14        7                            6
PCC                         17        8                            7
procalcitonin               19        9                           10
PT_percent                  22       10                           11
AKI                         25       11                            9
ANC                         28       12                           14
CTxinICU                    28       13                           13
Underlying_stroke           29       14                           22
SOFA_D1                     31       15                           12
CRP                         32       16                           15
WBC                         34       17                           16
other_malignancy            35       18                           23
RRT                         38       19                           25
aPTT                        40       20                           20
APACH_II                    42       21                           17
SAPS_II                     42       22                           19
ICU_mortal30                44       23                           18
Death_Cause                 51       24                           21
Albumin                     53       25                           24
timefromdx                  53       26                           26
anemia                      55       27                           31
prevCPR                     57       28                           36
prev_wbrt                   60       29                           27
StageNum                    60       30                           29
Hb                          63       31                           41
ICU_LOS                     64       32                           32
Cause_Ca_problem            66       33                           30
ICU_Death                   68       34                           28
post_dc_days                69       35                           34
MV_days                     72       36                           35
smk_hx                      72       37                           44
hospital_LOS                73       38                           39
hypoalbuminemia             75       39                           37
Hospital_death              81       40                           33
PaO2FiO2                    83       41                           40
age                         86       42                           45
prev_ccrt                   87       43                           48
DNR                         88       44                           38
histologyNum                89       45                           43
performance_ICU_DC          91       46                           47
underlying_pulmo            91       47                           49
Pre_PS                      93       48                           46
Pneumonia                   96       49                           42
ICU_cause_intensivist       97       50                           52
Distatntmets               104       51                           51
Refractory                 105       52                           53
cardiovasc                 109       53                           50
PDT                        109       54                           54
MV                         112       55                           55
respfailure                113       56                           62
performance_hospital_DC    114       57                           58
pulmocomorbid              114       58                           56
post_icu_survival          117       59                           57
sex                        122       60                           60
NewlyDx                    124       61                           61
Tracheostomy               124       62                           75
DischargefromICU           125       63                           59
Surgery                    126       64                           65
DNR_at_ICU                 128       65                           63
prev_rtx                   133       66                           69
post2011                   134       67                           64
HD                         135       68                           67
prev_ctx                   137       69                           68
ILD                        138       70                           71
Intensivist                138       71                           66
HFNC                       143       72                           70
postICUCtx                 144       73                           73
Underlying_CV              146       74                           72
Underlying_DM              152       75                           74
WBRT                       153       76                           77
dx_after_adm               154       77                           79
ICUCPR                     155       78                           76
PoorPS                     155       79                           78
BIPAP                      161       80                           80
prev_gks                   161       81                           81
ICUreadmission             165       82                           83
PrevICUadm                 165       83                           82
neurology                  169       84                           85
postICURT                  169       85                           84
ECMO                       173       86                           86
preICUDNR                  174       87                           87
postICUCPR                 175       88                           88
                        meanDecreaseGiniPosition aggregatedPosition
bacteremia                                     1                  2
neutropenia                                    2                  4
thrombocytopenia                               3                  6
PLT                                            4                  8
BUN                                            6                 11
Vasoactiveagent                                5                 13
CRRT                                           8                 14
PCC                                           10                 17
procalcitonin                                  9                 19
PT_percent                                    11                 22
AKI                                           16                 25
ANC                                           14                 28
CTxinICU                                      15                 28
Underlying_stroke                              7                 29
SOFA_D1                                       19                 31
CRP                                           17                 32
WBC                                           18                 34
other_malignancy                              12                 35
RRT                                           13                 38
aPTT                                          20                 40
APACH_II                                      25                 42
SAPS_II                                       23                 42
ICU_mortal30                                  26                 44
Death_Cause                                   30                 51
Albumin                                       29                 53
timefromdx                                    27                 53
anemia                                        24                 55
prevCPR                                       21                 57
prev_wbrt                                     33                 60
StageNum                                      31                 60
Hb                                            22                 63
ICU_LOS                                       32                 64
Cause_Ca_problem                              36                 66
ICU_Death                                     40                 68
post_dc_days                                  35                 69
MV_days                                       37                 72
smk_hx                                        28                 72
hospital_LOS                                  34                 73
hypoalbuminemia                               38                 75
Hospital_death                                48                 81
PaO2FiO2                                      43                 83
age                                           41                 86
prev_ccrt                                     39                 87
DNR                                           50                 88
histologyNum                                  46                 89
performance_ICU_DC                            44                 91
underlying_pulmo                              42                 91
Pre_PS                                        47                 93
Pneumonia                                     54                 96
ICU_cause_intensivist                         45                 97
Distatntmets                                  53                104
Refractory                                    52                105
cardiovasc                                    59                109
PDT                                           55                109
MV                                            57                112
respfailure                                   51                113
performance_hospital_DC                       56                114
pulmocomorbid                                 58                114
post_icu_survival                             60                117
sex                                           62                122
NewlyDx                                       63                124
Tracheostomy                                  49                124
DischargefromICU                              66                125
Surgery                                       61                126
DNR_at_ICU                                    65                128
prev_rtx                                      64                133
post2011                                      70                134
HD                                            68                135
prev_ctx                                      69                137
ILD                                           67                138
Intensivist                                   72                138
HFNC                                          73                143
postICUCtx                                    71                144
Underlying_CV                                 74                146
Underlying_DM                                 78                152
WBRT                                          76                153
dx_after_adm                                  75                154
ICUCPR                                        79                155
PoorPS                                        77                155
BIPAP                                         81                161
prev_gks                                      80                161
ICUreadmission                                82                165
PrevICUadm                                    83                165
neurology                                     84                169
postICURT                                     85                169
ECMO                                          87                173
preICUDNR                                     86                173
postICUCPR                                    88                176
number of selected top features: 3
selected top features: 
[1] "bacteremia"       "neutropenia"      "thrombocytopenia"

[Training Random Forests classifier on the training set with only the top  3  features]

[Applying the trained Random Forests classifier on the test set with only the top  3  features]

PR AUC (integral) 	0.5999846
ROC AUC 		0.6354167

Brier score =  0.239  (best value: 0; worst value: 1)

TOTAL:

 FN =  5  /  8 	 (truth == 1) & (prediction < threshold)
 TP =  3  /  8 	 (truth == 1) & (prediction >= threshold)

 FP =  3  /  18 	 (truth == 0) & (prediction >= threshold)
 TN =  15  /  18 	 (truth == 0) & (prediction < threshold)



 @@@ Test set @@@ 	MCC 	 F1_score 	accuracy 	TP_rate 	TN_rate 	PPV 		NPV 		PR AUC 	ROC AUC
@@@ Test set @@@      0.228 	 0.429 	 	0.692 	 	0.375 	 	0.833		0.500	 	0.750	 	0.600	0.635




=== final results ===
Number of executions = 10
                MCC F1_score accuracy TP_rate TN_rate    PPV    NPV PR_AUC
nbr.val      10.000   10.000   10.000  10.000  10.000 10.000 10.000 10.000
nbr.null      0.000    0.000    0.000   0.000   0.000  0.000  0.000  0.000
nbr.na        0.000    0.000    0.000   0.000   0.000  0.000  0.000  0.000
min           0.138    0.308    0.577   0.333   0.500  0.222  0.750  0.391
max           0.603    0.696    0.885   1.000   0.952  0.750  1.000  0.811
range         0.465    0.388    0.308   0.667   0.452  0.528  0.250  0.420
sum           3.911    5.352    7.346   6.380   7.615  5.139  8.763  6.311
median        0.421    0.547    0.712   0.586   0.806  0.500  0.866  0.650
mean          0.391    0.535    0.735   0.638   0.761  0.514  0.876  0.631
SE.mean       0.052    0.038    0.031   0.074   0.052  0.049  0.028  0.047
CI.mean.0.95  0.117    0.085    0.070   0.167   0.119  0.110  0.063  0.106
var           0.027    0.014    0.010   0.055   0.028  0.024  0.008  0.022
std.dev       0.163    0.119    0.098   0.234   0.166  0.154  0.088  0.148
coef.var      0.418    0.223    0.134   0.367   0.218  0.300  0.100  0.234
             ROC_AUC
nbr.val       10.000
nbr.null       0.000
nbr.na         0.000
min            0.614
max            0.913
range          0.300
sum            7.558
median         0.757
mean           0.756
SE.mean        0.031
CI.mean.0.95   0.071
var            0.010
std.dev        0.099
coef.var       0.131


=== === === ===
          MCC F1_score accuracy TP_rate TN_rate   PPV   NPV PR_AUC ROC_AUC
mean    0.391    0.535    0.735   0.638   0.761 0.514 0.876  0.631   0.756
std.dev 0.163    0.119    0.098   0.234   0.166 0.154 0.088  0.148   0.099


=== === === ===



Total execution time: 2.081962 seconds
0 days, 00 hours, 02 minutes, 4.92 seconds

oversampled with perc.over = 126
